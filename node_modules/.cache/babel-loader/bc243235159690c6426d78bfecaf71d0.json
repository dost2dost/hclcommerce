{"ast":null,"code":"var _jsxFileName = \"F:\\\\_HCLCommece\\\\src\\\\Checkout.js\";\nimport React, { Component } from 'react';\nimport './Checkout.css';\nimport { BrowserRouter as Router, Route, Link, Redirect } from 'react-router-dom';\nimport { connect } from 'react-redux';\nimport OrderSummaryPopup from \"./component/OrderSummaryPopup\";\nimport OrderComplete from './component/OrderComplete';\n\nclass Checkout extends Component {\n  constructor(props) {\n    super(props);\n\n    this.billAndShipUserInfo = () => {\n      fetch(this.props.getAppSet.API.billAndShipUserInfo, {\n        // 'https://192.168.17.91:5443/wcs/resources/store/1/person/@self',\n        method: 'GET',\n        headers: this.state.header\n      }).then(res => res.json()).then(json => {\n        console.log(json);\n        this.setState({\n          billAndShip: json,\n          addressId: json.addressId,\n          addCountry: json.country\n        });\n      }).catch(e => console.log(e));\n    };\n\n    this.shippingMethod = () => {\n      fetch(this.props.getAppSet.API.shippingMethods, {\n        //'https://192.168.17.91:5443/wcs/resources/store/1/cart/@self/usable_shipping_info',\n        method: 'GET',\n        headers: this.state.header\n      }).then(res => res.json()).then(json => {\n        console.log(json);\n        this.setState({\n          shippingAddDetails: json.orderItem[0].usableShippingMode\n        });\n        console.log(json.orderItem[0].usableShippingMode);\n      }).catch(e => console.log(e));\n    };\n\n    this.billingMethod = () => {\n      fetch(this.props.getAppSet.API.billingMethods, {\n        //'https://192.168.17.91:5443/wcs/resources/store/1/cart/@self/usable_payment_info',\n        method: 'GET',\n        headers: this.state.header\n      }).then(res => res.json()).then(json => {\n        console.log(json);\n        this.setState({\n          billingAddDetails: json.usablePaymentInformation\n        });\n        console.log(this.state.billingAddDetails);\n      }).catch(e => console.log(e));\n    };\n\n    this.removeItem = (SKUUniqueID, orderItemId, orderId, quantity, Price) => {\n      //console.log(`${SKUUniqueID}--- ${orderItemId} ---- ${orderId}`)\n      let removeProduct = {\n        SKUUniqueID: SKUUniqueID,\n        orderItemId: orderItemId,\n        quantity: quantity,\n        Price: Price\n      };\n      const payloads = {\n        orderId: orderId,\n        \"orderItemId\": orderItemId,\n        //\"12326\",\n        \"catEntryId\": SKUUniqueID //\"1\"\n        //\"x_calculateOrder\": \"0\",\n        //\"x_inventoryValidation\": \"true\", \n\n      };\n      fetch(this.props.getAppSet.API.deleteFromCart, {\n        method: 'PUT',\n        headers: {\n          //'accept': 'application/json',\n          'Content-type': 'application/json',\n          'WCToken': this.props.getWCToken,\n          'WCTrustedToken': this.props.getWCTrustedToken\n        },\n        body: JSON.stringify(payloads)\n      }).then(res => res.json()).then(data => {\n        // console.log(data)\n        this.props.removeFromCart(data.orderId, removeProduct);\n        this.setState({\n          products: this.props.getProductsInCart\n        });\n      }, error => {\n        //API not accessable or through error            \n        console.log(\"Error Data>>\" + error);\n      });\n    };\n\n    this.handlerShipValue = event => {\n      this.setState({\n        shipDetails: event.target.value\n      });\n      console.log(event.target.value);\n    };\n\n    this.handlerBillValue = event => {\n      this.setState({\n        billDetails: event.target.value\n      });\n      console.log(event.target.value);\n    };\n\n    this.gotoSummary = () => {\n      //paymentInstructions\n      const payloads = {\n        \"billing_address_id\": this.state.addressId,\n        \"payMethodId\": \"COD\",\n        \"orderId\": this.props.getCartDetails.orderId,\n        \"piAmount\": this.props.getCartDetails.grandTotal,\n        \"billto_address1\": this.state.addressId,\n        \"billto_country\": this.state.addCountry //\"x_calculateOrder\": \"0\",\n        //\"x_inventoryValidation\": \"true\", \n\n      };\n      fetch(this.props.getAppSet.API.paymentInstructions, {\n        method: 'POST',\n        headers: {\n          //'accept': 'application/json',\n          'Content-type': 'application/json',\n          'WCToken': this.props.getWCToken,\n          'WCTrustedToken': this.props.getWCTrustedToken\n        },\n        body: JSON.stringify(payloads)\n      }).then(res => res.json()).then(data => {\n        console.log(this.state.shipDetails + '---' + this.state.billDetails);\n        this.props.otherDetails(this.state.billAndShip, this.state.shipDetails, this.state.billDetails, this.state.addressId, this.state.addCountry, data.paymentInstruction[0].piId, data.orderId); //this.props.removeFromCart(data.orderId, removeProduct)\n\n        this.setState({\n          redirectToSummaryPage: true\n        });\n      }, error => {\n        //API not accessable or through error            \n        console.log(\"Error Data>>\" + error);\n      });\n      console.log(`${this.props.getCartDetails.addressId}--${this.props.getCartDetails.orderId}--${this.props.getCartDetails.piId}--${this.props.getCartDetails.addCountry}--${this.props.getCartDetails.shippingMethod}---${this.props.getCartDetails.billingMethod}`);\n    };\n\n    this.state = {\n      products: [],\n      billAndShip: [],\n      header: {\n        'accept': 'application/json',\n        'Content-type': 'application/json',\n        'WCToken': this.props.getWCToken,\n        'WCTrustedToken': this.props.getWCTrustedToken\n      },\n      shippingAddDetails: [],\n      billingAddDetails: [],\n      addressId: '',\n      addCountry: '',\n      redirectToSummaryPage: false,\n      shipDetails: '',\n      billDetails: ''\n    };\n  }\n\n  componentDidMount(props) {\n    this.setState({\n      products: this.props.getProductsInCart\n    });\n    this.billAndShipUserInfo();\n    this.shippingMethod();\n    this.billingMethod();\n  }\n\n  render() {\n    //console.log(`${this.state.addressId}--${this.props.getCartDetails.orderId}--${this.props.getCartDetails.grandTotal}--${this.state.addCountry}`)\n    if (this.state.redirectToSummaryPage) {\n      return React.createElement(Redirect, {\n        to: \"/OrderSummary\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 152\n        },\n        __self: this\n      });\n    }\n\n    return React.createElement(\"div\", {\n      className: \"shoppingCart\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 156\n      },\n      __self: this\n    }, React.createElement(\"h2\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 157\n      },\n      __self: this\n    }, \"Shipping & Billing Method\"), React.createElement(\"div\", {\n      className: \"clearBoth\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 158\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: \"items\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 159\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"shippingAdd\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 160\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"addFields\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 161\n      },\n      __self: this\n    }, React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 162\n      },\n      __self: this\n    }, React.createElement(\"b\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 162\n      },\n      __self: this\n    }, \"Shipping Address:\")), React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 163\n      },\n      __self: this\n    }, this.state.billAndShip.lastName), React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 164\n      },\n      __self: this\n    }, this.state.billAndShip.firstName), React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 165\n      },\n      __self: this\n    }, this.state.billAndShip.country), React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 166\n      },\n      __self: this\n    }, this.state.billAndShip.state), React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 167\n      },\n      __self: this\n    }, this.state.billAndShip.city), React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 168\n      },\n      __self: this\n    }, this.state.billAndShip.addressLine), React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 169\n      },\n      __self: this\n    }, this.state.billAndShip.email1)), React.createElement(\"div\", {\n      className: \"shippAddOptions\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 171\n      },\n      __self: this\n    }, React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 172\n      },\n      __self: this\n    }, React.createElement(\"b\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 172\n      },\n      __self: this\n    }, \"Shipping Method:\")), React.createElement(\"select\", {\n      name: \"shipDetails\",\n      onChange: this.handlerShipValue,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 173\n      },\n      __self: this\n    }, this.state.shippingAddDetails.map(item => React.createElement(\"option\", {\n      value: item.description,\n      key: item.shipModeId,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 175\n      },\n      __self: this\n    }, item.description))))), React.createElement(\"table\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 180\n      },\n      __self: this\n    }, React.createElement(\"thead\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 181\n      },\n      __self: this\n    }, React.createElement(\"tr\", {\n      className: \"headings\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 182\n      },\n      __self: this\n    }, React.createElement(\"td\", {\n      className: \"item\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 183\n      },\n      __self: this\n    }, \"Item\"), React.createElement(\"td\", {\n      className: \"description\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 184\n      },\n      __self: this\n    }), React.createElement(\"td\", {\n      className: \"price\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 185\n      },\n      __self: this\n    }, \"Price\"), React.createElement(\"td\", {\n      className: \"qty\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 186\n      },\n      __self: this\n    }, \"Qty\"), React.createElement(\"td\", {\n      className: \"subtotal\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 187\n      },\n      __self: this\n    }, \"SubTotal\"))), React.createElement(\"tbody\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 190\n      },\n      __self: this\n    }, this.state.products.map((item, index) => React.createElement(\"tr\", {\n      className: \"products\",\n      key: index,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 193\n      },\n      __self: this\n    }, React.createElement(\"td\", {\n      className: \"item\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 194\n      },\n      __self: this\n    }, React.createElement(Link, {\n      to: `/Product/?${item.uniqueID}`,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 195\n      },\n      __self: this\n    }, React.createElement(\"img\", {\n      src: `${this.props.getAppSet.serverBaseURL}${item.thumbnail}`,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 196\n      },\n      __self: this\n    }))), React.createElement(\"td\", {\n      className: \"description\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 199\n      },\n      __self: this\n    }, React.createElement(Link, {\n      to: `/Product/?${item.uniqueID}`,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 200\n      },\n      __self: this\n    }, \"  \", item.longDescription), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 201\n      },\n      __self: this\n    }), React.createElement(\"button\", {\n      className: \"nextBtn sizing\",\n      onClick: this.removeItem.bind(this, item.SKUUniqueID, item.orderItemId, this.props.getOrderId, item.quantity, item.Price),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 202\n      },\n      __self: this\n    }, \"Remove Item\")), React.createElement(\"td\", {\n      className: \"price\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 210\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 211\n      },\n      __self: this\n    }, item.Price)), React.createElement(\"td\", {\n      className: \"qty\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 213\n      },\n      __self: this\n    }, item.quantity), React.createElement(\"td\", {\n      className: \"subtotal\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 225\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 226\n      },\n      __self: this\n    }, (parseFloat(item.Price) * parseFloat(item.quantity)).toFixed(2))))), React.createElement(\"tr\", {\n      className: \"wishList\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 230\n      },\n      __self: this\n    }, React.createElement(\"td\", {\n      colSpan: \"3\",\n      className: \"wishList\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 231\n      },\n      __self: this\n    }), React.createElement(\"td\", {\n      className: \"edit\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 234\n      },\n      __self: this\n    }, \" \"), React.createElement(\"td\", {\n      className: \"delete\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 235\n      },\n      __self: this\n    })))), React.createElement(\"div\", {\n      className: \"shippingAdd\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 242\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"addFields\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 243\n      },\n      __self: this\n    }, React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 244\n      },\n      __self: this\n    }, React.createElement(\"b\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 244\n      },\n      __self: this\n    }, \"Billing Address:\")), React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 245\n      },\n      __self: this\n    }, this.state.billAndShip.lastName), React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 246\n      },\n      __self: this\n    }, this.state.billAndShip.firstName), React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 247\n      },\n      __self: this\n    }, this.state.billAndShip.country), React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 248\n      },\n      __self: this\n    }, this.state.billAndShip.state), React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 249\n      },\n      __self: this\n    }, this.state.billAndShip.city), React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 250\n      },\n      __self: this\n    }, this.state.billAndShip.addressLine), React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 251\n      },\n      __self: this\n    }, this.state.billAndShip.email1)), React.createElement(\"div\", {\n      className: \"shippAddOptions\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 253\n      },\n      __self: this\n    }, React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 254\n      },\n      __self: this\n    }, React.createElement(\"b\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 254\n      },\n      __self: this\n    }, \"Billing Method:\")), React.createElement(\"select\", {\n      name: \"shipDetails\",\n      onChange: this.handlerBillValue,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 255\n      },\n      __self: this\n    }, this.state.billingAddDetails.map(item => React.createElement(\"option\", {\n      value: item.description,\n      key: item.xumet_policyId,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 257\n      },\n      __self: this\n    }, item.description))), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 260\n      },\n      __self: this\n    }), React.createElement(\"b\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 261\n      },\n      __self: this\n    }, \"Amount:\"), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 261\n      },\n      __self: this\n    }), React.createElement(\"input\", {\n      type: \"text\",\n      value: this.props.getCartDetails.grandTotal,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 262\n      },\n      __self: this\n    }))), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 265\n      },\n      __self: this\n    }), React.createElement(\"button\", {\n      className: \"nextBtn sizing pageBtn\",\n      onClick: this.gotoSummary,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 267\n      },\n      __self: this\n    }, \"Next\")), React.createElement(OrderSummaryPopup, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 269\n      },\n      __self: this\n    }));\n  }\n\n}\n\nconst mapStateToProps = state => {\n  return {\n    getResourceName: state.userToken.resourceName,\n    getWCToken: state.userToken.WCToken,\n    getWCTrustedToken: state.userToken.WCTrustedToken,\n    getProductsInCart: state.cart.products,\n    getCartDetails: state.cart,\n    getSubTotal: state.cart.subTotal,\n    getAppSet: state.getAppSet\n  };\n};\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    removeFromCart: (orderId, removeProduct) => {\n      dispatch({\n        type: 'REMOVE_FROM_CART',\n        payloads: {\n          orderId,\n          removeProduct\n        }\n      });\n    },\n    otherDetails: (billAndShipAddDetails, shippingAddDetails, billingAddDetails, addressId, addCountry, piId, orderId) => {\n      dispatch({\n        type: 'OTHER_CART_DETAILS',\n        payloads: {\n          billAndShipAddDetails,\n          shippingAddDetails,\n          billingAddDetails,\n          addressId,\n          addCountry,\n          piId,\n          orderId\n        }\n      });\n    }\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Checkout);","map":{"version":3,"sources":["F:/_HCLCommece/src/Checkout.js"],"names":["React","Component","BrowserRouter","Router","Route","Link","Redirect","connect","OrderSummaryPopup","OrderComplete","Checkout","constructor","props","billAndShipUserInfo","fetch","getAppSet","API","method","headers","state","header","then","res","json","console","log","setState","billAndShip","addressId","addCountry","country","catch","e","shippingMethod","shippingMethods","shippingAddDetails","orderItem","usableShippingMode","billingMethod","billingMethods","billingAddDetails","usablePaymentInformation","removeItem","SKUUniqueID","orderItemId","orderId","quantity","Price","removeProduct","payloads","deleteFromCart","getWCToken","getWCTrustedToken","body","JSON","stringify","data","removeFromCart","products","getProductsInCart","error","handlerShipValue","event","shipDetails","target","value","handlerBillValue","billDetails","gotoSummary","getCartDetails","grandTotal","paymentInstructions","otherDetails","paymentInstruction","piId","redirectToSummaryPage","componentDidMount","render","lastName","firstName","city","addressLine","email1","map","item","description","shipModeId","index","uniqueID","serverBaseURL","thumbnail","longDescription","bind","getOrderId","parseFloat","toFixed","xumet_policyId","mapStateToProps","getResourceName","userToken","resourceName","WCToken","WCTrustedToken","cart","getSubTotal","subTotal","mapDispatchToProps","dispatch","type","billAndShipAddDetails"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport './Checkout.css'; \r\nimport {BrowserRouter as Router, Route, Link, Redirect} from 'react-router-dom';\r\nimport {connect} from 'react-redux'\r\nimport OrderSummaryPopup from \"./component/OrderSummaryPopup\";\r\nimport OrderComplete from './component/OrderComplete'\r\nclass Checkout extends Component{\r\n    constructor(props){\r\n        super(props);\r\n        this.state = {\r\n            products: [],\r\n            billAndShip: [],\r\n            header: \r\n            {\r\n                'accept': 'application/json',\r\n                'Content-type': 'application/json',\r\n                'WCToken':  this.props.getWCToken,\r\n                'WCTrustedToken': this.props.getWCTrustedToken\r\n            },\r\n            shippingAddDetails: [],\r\n            billingAddDetails: [],\r\n            addressId: '',\r\n            addCountry: '',\r\n            redirectToSummaryPage: false,\r\n            shipDetails: '',\r\n            billDetails:'',\r\n        }\r\n    }\r\n    componentDidMount(props){\r\n        this.setState({products: this.props.getProductsInCart})\r\n        this.billAndShipUserInfo()\r\n        this.shippingMethod()\r\n        this.billingMethod()\r\n    }\r\n    billAndShipUserInfo = () => {      \r\n        fetch(this.props.getAppSet.API.billAndShipUserInfo,{ // 'https://192.168.17.91:5443/wcs/resources/store/1/person/@self',\r\n             method: 'GET',\r\n             headers: this.state.header \r\n         })\r\n         .then(res => res.json())\r\n         .then(json => {\r\n             console.log(json)\r\n             this.setState({billAndShip: json, addressId:json.addressId, addCountry:json.country})\r\n         }).catch(e => console.log(e));\r\n     }\r\n     shippingMethod = () => {      \r\n        fetch(this.props.getAppSet.API.shippingMethods,{//'https://192.168.17.91:5443/wcs/resources/store/1/cart/@self/usable_shipping_info',\r\n             method: 'GET',\r\n             headers: this.state.header \r\n         })\r\n         .then(res => res.json())\r\n         .then(json => {\r\n             console.log(json)\r\n             this.setState({shippingAddDetails: json.orderItem[0].usableShippingMode})\r\n             console.log(json.orderItem[0].usableShippingMode)\r\n         }).catch(e => console.log(e));\r\n     }\r\n     billingMethod = () => {      \r\n        fetch(this.props.getAppSet.API.billingMethods,{//'https://192.168.17.91:5443/wcs/resources/store/1/cart/@self/usable_payment_info',\r\n             method: 'GET',\r\n             headers: this.state.header \r\n         })\r\n         .then(res => res.json())\r\n         .then(json => {\r\n             console.log(json)\r\n             this.setState({billingAddDetails: json.usablePaymentInformation})\r\n             console.log(this.state.billingAddDetails)\r\n         }).catch(e => console.log(e));\r\n     }\r\n     removeItem = (SKUUniqueID, orderItemId, orderId, quantity, Price) => {\r\n        //console.log(`${SKUUniqueID}--- ${orderItemId} ---- ${orderId}`)\r\n        let removeProduct = {SKUUniqueID:SKUUniqueID, orderItemId:orderItemId, quantity: quantity, Price: Price}\r\n        const payloads = {\r\n            orderId: orderId,\r\n            \"orderItemId\": orderItemId,//\"12326\",\r\n            \"catEntryId\": SKUUniqueID //\"1\"\r\n            //\"x_calculateOrder\": \"0\",\r\n            //\"x_inventoryValidation\": \"true\", \r\n        }  \r\n        fetch(this.props.getAppSet.API.deleteFromCart,{\r\n            method: 'PUT',\r\n            headers: {\r\n                //'accept': 'application/json',\r\n                'Content-type': 'application/json',\r\n                'WCToken':  this.props.getWCToken,\r\n                'WCTrustedToken': this.props.getWCTrustedToken\r\n\r\n            },\r\n            body: JSON.stringify(payloads)\r\n        })\r\n        .then(res=>res.json())\r\n        .then((data)=>{\r\n            // console.log(data)\r\n             this.props.removeFromCart(data.orderId, removeProduct)\r\n             this.setState({products: this.props.getProductsInCart})\r\n        },\r\n        (error) => {//API not accessable or through error            \r\n           \r\n            console.log( \"Error Data>>\"+error);\r\n        });\r\n    }\r\n    handlerShipValue = (event) =>{\r\n        this.setState({ shipDetails : event.target.value});  \r\n        \r\n        console.log(event.target.value)\r\n    }\r\n    handlerBillValue = (event) =>{\r\n        this.setState({ billDetails : event.target.value}); \r\n        console.log(event.target.value) \r\n    }\r\n    gotoSummary = () => {//paymentInstructions\r\n        const payloads = {\r\n            \"billing_address_id\": this.state.addressId,\r\n            \"payMethodId\": \"COD\",\r\n            \"orderId\": this.props.getCartDetails.orderId,\r\n            \"piAmount\": this.props.getCartDetails.grandTotal,\r\n            \"billto_address1\":this.state.addressId,\r\n            \"billto_country\": this.state.addCountry \r\n            //\"x_calculateOrder\": \"0\",\r\n            //\"x_inventoryValidation\": \"true\", \r\n        }  \r\n        fetch(this.props.getAppSet.API.paymentInstructions,{\r\n            method: 'POST',\r\n            headers: {\r\n                //'accept': 'application/json',\r\n                'Content-type': 'application/json',\r\n                'WCToken':  this.props.getWCToken,\r\n                'WCTrustedToken': this.props.getWCTrustedToken\r\n\r\n            },\r\n            body: JSON.stringify(payloads)\r\n        })\r\n        .then(res=>res.json())\r\n        .then((data)=>{\r\n            console.log(this.state.shipDetails+'---'+this.state.billDetails)\r\n            this.props.otherDetails(this.state.billAndShip, this.state.shipDetails, this.state.billDetails, this.state.addressId, this.state.addCountry, data.paymentInstruction[0].piId, data.orderId)\r\n            \r\n            //this.props.removeFromCart(data.orderId, removeProduct)\r\n             this.setState({redirectToSummaryPage: true})\r\n        },\r\n        (error) => {//API not accessable or through error            \r\n           \r\n            console.log( \"Error Data>>\"+error);\r\n        });\r\n        \r\n        console.log(`${this.props.getCartDetails.addressId}--${this.props.getCartDetails.orderId}--${this.props.getCartDetails.piId}--${this.props.getCartDetails.addCountry}--${this.props.getCartDetails.shippingMethod}---${this.props.getCartDetails.billingMethod}`)\r\n        \r\n    }\r\n    render(){\r\n        //console.log(`${this.state.addressId}--${this.props.getCartDetails.orderId}--${this.props.getCartDetails.grandTotal}--${this.state.addCountry}`)\r\n        if(this.state.redirectToSummaryPage){\r\n           return <Redirect to=\"/OrderSummary\"/>\r\n        }\r\n        return(\r\n            \r\n            <div className=\"shoppingCart\">\r\n                <h2>Shipping & Billing Method</h2>\r\n                <div className=\"clearBoth\"></div>\r\n                <div className=\"items\">\r\n                    <div className=\"shippingAdd\">\r\n                        <div className=\"addFields\">\r\n                            <p><b>Shipping Address:</b></p>\r\n                            <p>{this.state.billAndShip.lastName}</p>\r\n                            <p>{this.state.billAndShip.firstName}</p>\r\n                            <p>{this.state.billAndShip.country}</p>\r\n                            <p>{this.state.billAndShip.state}</p>\r\n                            <p>{this.state.billAndShip.city}</p>\r\n                            <p>{this.state.billAndShip.addressLine}</p>\r\n                            <p>{this.state.billAndShip.email1}</p>\r\n                        </div>\r\n                        <div className=\"shippAddOptions\">\r\n                            <p><b>Shipping Method:</b></p>\r\n                            <select name = \"shipDetails\" onChange={this.handlerShipValue}>\r\n                                {this.state.shippingAddDetails.map(item => (\r\n                                <option value={item.description} key={item.shipModeId}>{item.description}</option>    \r\n                                ))}\r\n                            </select>\r\n                        </div>\r\n                    </div>\r\n                    <table>\r\n                        <thead>\r\n                        <tr className=\"headings\">\r\n                            <td className=\"item\">Item</td>\r\n                            <td className=\"description\"></td>\r\n                            <td className=\"price\">Price</td>\r\n                            <td className=\"qty\">Qty</td>\r\n                            <td className=\"subtotal\">SubTotal</td>\r\n                        </tr>\r\n                        </thead>\r\n                        <tbody>\r\n                            \r\n                        {this.state.products.map( (item, index) => (                        \r\n                        <tr className=\"products\" key={index}>\r\n                            <td className=\"item\">\r\n                            <Link to={`/Product/?${item.uniqueID}`}>\r\n                                <img src={`${this.props.getAppSet.serverBaseURL}${item.thumbnail}`} />\r\n                            </Link>\r\n                            </td>\r\n                            <td className=\"description\">\r\n                                <Link to={`/Product/?${item.uniqueID}`}>  {item.longDescription}</Link>\r\n                                <br/>\r\n                                <button className=\"nextBtn sizing\" onClick={this.removeItem.bind(this, \r\n                                    item.SKUUniqueID, \r\n                                    item.orderItemId, \r\n                                    this.props.getOrderId,\r\n                                    item.quantity,\r\n                                    item.Price\r\n                                    )}>Remove Item</button>                                 \r\n                            </td>\r\n                            <td className=\"price\">\r\n                                <span>{item.Price}</span>\r\n                            </td>\r\n                            <td className=\"qty\">\r\n                            {item.quantity}\r\n                                {/* <input type=\"text\" value={item.quantity} onChange={\r\n                                    (event) => {this.updateQuantity(event,\r\n                                        item.SKUUniqueID, \r\n                                        item.orderItemId, \r\n                                        this.props.getOrderId,\r\n                                        item.quantity,\r\n                                        item.Price  \r\n                                    )}\r\n                                }/> */}\r\n                            </td>\r\n                            <td className=\"subtotal\">\r\n                                <span>{(parseFloat(item.Price)*parseFloat(item.quantity)).toFixed(2)}</span>\r\n                            </td>\r\n                        </tr>\r\n))}\r\n                        <tr className=\"wishList\">\r\n                            <td colSpan=\"3\" className=\"wishList\">\r\n                                {/* <a href=\"#\">Move to wishList</a> */}\r\n                            </td>\r\n                            <td className=\"edit\"> </td>\r\n                            <td className=\"delete\">\r\n                                \r\n                            </td>\r\n                        </tr>\r\n                        </tbody>\r\n                    </table>\r\n\r\n                    <div className=\"shippingAdd\">\r\n                        <div className=\"addFields\">\r\n                            <p><b>Billing Address:</b></p>\r\n                            <p>{this.state.billAndShip.lastName}</p>\r\n                            <p>{this.state.billAndShip.firstName}</p>\r\n                            <p>{this.state.billAndShip.country}</p>\r\n                            <p>{this.state.billAndShip.state}</p>\r\n                            <p>{this.state.billAndShip.city}</p>\r\n                            <p>{this.state.billAndShip.addressLine}</p>\r\n                            <p>{this.state.billAndShip.email1}</p>\r\n                        </div>\r\n                        <div className=\"shippAddOptions\">\r\n                        <p><b>Billing Method:</b></p>\r\n                            <select name = \"shipDetails\" onChange={this.handlerBillValue}>\r\n                                {this.state.billingAddDetails.map(item => (\r\n                                <option value={item.description} key={item.xumet_policyId}>{item.description}</option>    \r\n                                ))}\r\n                            </select>\r\n                            <br/>\r\n                            <b>Amount:</b><br/>\r\n                            <input type=\"text\" value={this.props.getCartDetails.grandTotal}/>\r\n                        </div>\r\n                    </div>\r\n                    <br/>\r\n                        {/* <Link className=\"nextBtn\" to=\"/Checkout/\">Next</Link> <br/> */}\r\n                        <button className=\"nextBtn sizing pageBtn\" onClick={this.gotoSummary}>Next</button>\r\n                </div>\r\n                <OrderSummaryPopup/>\r\n\r\n\r\n            </div>\r\n        )\r\n    }\r\n}\r\nconst mapStateToProps = (state) => {\r\n    return {\r\n        getResourceName : state.userToken.resourceName,\r\n        getWCToken : state.userToken.WCToken,\r\n        getWCTrustedToken: state.userToken.WCTrustedToken,\r\n        getProductsInCart : state.cart.products,\r\n        getCartDetails: state.cart,\r\n        getSubTotal :state.cart.subTotal,\r\n\r\n        getAppSet: state.getAppSet\r\n    }\r\n};\r\nconst mapDispatchToProps = (dispatch) =>{\r\n    return{\r\n        removeFromCart: (orderId, removeProduct) => {\r\n            dispatch({\r\n                type: 'REMOVE_FROM_CART', payloads :{ orderId, removeProduct}\r\n            })\r\n        },\r\n        otherDetails: (billAndShipAddDetails, shippingAddDetails, billingAddDetails, addressId, addCountry, piId, orderId) => {\r\n            dispatch({\r\n                type: 'OTHER_CART_DETAILS', payloads: {billAndShipAddDetails, shippingAddDetails, billingAddDetails, addressId, addCountry, piId, orderId}\r\n            })\r\n        }\r\n   }\r\n}\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Checkout);"]},"metadata":{},"sourceType":"module"}