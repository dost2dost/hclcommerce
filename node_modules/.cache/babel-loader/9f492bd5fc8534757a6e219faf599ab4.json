{"ast":null,"code":"var _jsxFileName = \"C:\\\\HCL_Internal\\\\src\\\\component\\\\SignIn.js\";\nimport React, { Component } from 'react';\nimport './SignIn.css';\nimport { BrowserRouter as Router, Route, Link } from 'react-router-dom';\nimport { connect } from 'react-redux';\n\nclass SignIn extends Component {\n  constructor(props) {\n    super(props);\n\n    this.getChangeHandler = event => {\n      this.setState({\n        userName: event.target.value\n      });\n    };\n\n    this.myHandler = event => {\n      this.setState({\n        [event.target.name]: event.target.value\n      });\n      console.log(this.props.getToken + \"dngle\");\n    };\n\n    this.loginUser = event => {\n      //call this function on login button \n      this.setState({\n        startLoading: true\n      });\n\n      if (this.state.userName == '') {\n        console.log('Username is empty');\n        alert('Type User Name');\n        return false;\n      } else if (this.state.password == '') {\n        alert('Type password');\n        return false;\n      } //event.preventDefault;\n\n\n      const payloads = {\n        logonId: this.state.userName,\n        //\"zarak786@gmail.com\", //zarak786@gmail.com karim.zarak@royalcyber.com\n        logonPassword: this.state.password //\"Revert!23d\"\n\n      };\n      fetch('https://192.168.7.167/wcs/resources/store/11901/loginidentity?responseFormat=json', {\n        method: 'POST',\n        headers: {\n          'accept': 'application/json',\n          'Content-type': 'application/json'\n        },\n        body: JSON.stringify(payloads)\n      }).then(res => res.json()).then(data => {\n        if (data.errors != undefined) {\n          //API results with an error message \n          console.log(data);\n          this.setState({\n            isAuthenticated: false,\n            errorMsg: data.errors[0].errorMessage\n          });\n        } else if (data.WCToken != undefined) {\n          //Successfully Loged In\n          console.log(data);\n          this.setState({\n            isAuthenticated: true,\n            Token: data.WCToken,\n            userName: payloads.logonId,\n            errorMsg: ''\n          }); //below addin data into Redux-Reducer\n\n          this.props.loginUser(this.state.userName, data.braintreeToken, data.WCToken, data.userId, data.WCTrustedToken, data.personalizationID); // this.props.changeToken(data.WCToken);\n        } else {\n          // API results \n          console.log('Else Statement');\n          this.setState({\n            isAuthenticated: false,\n            errorMsg: 'Error while loging'\n          });\n        }\n      }, error => {\n        //API not accessable or through error            \n        this.setState({\n          isAuthenticated: false,\n          errorMsg: 'Either your user name or password is wrong'\n        });\n        console.log(this.state.isAuthenticated + \"Error Data>>\" + error);\n      });\n      this.setState({\n        startLoading: false\n      });\n    };\n\n    this.state = {\n      userName: '',\n      password: '',\n      isAuthenticated: false,\n      Token: '',\n      errorMsg: '',\n      startLoading: false\n    };\n  }\n\n  render() {\n    const logOutUser = event => {\n      // call this function on logOut button\n      fetch('https://192.168.7.167/wcs/resources/store/11901/loginidentity/@self', {\n        method: 'DELETE'\n      });\n      this.setState({\n        isAuthenticated: false,\n        Token: '',\n        userName: '',\n        password: '' // errorMsg: data.errors[0].errorMessage\n\n      });\n      this.props.loginUser('', '', '', '', '', ''); //removing data from Redux-Reducer\n\n      this.setState({\n        startLoading: false\n      });\n    };\n\n    console.log(this.props.getToken);\n    let loading;\n\n    if (this.state.startLoading) {\n      loading = React.createElement(\"div\", {\n        className: \"loader\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 101\n        },\n        __self: this\n      }, React.createElement(\"img\", {\n        src: \"Images/loader.svg\",\n        width: \"100\",\n        height: \"100\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 101\n        },\n        __self: this\n      }));\n    }\n\n    if (!this.props.getToken) {\n      //If the user is failed to login or it comes to this page to login\n      return React.createElement(\"div\", {\n        className: \"signInPage\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 106\n        },\n        __self: this\n      }, React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 108\n        },\n        __self: this\n      }), React.createElement(\"h1\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 109\n        },\n        __self: this\n      }, \"Customer Login \"), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 110\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"costomerRegistration\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 111\n        },\n        __self: this\n      }, React.createElement(\"h2\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 112\n        },\n        __self: this\n      }, \"Registered Customers\"), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 113\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"lableInput\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 114\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"lable\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 115\n        },\n        __self: this\n      }, React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 116\n        },\n        __self: this\n      }, \"Email  \"), React.createElement(\"span\", {\n        className: \"starik\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 116\n        },\n        __self: this\n      }, \"*\")), React.createElement(\"div\", {\n        className: \"getInput\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 118\n        },\n        __self: this\n      }, React.createElement(\"input\", {\n        type: \"text\",\n        id: \"yName\",\n        name: \"userName\",\n        onChange: this.myHandler,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 118\n        },\n        __self: this\n      }))), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 120\n        },\n        __self: this\n      }), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 120\n        },\n        __self: this\n      }), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 120\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"lableInput\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 121\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"lable\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 122\n        },\n        __self: this\n      }, React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 123\n        },\n        __self: this\n      }, \"Password \"), React.createElement(\"span\", {\n        className: \"starik\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 123\n        },\n        __self: this\n      }, \"*\")), React.createElement(\"div\", {\n        className: \"getInput\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 125\n        },\n        __self: this\n      }, React.createElement(\"input\", {\n        type: \"password\",\n        name: \"password\",\n        id: \"yEmail\",\n        onChange: this.myHandler,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 125\n        },\n        __self: this\n      }))), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 127\n        },\n        __self: this\n      }), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 127\n        },\n        __self: this\n      }), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 127\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"nextBtn\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 129\n        },\n        __self: this\n      }, React.createElement(\"a\", {\n        onClick: this.loginUser,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 129\n        },\n        __self: this\n      }, \"Sign In\")), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 130\n        },\n        __self: this\n      }), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 130\n        },\n        __self: this\n      }), React.createElement(\"p\", {\n        className: \"errorMessage\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 131\n        },\n        __self: this\n      }, this.state.errorMsg), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 134\n        },\n        __self: this\n      }), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 134\n        },\n        __self: this\n      }), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 134\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"newCostomer\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 136\n        },\n        __self: this\n      }, React.createElement(\"h2\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 137\n        },\n        __self: this\n      }, \"New Customers\"), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 138\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 139\n        },\n        __self: this\n      }, React.createElement(\"p\", {\n        className: \"signInPara\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 139\n        },\n        __self: this\n      }, \"Creating an account has many benefits: check out faster, keep more than one address, track orders and more.\"), \" \"), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 140\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"nextBtn\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 141\n        },\n        __self: this\n      }, React.createElement(Link, {\n        to: \"/NewAccount\",\n        className: \"nextBtn\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 142\n        },\n        __self: this\n      }, \"Create an Account\"))), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 144\n        },\n        __self: this\n      }), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 144\n        },\n        __self: this\n      }), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 144\n        },\n        __self: this\n      }));\n    } else {\n      //After successfull login\n      //{this.setState.formSubmit= false;}\n      return React.createElement(\"div\", {\n        className: \"signInPage afterSignIn\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 151\n        },\n        __self: this\n      }, React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 152\n        },\n        __self: this\n      }), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 153\n        },\n        __self: this\n      }), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 154\n        },\n        __self: this\n      }), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 155\n        },\n        __self: this\n      }), React.createElement(\"h2\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 156\n        },\n        __self: this\n      }, this.state.userName, \" Logged In  \", React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 156\n        },\n        __self: this\n      }), \" \"), React.createElement(\"div\", {\n        className: \"nextBtn\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 158\n        },\n        __self: this\n      }, React.createElement(\"a\", {\n        onClick: this.logOutUser,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 159\n        },\n        __self: this\n      }, \"Logout\")));\n    }\n  }\n\n}\n\n;\n\nconst mapStateToProps = state => {\n  return {\n    getToken: state.WCToken\n  };\n};\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    loginUser: (email, braintreeToken, tokn, userId, WCTrustedToken, personalizationID) => {\n      dispatch({\n        type: 'LOGED_USER',\n        payloads: {\n          email,\n          braintreeToken,\n          tokn,\n          userId,\n          WCTrustedToken,\n          personalizationID\n        }\n      });\n    } // ,\n    // changeToken: (token) => {\n    //     dispatch({type: 'LOGED_TOKEN', payloads: token})\n    // }\n\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(SignIn);","map":{"version":3,"sources":["C:/HCL_Internal/src/component/SignIn.js"],"names":["React","Component","BrowserRouter","Router","Route","Link","connect","SignIn","constructor","props","getChangeHandler","event","setState","userName","target","value","myHandler","name","console","log","getToken","loginUser","startLoading","state","alert","password","payloads","logonId","logonPassword","fetch","method","headers","body","JSON","stringify","then","res","json","data","errors","undefined","isAuthenticated","errorMsg","errorMessage","WCToken","Token","braintreeToken","userId","WCTrustedToken","personalizationID","error","render","logOutUser","loading","mapStateToProps","mapDispatchToProps","dispatch","email","tokn","type"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport './SignIn.css'\r\nimport {BrowserRouter as Router, Route, Link} from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nclass SignIn extends Component{\r\n    constructor(props){\r\n        super(props);\r\n        this.state = {userName : '', password: '', isAuthenticated: false, Token: '', errorMsg: '', startLoading: false};\r\n    }\r\n    getChangeHandler = (event) =>{\r\n        this.setState({userName: event.target.value});\r\n    } \r\n    myHandler = (event) =>{\r\n        this.setState({ [event.target.name] : event.target.value});\r\n        console.log(this.props.getToken+\"dngle\");\r\n    }\r\n    \r\n     \r\n    loginUser = (event) =>{ //call this function on login button \r\n        this.setState({startLoading: true});\r\n        if(this.state.userName == ''){\r\n            console.log('Username is empty');\r\n            alert('Type User Name');\r\n            return false;\r\n        }\r\n        else if(this.state.password == ''){\r\n            alert('Type password');\r\n            return false;\r\n        }\r\n        //event.preventDefault;\r\n        const payloads = {\r\n            logonId: this.state.userName, //\"zarak786@gmail.com\", //zarak786@gmail.com karim.zarak@royalcyber.com\r\n            logonPassword: this.state.password //\"Revert!23d\"\r\n        }\r\n        fetch('https://192.168.7.167/wcs/resources/store/11901/loginidentity?responseFormat=json',{\r\n            method: 'POST',\r\n            headers: {\r\n                'accept': 'application/json',\r\n                'Content-type': 'application/json'\r\n            },\r\n            body: JSON.stringify(payloads)\r\n        })\r\n        .then(res=>res.json())\r\n        .then((data)=>{\r\n            if(data.errors != undefined){//API results with an error message \r\n                console.log(data);\r\n                this.setState({\r\n                    isAuthenticated: false,\r\n                    errorMsg: data.errors[0].errorMessage\r\n                });\r\n            }\r\n            else if( data.WCToken != undefined){ //Successfully Loged In\r\n                console.log(data);\r\n                this.setState({\r\n                    isAuthenticated: true,\r\n                    Token: data.WCToken,\r\n                    userName: payloads.logonId,\r\n                    errorMsg : ''\r\n                });\r\n                //below addin data into Redux-Reducer\r\n                this.props.loginUser(this.state.userName, data.braintreeToken, data.WCToken, data.userId,  data.WCTrustedToken, data.personalizationID);\r\n                // this.props.changeToken(data.WCToken);\r\n            }\r\n            else{ // API results \r\n                console.log('Else Statement');\r\n                this.setState({\r\n                    isAuthenticated: false,\r\n                    errorMsg: 'Error while loging'\r\n                });\r\n            }\r\n        },\r\n        (error) => {//API not accessable or through error            \r\n            this.setState({\r\n                isAuthenticated: false,\r\n                errorMsg: 'Either your user name or password is wrong'\r\n            });\r\n            console.log(this.state.isAuthenticated+\"Error Data>>\"+error);\r\n        }); \r\n        this.setState({startLoading: false});\r\n    }\r\n    \r\n    render(){\r\n        const logOutUser = (event) => {// call this function on logOut button\r\n            fetch('https://192.168.7.167/wcs/resources/store/11901/loginidentity/@self',{\r\n                method: 'DELETE' \r\n            });\r\n            this.setState({\r\n                isAuthenticated: false,\r\n                Token: '',\r\n                userName: '',\r\n                password: ''\r\n               // errorMsg: data.errors[0].errorMessage\r\n            });\r\n            this.props.loginUser('', '', '', '', '', ''); //removing data from Redux-Reducer\r\n            this.setState({startLoading: false});\r\n        }\r\n\r\n        console.log(this.props.getToken);\r\n        let loading;\r\n        if(this.state.startLoading){\r\n            loading = <div className=\"loader\"><img   src=\"Images/loader.svg\" width=\"100\" height=\"100\"/></div>;\r\n        }\r\n        if(  !this.props.getToken ){//If the user is failed to login or it comes to this page to login\r\n            \r\n        return(\r\n            <div className=\"signInPage\">\r\n                {/* {loading}  */}\r\n                <br/> \r\n                <h1>Customer Login </h1>\r\n                <br/> \r\n               <div className=\"costomerRegistration\">\r\n                    <h2>Registered Customers</h2>\r\n                    <br/>\r\n                    <div className=\"lableInput\">\r\n                        <div className=\"lable\">\r\n                            <span>Email  </span><span className=\"starik\">*</span>\r\n                        </div>\r\n                        <div className=\"getInput\"><input type=\"text\" id=\"yName\" name=\"userName\" onChange={this.myHandler} /></div>\r\n                    </div>\r\n                    <br/><br/><br/>\r\n                    <div className=\"lableInput\">\r\n                        <div className=\"lable\">\r\n                            <span>Password </span><span className=\"starik\">*</span>\r\n                        </div>\r\n                        <div className=\"getInput\"><input type=\"password\" name=\"password\" id=\"yEmail\" onChange={this.myHandler} /></div>\r\n                    </div>\r\n                    <br/><br/><br/>\r\n                   \r\n                    <div className=\"nextBtn\"><a onClick={this.loginUser} >Sign In</a></div>\r\n                    <br/><br/>   \r\n                    <p className=\"errorMessage\">\r\n                        {this.state.errorMsg}\r\n                    </p>\r\n                    <br/><br/><br/>\r\n               </div>\r\n               <div className=\"newCostomer\">\r\n               <h2>New Customers</h2>\r\n               <br/>\r\n                    <div><p className=\"signInPara\">Creating an account has many benefits: check out faster, keep more than one address, track orders and more.</p> </div> \r\n                    <br/> \r\n                    <div className=\"nextBtn\">\r\n                        <Link to=\"/NewAccount\" className=\"nextBtn\">Create an Account</Link></div>\r\n               </div>\r\n               <br/><br/><br/>\r\n            </div>\r\n        )\r\n        }\r\n        else{ //After successfull login\r\n            //{this.setState.formSubmit= false;}\r\n            return(\r\n                <div className=\"signInPage afterSignIn\"> \r\n                <br/>\r\n                <br/>\r\n                    <br/>\r\n                    <br/>\r\n                <h2  >{this.state.userName} Logged In  <br/> </h2> \r\n                {/* <p><span>{this.state.Token}</span></p> */}\r\n                <div className=\"nextBtn\">\r\n                    <a onClick={this.logOutUser} >Logout</a>\r\n                </div>\r\n\r\n                \r\n                </div>\r\n            )\r\n        }\r\n    }\r\n};\r\nconst mapStateToProps = (state) => {\r\n    return {\r\n      getToken: state.WCToken\r\n    }\r\n  }\r\nconst mapDispatchToProps = (dispatch) =>{\r\n     return{\r\n        loginUser: (email, braintreeToken, tokn, userId, WCTrustedToken, personalizationID ) => {\r\n            dispatch({\r\n                    type: 'LOGED_USER', payloads: {email, braintreeToken,  tokn, userId, WCTrustedToken, personalizationID}\r\n                })\r\n        }\r\n        // ,\r\n        // changeToken: (token) => {\r\n        //     dispatch({type: 'LOGED_TOKEN', payloads: token})\r\n        // }\r\n    }\r\n}\r\nexport default connect(mapStateToProps, mapDispatchToProps)(SignIn);\r\n"]},"metadata":{},"sourceType":"module"}