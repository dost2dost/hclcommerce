{"ast":null,"code":"/**\n * @license\n * webvr-polyfill\n * Copyright (c) 2015-2017 Google\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * @license\n * cardboard-vr-display\n * Copyright (c) 2015-2017 Google\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * @license\n * webvr-polyfill-dpdb \n * Copyright (c) 2017 Google\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * @license\n * wglu-preserve-state\n * Copyright (c) 2016, Brandon Jones.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n * THE SOFTWARE.\n */\n\n/**\n * @license\n * nosleep.js\n * Copyright (c) 2017, Rich Tibbett\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n * THE SOFTWARE.\n */\n(function (global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() : typeof define === 'function' && define.amd ? define(factory) : global.WebVRPolyfill = factory();\n})(this, function () {\n  'use strict';\n\n  var commonjsGlobal = typeof window !== 'undefined' ? window : typeof global !== 'undefined' ? global : typeof self !== 'undefined' ? self : {};\n\n  function unwrapExports(x) {\n    return x && x.__esModule && Object.prototype.hasOwnProperty.call(x, 'default') ? x['default'] : x;\n  }\n\n  function createCommonjsModule(fn, module) {\n    return module = {\n      exports: {}\n    }, fn(module, module.exports), module.exports;\n  }\n\n  var isMobile = function isMobile() {\n    return /Android/i.test(navigator.userAgent) || /iPhone|iPad|iPod/i.test(navigator.userAgent);\n  };\n\n  var copyArray = function copyArray(source, dest) {\n    for (var i = 0, n = source.length; i < n; i++) {\n      dest[i] = source[i];\n    }\n  };\n\n  var extend = function extend(dest, src) {\n    for (var key in src) {\n      if (src.hasOwnProperty(key)) {\n        dest[key] = src[key];\n      }\n    }\n\n    return dest;\n  };\n\n  var cardboardVrDisplay = createCommonjsModule(function (module, exports) {\n    /**\n     * @license\n     * cardboard-vr-display\n     * Copyright (c) 2015-2017 Google\n     * Licensed under the Apache License, Version 2.0 (the \"License\");\n     * you may not use this file except in compliance with the License.\n     * You may obtain a copy of the License at\n     *\n     * http://www.apache.org/licenses/LICENSE-2.0\n     *\n     * Unless required by applicable law or agreed to in writing, software\n     * distributed under the License is distributed on an \"AS IS\" BASIS,\n     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n     * See the License for the specific language governing permissions and\n     * limitations under the License.\n     */\n\n    /**\n     * @license\n     * gl-preserve-state\n     * Copyright (c) 2016, Brandon Jones.\n     *\n     * Permission is hereby granted, free of charge, to any person obtaining a copy\n     * of this software and associated documentation files (the \"Software\"), to deal\n     * in the Software without restriction, including without limitation the rights\n     * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n     * copies of the Software, and to permit persons to whom the Software is\n     * furnished to do so, subject to the following conditions:\n     *\n     * The above copyright notice and this permission notice shall be included in\n     * all copies or substantial portions of the Software.\n     *\n     * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n     * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n     * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n     * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n     * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n     * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n     * THE SOFTWARE.\n     */\n\n    /**\n     * @license\n     * webvr-polyfill-dpdb\n     * Copyright (c) 2015-2017 Google\n     * Licensed under the Apache License, Version 2.0 (the \"License\");\n     * you may not use this file except in compliance with the License.\n     * You may obtain a copy of the License at\n     *\n     * http://www.apache.org/licenses/LICENSE-2.0\n     *\n     * Unless required by applicable law or agreed to in writing, software\n     * distributed under the License is distributed on an \"AS IS\" BASIS,\n     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n     * See the License for the specific language governing permissions and\n     * limitations under the License.\n     */\n\n    /**\n     * @license\n     * nosleep.js\n     * Copyright (c) 2017, Rich Tibbett\n     *\n     * Permission is hereby granted, free of charge, to any person obtaining a copy\n     * of this software and associated documentation files (the \"Software\"), to deal\n     * in the Software without restriction, including without limitation the rights\n     * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n     * copies of the Software, and to permit persons to whom the Software is\n     * furnished to do so, subject to the following conditions:\n     *\n     * The above copyright notice and this permission notice shall be included in\n     * all copies or substantial portions of the Software.\n     *\n     * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n     * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n     * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n     * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n     * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n     * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n     * THE SOFTWARE.\n     */\n    (function (global, factory) {\n      module.exports = factory();\n    })(commonjsGlobal, function () {\n      var classCallCheck = function (instance, Constructor) {\n        if (!(instance instanceof Constructor)) {\n          throw new TypeError(\"Cannot call a class as a function\");\n        }\n      };\n\n      var createClass = function () {\n        function defineProperties(target, props) {\n          for (var i = 0; i < props.length; i++) {\n            var descriptor = props[i];\n            descriptor.enumerable = descriptor.enumerable || false;\n            descriptor.configurable = true;\n            if (\"value\" in descriptor) descriptor.writable = true;\n            Object.defineProperty(target, descriptor.key, descriptor);\n          }\n        }\n\n        return function (Constructor, protoProps, staticProps) {\n          if (protoProps) defineProperties(Constructor.prototype, protoProps);\n          if (staticProps) defineProperties(Constructor, staticProps);\n          return Constructor;\n        };\n      }();\n\n      var slicedToArray = function () {\n        function sliceIterator(arr, i) {\n          var _arr = [];\n          var _n = true;\n          var _d = false;\n          var _e = undefined;\n\n          try {\n            for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n              _arr.push(_s.value);\n\n              if (i && _arr.length === i) break;\n            }\n          } catch (err) {\n            _d = true;\n            _e = err;\n          } finally {\n            try {\n              if (!_n && _i[\"return\"]) _i[\"return\"]();\n            } finally {\n              if (_d) throw _e;\n            }\n          }\n\n          return _arr;\n        }\n\n        return function (arr, i) {\n          if (Array.isArray(arr)) {\n            return arr;\n          } else if (Symbol.iterator in Object(arr)) {\n            return sliceIterator(arr, i);\n          } else {\n            throw new TypeError(\"Invalid attempt to destructure non-iterable instance\");\n          }\n        };\n      }();\n\n      var MIN_TIMESTEP = 0.001;\n      var MAX_TIMESTEP = 1;\n\n      var dataUri = function dataUri(mimeType, svg) {\n        return 'data:' + mimeType + ',' + encodeURIComponent(svg);\n      };\n\n      var lerp = function lerp(a, b, t) {\n        return a + (b - a) * t;\n      };\n\n      var isIOS = function () {\n        var isIOS = /iPad|iPhone|iPod/.test(navigator.platform);\n        return function () {\n          return isIOS;\n        };\n      }();\n\n      var isWebViewAndroid = function () {\n        var isWebViewAndroid = navigator.userAgent.indexOf('Version') !== -1 && navigator.userAgent.indexOf('Android') !== -1 && navigator.userAgent.indexOf('Chrome') !== -1;\n        return function () {\n          return isWebViewAndroid;\n        };\n      }();\n\n      var isSafari = function () {\n        var isSafari = /^((?!chrome|android).)*safari/i.test(navigator.userAgent);\n        return function () {\n          return isSafari;\n        };\n      }();\n\n      var isFirefoxAndroid = function () {\n        var isFirefoxAndroid = navigator.userAgent.indexOf('Firefox') !== -1 && navigator.userAgent.indexOf('Android') !== -1;\n        return function () {\n          return isFirefoxAndroid;\n        };\n      }();\n\n      var getChromeVersion = function () {\n        var match = navigator.userAgent.match(/.*Chrome\\/([0-9]+)/);\n        var value = match ? parseInt(match[1], 10) : null;\n        return function () {\n          return value;\n        };\n      }();\n\n      var isChromeWithoutDeviceMotion = function () {\n        var value = false;\n\n        if (getChromeVersion() === 65) {\n          var match = navigator.userAgent.match(/.*Chrome\\/([0-9\\.]*)/);\n\n          if (match) {\n            var _match$1$split = match[1].split('.'),\n                _match$1$split2 = slicedToArray(_match$1$split, 4),\n                major = _match$1$split2[0],\n                minor = _match$1$split2[1],\n                branch = _match$1$split2[2],\n                build = _match$1$split2[3];\n\n            value = parseInt(branch, 10) === 3325 && parseInt(build, 10) < 148;\n          }\n        }\n\n        return function () {\n          return value;\n        };\n      }();\n\n      var isR7 = function () {\n        var isR7 = navigator.userAgent.indexOf('R7 Build') !== -1;\n        return function () {\n          return isR7;\n        };\n      }();\n\n      var isLandscapeMode = function isLandscapeMode() {\n        var rtn = window.orientation == 90 || window.orientation == -90;\n        return isR7() ? !rtn : rtn;\n      };\n\n      var isTimestampDeltaValid = function isTimestampDeltaValid(timestampDeltaS) {\n        if (isNaN(timestampDeltaS)) {\n          return false;\n        }\n\n        if (timestampDeltaS <= MIN_TIMESTEP) {\n          return false;\n        }\n\n        if (timestampDeltaS > MAX_TIMESTEP) {\n          return false;\n        }\n\n        return true;\n      };\n\n      var getScreenWidth = function getScreenWidth() {\n        return Math.max(window.screen.width, window.screen.height) * window.devicePixelRatio;\n      };\n\n      var getScreenHeight = function getScreenHeight() {\n        return Math.min(window.screen.width, window.screen.height) * window.devicePixelRatio;\n      };\n\n      var requestFullscreen = function requestFullscreen(element) {\n        if (isWebViewAndroid()) {\n          return false;\n        }\n\n        if (element.requestFullscreen) {\n          element.requestFullscreen();\n        } else if (element.webkitRequestFullscreen) {\n          element.webkitRequestFullscreen();\n        } else if (element.mozRequestFullScreen) {\n          element.mozRequestFullScreen();\n        } else if (element.msRequestFullscreen) {\n          element.msRequestFullscreen();\n        } else {\n          return false;\n        }\n\n        return true;\n      };\n\n      var exitFullscreen = function exitFullscreen() {\n        if (document.exitFullscreen) {\n          document.exitFullscreen();\n        } else if (document.webkitExitFullscreen) {\n          document.webkitExitFullscreen();\n        } else if (document.mozCancelFullScreen) {\n          document.mozCancelFullScreen();\n        } else if (document.msExitFullscreen) {\n          document.msExitFullscreen();\n        } else {\n          return false;\n        }\n\n        return true;\n      };\n\n      var getFullscreenElement = function getFullscreenElement() {\n        return document.fullscreenElement || document.webkitFullscreenElement || document.mozFullScreenElement || document.msFullscreenElement;\n      };\n\n      var linkProgram = function linkProgram(gl, vertexSource, fragmentSource, attribLocationMap) {\n        var vertexShader = gl.createShader(gl.VERTEX_SHADER);\n        gl.shaderSource(vertexShader, vertexSource);\n        gl.compileShader(vertexShader);\n        var fragmentShader = gl.createShader(gl.FRAGMENT_SHADER);\n        gl.shaderSource(fragmentShader, fragmentSource);\n        gl.compileShader(fragmentShader);\n        var program = gl.createProgram();\n        gl.attachShader(program, vertexShader);\n        gl.attachShader(program, fragmentShader);\n\n        for (var attribName in attribLocationMap) {\n          gl.bindAttribLocation(program, attribLocationMap[attribName], attribName);\n        }\n\n        gl.linkProgram(program);\n        gl.deleteShader(vertexShader);\n        gl.deleteShader(fragmentShader);\n        return program;\n      };\n\n      var getProgramUniforms = function getProgramUniforms(gl, program) {\n        var uniforms = {};\n        var uniformCount = gl.getProgramParameter(program, gl.ACTIVE_UNIFORMS);\n        var uniformName = '';\n\n        for (var i = 0; i < uniformCount; i++) {\n          var uniformInfo = gl.getActiveUniform(program, i);\n          uniformName = uniformInfo.name.replace('[0]', '');\n          uniforms[uniformName] = gl.getUniformLocation(program, uniformName);\n        }\n\n        return uniforms;\n      };\n\n      var orthoMatrix = function orthoMatrix(out, left, right, bottom, top, near, far) {\n        var lr = 1 / (left - right),\n            bt = 1 / (bottom - top),\n            nf = 1 / (near - far);\n        out[0] = -2 * lr;\n        out[1] = 0;\n        out[2] = 0;\n        out[3] = 0;\n        out[4] = 0;\n        out[5] = -2 * bt;\n        out[6] = 0;\n        out[7] = 0;\n        out[8] = 0;\n        out[9] = 0;\n        out[10] = 2 * nf;\n        out[11] = 0;\n        out[12] = (left + right) * lr;\n        out[13] = (top + bottom) * bt;\n        out[14] = (far + near) * nf;\n        out[15] = 1;\n        return out;\n      };\n\n      var isMobile = function isMobile() {\n        var check = false;\n\n        (function (a) {\n          if (/(android|bb\\d+|meego).+mobile|avantgo|bada\\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(a) || /1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\\-(n|u)|c55\\/|capi|ccwa|cdm\\-|cell|chtm|cldc|cmd\\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\\-s|devi|dica|dmob|do(c|p)o|ds(12|\\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\\-|_)|g1 u|g560|gene|gf\\-5|g\\-mo|go(\\.w|od)|gr(ad|un)|haie|hcit|hd\\-(m|p|t)|hei\\-|hi(pt|ta)|hp( i|ip)|hs\\-c|ht(c(\\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\\-(20|go|ma)|i230|iac( |\\-|\\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\\/)|klon|kpt |kwc\\-|kyo(c|k)|le(no|xi)|lg( g|\\/(k|l|u)|50|54|\\-[a-w])|libw|lynx|m1\\-w|m3ga|m50\\/|ma(te|ui|xo)|mc(01|21|ca)|m\\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\\-2|po(ck|rt|se)|prox|psio|pt\\-g|qa\\-a|qc(07|12|21|32|60|\\-[2-7]|i\\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\\-|oo|p\\-)|sdk\\/|se(c(\\-|0|1)|47|mc|nd|ri)|sgh\\-|shar|sie(\\-|m)|sk\\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\\-|v\\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\\-|tdg\\-|tel(i|m)|tim\\-|t\\-mo|to(pl|sh)|ts(70|m\\-|m3|m5)|tx\\-9|up(\\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\\-|your|zeto|zte\\-/i.test(a.substr(0, 4))) check = true;\n        })(navigator.userAgent || navigator.vendor || window.opera);\n\n        return check;\n      };\n\n      var extend = function extend(dest, src) {\n        for (var key in src) {\n          if (src.hasOwnProperty(key)) {\n            dest[key] = src[key];\n          }\n        }\n\n        return dest;\n      };\n\n      var safariCssSizeWorkaround = function safariCssSizeWorkaround(canvas) {\n        if (isIOS()) {\n          var width = canvas.style.width;\n          var height = canvas.style.height;\n          canvas.style.width = parseInt(width) + 1 + 'px';\n          canvas.style.height = parseInt(height) + 'px';\n          setTimeout(function () {\n            canvas.style.width = width;\n            canvas.style.height = height;\n          }, 100);\n        }\n\n        window.canvas = canvas;\n      };\n\n      var frameDataFromPose = function () {\n        var piOver180 = Math.PI / 180.0;\n        var rad45 = Math.PI * 0.25;\n\n        function mat4_perspectiveFromFieldOfView(out, fov, near, far) {\n          var upTan = Math.tan(fov ? fov.upDegrees * piOver180 : rad45),\n              downTan = Math.tan(fov ? fov.downDegrees * piOver180 : rad45),\n              leftTan = Math.tan(fov ? fov.leftDegrees * piOver180 : rad45),\n              rightTan = Math.tan(fov ? fov.rightDegrees * piOver180 : rad45),\n              xScale = 2.0 / (leftTan + rightTan),\n              yScale = 2.0 / (upTan + downTan);\n          out[0] = xScale;\n          out[1] = 0.0;\n          out[2] = 0.0;\n          out[3] = 0.0;\n          out[4] = 0.0;\n          out[5] = yScale;\n          out[6] = 0.0;\n          out[7] = 0.0;\n          out[8] = -((leftTan - rightTan) * xScale * 0.5);\n          out[9] = (upTan - downTan) * yScale * 0.5;\n          out[10] = far / (near - far);\n          out[11] = -1.0;\n          out[12] = 0.0;\n          out[13] = 0.0;\n          out[14] = far * near / (near - far);\n          out[15] = 0.0;\n          return out;\n        }\n\n        function mat4_fromRotationTranslation(out, q, v) {\n          var x = q[0],\n              y = q[1],\n              z = q[2],\n              w = q[3],\n              x2 = x + x,\n              y2 = y + y,\n              z2 = z + z,\n              xx = x * x2,\n              xy = x * y2,\n              xz = x * z2,\n              yy = y * y2,\n              yz = y * z2,\n              zz = z * z2,\n              wx = w * x2,\n              wy = w * y2,\n              wz = w * z2;\n          out[0] = 1 - (yy + zz);\n          out[1] = xy + wz;\n          out[2] = xz - wy;\n          out[3] = 0;\n          out[4] = xy - wz;\n          out[5] = 1 - (xx + zz);\n          out[6] = yz + wx;\n          out[7] = 0;\n          out[8] = xz + wy;\n          out[9] = yz - wx;\n          out[10] = 1 - (xx + yy);\n          out[11] = 0;\n          out[12] = v[0];\n          out[13] = v[1];\n          out[14] = v[2];\n          out[15] = 1;\n          return out;\n        }\n\n        function mat4_translate(out, a, v) {\n          var x = v[0],\n              y = v[1],\n              z = v[2],\n              a00,\n              a01,\n              a02,\n              a03,\n              a10,\n              a11,\n              a12,\n              a13,\n              a20,\n              a21,\n              a22,\n              a23;\n\n          if (a === out) {\n            out[12] = a[0] * x + a[4] * y + a[8] * z + a[12];\n            out[13] = a[1] * x + a[5] * y + a[9] * z + a[13];\n            out[14] = a[2] * x + a[6] * y + a[10] * z + a[14];\n            out[15] = a[3] * x + a[7] * y + a[11] * z + a[15];\n          } else {\n            a00 = a[0];\n            a01 = a[1];\n            a02 = a[2];\n            a03 = a[3];\n            a10 = a[4];\n            a11 = a[5];\n            a12 = a[6];\n            a13 = a[7];\n            a20 = a[8];\n            a21 = a[9];\n            a22 = a[10];\n            a23 = a[11];\n            out[0] = a00;\n            out[1] = a01;\n            out[2] = a02;\n            out[3] = a03;\n            out[4] = a10;\n            out[5] = a11;\n            out[6] = a12;\n            out[7] = a13;\n            out[8] = a20;\n            out[9] = a21;\n            out[10] = a22;\n            out[11] = a23;\n            out[12] = a00 * x + a10 * y + a20 * z + a[12];\n            out[13] = a01 * x + a11 * y + a21 * z + a[13];\n            out[14] = a02 * x + a12 * y + a22 * z + a[14];\n            out[15] = a03 * x + a13 * y + a23 * z + a[15];\n          }\n\n          return out;\n        }\n\n        function mat4_invert(out, a) {\n          var a00 = a[0],\n              a01 = a[1],\n              a02 = a[2],\n              a03 = a[3],\n              a10 = a[4],\n              a11 = a[5],\n              a12 = a[6],\n              a13 = a[7],\n              a20 = a[8],\n              a21 = a[9],\n              a22 = a[10],\n              a23 = a[11],\n              a30 = a[12],\n              a31 = a[13],\n              a32 = a[14],\n              a33 = a[15],\n              b00 = a00 * a11 - a01 * a10,\n              b01 = a00 * a12 - a02 * a10,\n              b02 = a00 * a13 - a03 * a10,\n              b03 = a01 * a12 - a02 * a11,\n              b04 = a01 * a13 - a03 * a11,\n              b05 = a02 * a13 - a03 * a12,\n              b06 = a20 * a31 - a21 * a30,\n              b07 = a20 * a32 - a22 * a30,\n              b08 = a20 * a33 - a23 * a30,\n              b09 = a21 * a32 - a22 * a31,\n              b10 = a21 * a33 - a23 * a31,\n              b11 = a22 * a33 - a23 * a32,\n              det = b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;\n\n          if (!det) {\n            return null;\n          }\n\n          det = 1.0 / det;\n          out[0] = (a11 * b11 - a12 * b10 + a13 * b09) * det;\n          out[1] = (a02 * b10 - a01 * b11 - a03 * b09) * det;\n          out[2] = (a31 * b05 - a32 * b04 + a33 * b03) * det;\n          out[3] = (a22 * b04 - a21 * b05 - a23 * b03) * det;\n          out[4] = (a12 * b08 - a10 * b11 - a13 * b07) * det;\n          out[5] = (a00 * b11 - a02 * b08 + a03 * b07) * det;\n          out[6] = (a32 * b02 - a30 * b05 - a33 * b01) * det;\n          out[7] = (a20 * b05 - a22 * b02 + a23 * b01) * det;\n          out[8] = (a10 * b10 - a11 * b08 + a13 * b06) * det;\n          out[9] = (a01 * b08 - a00 * b10 - a03 * b06) * det;\n          out[10] = (a30 * b04 - a31 * b02 + a33 * b00) * det;\n          out[11] = (a21 * b02 - a20 * b04 - a23 * b00) * det;\n          out[12] = (a11 * b07 - a10 * b09 - a12 * b06) * det;\n          out[13] = (a00 * b09 - a01 * b07 + a02 * b06) * det;\n          out[14] = (a31 * b01 - a30 * b03 - a32 * b00) * det;\n          out[15] = (a20 * b03 - a21 * b01 + a22 * b00) * det;\n          return out;\n        }\n\n        var defaultOrientation = new Float32Array([0, 0, 0, 1]);\n        var defaultPosition = new Float32Array([0, 0, 0]);\n\n        function updateEyeMatrices(projection, view, pose, fov, offset, vrDisplay) {\n          mat4_perspectiveFromFieldOfView(projection, fov || null, vrDisplay.depthNear, vrDisplay.depthFar);\n          var orientation = pose.orientation || defaultOrientation;\n          var position = pose.position || defaultPosition;\n          mat4_fromRotationTranslation(view, orientation, position);\n          if (offset) mat4_translate(view, view, offset);\n          mat4_invert(view, view);\n        }\n\n        return function (frameData, pose, vrDisplay) {\n          if (!frameData || !pose) return false;\n          frameData.pose = pose;\n          frameData.timestamp = pose.timestamp;\n          updateEyeMatrices(frameData.leftProjectionMatrix, frameData.leftViewMatrix, pose, vrDisplay._getFieldOfView(\"left\"), vrDisplay._getEyeOffset(\"left\"), vrDisplay);\n          updateEyeMatrices(frameData.rightProjectionMatrix, frameData.rightViewMatrix, pose, vrDisplay._getFieldOfView(\"right\"), vrDisplay._getEyeOffset(\"right\"), vrDisplay);\n          return true;\n        };\n      }();\n\n      var isInsideCrossOriginIFrame = function isInsideCrossOriginIFrame() {\n        var isFramed = window.self !== window.top;\n        var refOrigin = getOriginFromUrl(document.referrer);\n        var thisOrigin = getOriginFromUrl(window.location.href);\n        return isFramed && refOrigin !== thisOrigin;\n      };\n\n      var getOriginFromUrl = function getOriginFromUrl(url) {\n        var domainIdx;\n        var protoSepIdx = url.indexOf(\"://\");\n\n        if (protoSepIdx !== -1) {\n          domainIdx = protoSepIdx + 3;\n        } else {\n          domainIdx = 0;\n        }\n\n        var domainEndIdx = url.indexOf('/', domainIdx);\n\n        if (domainEndIdx === -1) {\n          domainEndIdx = url.length;\n        }\n\n        return url.substring(0, domainEndIdx);\n      };\n\n      var getQuaternionAngle = function getQuaternionAngle(quat) {\n        if (quat.w > 1) {\n          console.warn('getQuaternionAngle: w > 1');\n          return 0;\n        }\n\n        var angle = 2 * Math.acos(quat.w);\n        return angle;\n      };\n\n      var warnOnce = function () {\n        var observedWarnings = {};\n        return function (key, message) {\n          if (observedWarnings[key] === undefined) {\n            console.warn('webvr-polyfill: ' + message);\n            observedWarnings[key] = true;\n          }\n        };\n      }();\n\n      var deprecateWarning = function deprecateWarning(deprecated, suggested) {\n        var alternative = suggested ? 'Please use ' + suggested + ' instead.' : '';\n        warnOnce(deprecated, deprecated + ' has been deprecated. ' + 'This may not work on native WebVR displays. ' + alternative);\n      };\n\n      function WGLUPreserveGLState(gl, bindings, callback) {\n        if (!bindings) {\n          callback(gl);\n          return;\n        }\n\n        var boundValues = [];\n        var activeTexture = null;\n\n        for (var i = 0; i < bindings.length; ++i) {\n          var binding = bindings[i];\n\n          switch (binding) {\n            case gl.TEXTURE_BINDING_2D:\n            case gl.TEXTURE_BINDING_CUBE_MAP:\n              var textureUnit = bindings[++i];\n\n              if (textureUnit < gl.TEXTURE0 || textureUnit > gl.TEXTURE31) {\n                console.error(\"TEXTURE_BINDING_2D or TEXTURE_BINDING_CUBE_MAP must be followed by a valid texture unit\");\n                boundValues.push(null, null);\n                break;\n              }\n\n              if (!activeTexture) {\n                activeTexture = gl.getParameter(gl.ACTIVE_TEXTURE);\n              }\n\n              gl.activeTexture(textureUnit);\n              boundValues.push(gl.getParameter(binding), null);\n              break;\n\n            case gl.ACTIVE_TEXTURE:\n              activeTexture = gl.getParameter(gl.ACTIVE_TEXTURE);\n              boundValues.push(null);\n              break;\n\n            default:\n              boundValues.push(gl.getParameter(binding));\n              break;\n          }\n        }\n\n        callback(gl);\n\n        for (var i = 0; i < bindings.length; ++i) {\n          var binding = bindings[i];\n          var boundValue = boundValues[i];\n\n          switch (binding) {\n            case gl.ACTIVE_TEXTURE:\n              break;\n\n            case gl.ARRAY_BUFFER_BINDING:\n              gl.bindBuffer(gl.ARRAY_BUFFER, boundValue);\n              break;\n\n            case gl.COLOR_CLEAR_VALUE:\n              gl.clearColor(boundValue[0], boundValue[1], boundValue[2], boundValue[3]);\n              break;\n\n            case gl.COLOR_WRITEMASK:\n              gl.colorMask(boundValue[0], boundValue[1], boundValue[2], boundValue[3]);\n              break;\n\n            case gl.CURRENT_PROGRAM:\n              gl.useProgram(boundValue);\n              break;\n\n            case gl.ELEMENT_ARRAY_BUFFER_BINDING:\n              gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, boundValue);\n              break;\n\n            case gl.FRAMEBUFFER_BINDING:\n              gl.bindFramebuffer(gl.FRAMEBUFFER, boundValue);\n              break;\n\n            case gl.RENDERBUFFER_BINDING:\n              gl.bindRenderbuffer(gl.RENDERBUFFER, boundValue);\n              break;\n\n            case gl.TEXTURE_BINDING_2D:\n              var textureUnit = bindings[++i];\n              if (textureUnit < gl.TEXTURE0 || textureUnit > gl.TEXTURE31) break;\n              gl.activeTexture(textureUnit);\n              gl.bindTexture(gl.TEXTURE_2D, boundValue);\n              break;\n\n            case gl.TEXTURE_BINDING_CUBE_MAP:\n              var textureUnit = bindings[++i];\n              if (textureUnit < gl.TEXTURE0 || textureUnit > gl.TEXTURE31) break;\n              gl.activeTexture(textureUnit);\n              gl.bindTexture(gl.TEXTURE_CUBE_MAP, boundValue);\n              break;\n\n            case gl.VIEWPORT:\n              gl.viewport(boundValue[0], boundValue[1], boundValue[2], boundValue[3]);\n              break;\n\n            case gl.BLEND:\n            case gl.CULL_FACE:\n            case gl.DEPTH_TEST:\n            case gl.SCISSOR_TEST:\n            case gl.STENCIL_TEST:\n              if (boundValue) {\n                gl.enable(binding);\n              } else {\n                gl.disable(binding);\n              }\n\n              break;\n\n            default:\n              console.log(\"No GL restore behavior for 0x\" + binding.toString(16));\n              break;\n          }\n\n          if (activeTexture) {\n            gl.activeTexture(activeTexture);\n          }\n        }\n      }\n\n      var glPreserveState = WGLUPreserveGLState;\n      var distortionVS = ['attribute vec2 position;', 'attribute vec3 texCoord;', 'varying vec2 vTexCoord;', 'uniform vec4 viewportOffsetScale[2];', 'void main() {', '  vec4 viewport = viewportOffsetScale[int(texCoord.z)];', '  vTexCoord = (texCoord.xy * viewport.zw) + viewport.xy;', '  gl_Position = vec4( position, 1.0, 1.0 );', '}'].join('\\n');\n      var distortionFS = ['precision mediump float;', 'uniform sampler2D diffuse;', 'varying vec2 vTexCoord;', 'void main() {', '  gl_FragColor = texture2D(diffuse, vTexCoord);', '}'].join('\\n');\n\n      function CardboardDistorter(gl, cardboardUI, bufferScale, dirtySubmitFrameBindings) {\n        this.gl = gl;\n        this.cardboardUI = cardboardUI;\n        this.bufferScale = bufferScale;\n        this.dirtySubmitFrameBindings = dirtySubmitFrameBindings;\n        this.ctxAttribs = gl.getContextAttributes();\n        this.meshWidth = 20;\n        this.meshHeight = 20;\n        this.bufferWidth = gl.drawingBufferWidth;\n        this.bufferHeight = gl.drawingBufferHeight;\n        this.realBindFramebuffer = gl.bindFramebuffer;\n        this.realEnable = gl.enable;\n        this.realDisable = gl.disable;\n        this.realColorMask = gl.colorMask;\n        this.realClearColor = gl.clearColor;\n        this.realViewport = gl.viewport;\n\n        if (!isIOS()) {\n          this.realCanvasWidth = Object.getOwnPropertyDescriptor(gl.canvas.__proto__, 'width');\n          this.realCanvasHeight = Object.getOwnPropertyDescriptor(gl.canvas.__proto__, 'height');\n        }\n\n        this.isPatched = false;\n        this.lastBoundFramebuffer = null;\n        this.cullFace = false;\n        this.depthTest = false;\n        this.blend = false;\n        this.scissorTest = false;\n        this.stencilTest = false;\n        this.viewport = [0, 0, 0, 0];\n        this.colorMask = [true, true, true, true];\n        this.clearColor = [0, 0, 0, 0];\n        this.attribs = {\n          position: 0,\n          texCoord: 1\n        };\n        this.program = linkProgram(gl, distortionVS, distortionFS, this.attribs);\n        this.uniforms = getProgramUniforms(gl, this.program);\n        this.viewportOffsetScale = new Float32Array(8);\n        this.setTextureBounds();\n        this.vertexBuffer = gl.createBuffer();\n        this.indexBuffer = gl.createBuffer();\n        this.indexCount = 0;\n        this.renderTarget = gl.createTexture();\n        this.framebuffer = gl.createFramebuffer();\n        this.depthStencilBuffer = null;\n        this.depthBuffer = null;\n        this.stencilBuffer = null;\n\n        if (this.ctxAttribs.depth && this.ctxAttribs.stencil) {\n          this.depthStencilBuffer = gl.createRenderbuffer();\n        } else if (this.ctxAttribs.depth) {\n          this.depthBuffer = gl.createRenderbuffer();\n        } else if (this.ctxAttribs.stencil) {\n          this.stencilBuffer = gl.createRenderbuffer();\n        }\n\n        this.patch();\n        this.onResize();\n      }\n\n      CardboardDistorter.prototype.destroy = function () {\n        var gl = this.gl;\n        this.unpatch();\n        gl.deleteProgram(this.program);\n        gl.deleteBuffer(this.vertexBuffer);\n        gl.deleteBuffer(this.indexBuffer);\n        gl.deleteTexture(this.renderTarget);\n        gl.deleteFramebuffer(this.framebuffer);\n\n        if (this.depthStencilBuffer) {\n          gl.deleteRenderbuffer(this.depthStencilBuffer);\n        }\n\n        if (this.depthBuffer) {\n          gl.deleteRenderbuffer(this.depthBuffer);\n        }\n\n        if (this.stencilBuffer) {\n          gl.deleteRenderbuffer(this.stencilBuffer);\n        }\n\n        if (this.cardboardUI) {\n          this.cardboardUI.destroy();\n        }\n      };\n\n      CardboardDistorter.prototype.onResize = function () {\n        var gl = this.gl;\n        var self = this;\n        var glState = [gl.RENDERBUFFER_BINDING, gl.TEXTURE_BINDING_2D, gl.TEXTURE0];\n        glPreserveState(gl, glState, function (gl) {\n          self.realBindFramebuffer.call(gl, gl.FRAMEBUFFER, null);\n\n          if (self.scissorTest) {\n            self.realDisable.call(gl, gl.SCISSOR_TEST);\n          }\n\n          self.realColorMask.call(gl, true, true, true, true);\n          self.realViewport.call(gl, 0, 0, gl.drawingBufferWidth, gl.drawingBufferHeight);\n          self.realClearColor.call(gl, 0, 0, 0, 1);\n          gl.clear(gl.COLOR_BUFFER_BIT);\n          self.realBindFramebuffer.call(gl, gl.FRAMEBUFFER, self.framebuffer);\n          gl.bindTexture(gl.TEXTURE_2D, self.renderTarget);\n          gl.texImage2D(gl.TEXTURE_2D, 0, self.ctxAttribs.alpha ? gl.RGBA : gl.RGB, self.bufferWidth, self.bufferHeight, 0, self.ctxAttribs.alpha ? gl.RGBA : gl.RGB, gl.UNSIGNED_BYTE, null);\n          gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.LINEAR);\n          gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR);\n          gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\n          gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\n          gl.framebufferTexture2D(gl.FRAMEBUFFER, gl.COLOR_ATTACHMENT0, gl.TEXTURE_2D, self.renderTarget, 0);\n\n          if (self.ctxAttribs.depth && self.ctxAttribs.stencil) {\n            gl.bindRenderbuffer(gl.RENDERBUFFER, self.depthStencilBuffer);\n            gl.renderbufferStorage(gl.RENDERBUFFER, gl.DEPTH_STENCIL, self.bufferWidth, self.bufferHeight);\n            gl.framebufferRenderbuffer(gl.FRAMEBUFFER, gl.DEPTH_STENCIL_ATTACHMENT, gl.RENDERBUFFER, self.depthStencilBuffer);\n          } else if (self.ctxAttribs.depth) {\n            gl.bindRenderbuffer(gl.RENDERBUFFER, self.depthBuffer);\n            gl.renderbufferStorage(gl.RENDERBUFFER, gl.DEPTH_COMPONENT16, self.bufferWidth, self.bufferHeight);\n            gl.framebufferRenderbuffer(gl.FRAMEBUFFER, gl.DEPTH_ATTACHMENT, gl.RENDERBUFFER, self.depthBuffer);\n          } else if (self.ctxAttribs.stencil) {\n            gl.bindRenderbuffer(gl.RENDERBUFFER, self.stencilBuffer);\n            gl.renderbufferStorage(gl.RENDERBUFFER, gl.STENCIL_INDEX8, self.bufferWidth, self.bufferHeight);\n            gl.framebufferRenderbuffer(gl.FRAMEBUFFER, gl.STENCIL_ATTACHMENT, gl.RENDERBUFFER, self.stencilBuffer);\n          }\n\n          if (!gl.checkFramebufferStatus(gl.FRAMEBUFFER) === gl.FRAMEBUFFER_COMPLETE) {\n            console.error('Framebuffer incomplete!');\n          }\n\n          self.realBindFramebuffer.call(gl, gl.FRAMEBUFFER, self.lastBoundFramebuffer);\n\n          if (self.scissorTest) {\n            self.realEnable.call(gl, gl.SCISSOR_TEST);\n          }\n\n          self.realColorMask.apply(gl, self.colorMask);\n          self.realViewport.apply(gl, self.viewport);\n          self.realClearColor.apply(gl, self.clearColor);\n        });\n\n        if (this.cardboardUI) {\n          this.cardboardUI.onResize();\n        }\n      };\n\n      CardboardDistorter.prototype.patch = function () {\n        if (this.isPatched) {\n          return;\n        }\n\n        var self = this;\n        var canvas = this.gl.canvas;\n        var gl = this.gl;\n\n        if (!isIOS()) {\n          canvas.width = getScreenWidth() * this.bufferScale;\n          canvas.height = getScreenHeight() * this.bufferScale;\n          Object.defineProperty(canvas, 'width', {\n            configurable: true,\n            enumerable: true,\n            get: function get() {\n              return self.bufferWidth;\n            },\n            set: function set(value) {\n              self.bufferWidth = value;\n              self.realCanvasWidth.set.call(canvas, value);\n              self.onResize();\n            }\n          });\n          Object.defineProperty(canvas, 'height', {\n            configurable: true,\n            enumerable: true,\n            get: function get() {\n              return self.bufferHeight;\n            },\n            set: function set(value) {\n              self.bufferHeight = value;\n              self.realCanvasHeight.set.call(canvas, value);\n              self.onResize();\n            }\n          });\n        }\n\n        this.lastBoundFramebuffer = gl.getParameter(gl.FRAMEBUFFER_BINDING);\n\n        if (this.lastBoundFramebuffer == null) {\n          this.lastBoundFramebuffer = this.framebuffer;\n          this.gl.bindFramebuffer(gl.FRAMEBUFFER, this.framebuffer);\n        }\n\n        this.gl.bindFramebuffer = function (target, framebuffer) {\n          self.lastBoundFramebuffer = framebuffer ? framebuffer : self.framebuffer;\n          self.realBindFramebuffer.call(gl, target, self.lastBoundFramebuffer);\n        };\n\n        this.cullFace = gl.getParameter(gl.CULL_FACE);\n        this.depthTest = gl.getParameter(gl.DEPTH_TEST);\n        this.blend = gl.getParameter(gl.BLEND);\n        this.scissorTest = gl.getParameter(gl.SCISSOR_TEST);\n        this.stencilTest = gl.getParameter(gl.STENCIL_TEST);\n\n        gl.enable = function (pname) {\n          switch (pname) {\n            case gl.CULL_FACE:\n              self.cullFace = true;\n              break;\n\n            case gl.DEPTH_TEST:\n              self.depthTest = true;\n              break;\n\n            case gl.BLEND:\n              self.blend = true;\n              break;\n\n            case gl.SCISSOR_TEST:\n              self.scissorTest = true;\n              break;\n\n            case gl.STENCIL_TEST:\n              self.stencilTest = true;\n              break;\n          }\n\n          self.realEnable.call(gl, pname);\n        };\n\n        gl.disable = function (pname) {\n          switch (pname) {\n            case gl.CULL_FACE:\n              self.cullFace = false;\n              break;\n\n            case gl.DEPTH_TEST:\n              self.depthTest = false;\n              break;\n\n            case gl.BLEND:\n              self.blend = false;\n              break;\n\n            case gl.SCISSOR_TEST:\n              self.scissorTest = false;\n              break;\n\n            case gl.STENCIL_TEST:\n              self.stencilTest = false;\n              break;\n          }\n\n          self.realDisable.call(gl, pname);\n        };\n\n        this.colorMask = gl.getParameter(gl.COLOR_WRITEMASK);\n\n        gl.colorMask = function (r, g, b, a) {\n          self.colorMask[0] = r;\n          self.colorMask[1] = g;\n          self.colorMask[2] = b;\n          self.colorMask[3] = a;\n          self.realColorMask.call(gl, r, g, b, a);\n        };\n\n        this.clearColor = gl.getParameter(gl.COLOR_CLEAR_VALUE);\n\n        gl.clearColor = function (r, g, b, a) {\n          self.clearColor[0] = r;\n          self.clearColor[1] = g;\n          self.clearColor[2] = b;\n          self.clearColor[3] = a;\n          self.realClearColor.call(gl, r, g, b, a);\n        };\n\n        this.viewport = gl.getParameter(gl.VIEWPORT);\n\n        gl.viewport = function (x, y, w, h) {\n          self.viewport[0] = x;\n          self.viewport[1] = y;\n          self.viewport[2] = w;\n          self.viewport[3] = h;\n          self.realViewport.call(gl, x, y, w, h);\n        };\n\n        this.isPatched = true;\n        safariCssSizeWorkaround(canvas);\n      };\n\n      CardboardDistorter.prototype.unpatch = function () {\n        if (!this.isPatched) {\n          return;\n        }\n\n        var gl = this.gl;\n        var canvas = this.gl.canvas;\n\n        if (!isIOS()) {\n          Object.defineProperty(canvas, 'width', this.realCanvasWidth);\n          Object.defineProperty(canvas, 'height', this.realCanvasHeight);\n        }\n\n        canvas.width = this.bufferWidth;\n        canvas.height = this.bufferHeight;\n        gl.bindFramebuffer = this.realBindFramebuffer;\n        gl.enable = this.realEnable;\n        gl.disable = this.realDisable;\n        gl.colorMask = this.realColorMask;\n        gl.clearColor = this.realClearColor;\n        gl.viewport = this.realViewport;\n\n        if (this.lastBoundFramebuffer == this.framebuffer) {\n          gl.bindFramebuffer(gl.FRAMEBUFFER, null);\n        }\n\n        this.isPatched = false;\n        setTimeout(function () {\n          safariCssSizeWorkaround(canvas);\n        }, 1);\n      };\n\n      CardboardDistorter.prototype.setTextureBounds = function (leftBounds, rightBounds) {\n        if (!leftBounds) {\n          leftBounds = [0, 0, 0.5, 1];\n        }\n\n        if (!rightBounds) {\n          rightBounds = [0.5, 0, 0.5, 1];\n        }\n\n        this.viewportOffsetScale[0] = leftBounds[0];\n        this.viewportOffsetScale[1] = leftBounds[1];\n        this.viewportOffsetScale[2] = leftBounds[2];\n        this.viewportOffsetScale[3] = leftBounds[3];\n        this.viewportOffsetScale[4] = rightBounds[0];\n        this.viewportOffsetScale[5] = rightBounds[1];\n        this.viewportOffsetScale[6] = rightBounds[2];\n        this.viewportOffsetScale[7] = rightBounds[3];\n      };\n\n      CardboardDistorter.prototype.submitFrame = function () {\n        var gl = this.gl;\n        var self = this;\n        var glState = [];\n\n        if (!this.dirtySubmitFrameBindings) {\n          glState.push(gl.CURRENT_PROGRAM, gl.ARRAY_BUFFER_BINDING, gl.ELEMENT_ARRAY_BUFFER_BINDING, gl.TEXTURE_BINDING_2D, gl.TEXTURE0);\n        }\n\n        glPreserveState(gl, glState, function (gl) {\n          self.realBindFramebuffer.call(gl, gl.FRAMEBUFFER, null);\n\n          if (self.cullFace) {\n            self.realDisable.call(gl, gl.CULL_FACE);\n          }\n\n          if (self.depthTest) {\n            self.realDisable.call(gl, gl.DEPTH_TEST);\n          }\n\n          if (self.blend) {\n            self.realDisable.call(gl, gl.BLEND);\n          }\n\n          if (self.scissorTest) {\n            self.realDisable.call(gl, gl.SCISSOR_TEST);\n          }\n\n          if (self.stencilTest) {\n            self.realDisable.call(gl, gl.STENCIL_TEST);\n          }\n\n          self.realColorMask.call(gl, true, true, true, true);\n          self.realViewport.call(gl, 0, 0, gl.drawingBufferWidth, gl.drawingBufferHeight);\n\n          if (self.ctxAttribs.alpha || isIOS()) {\n            self.realClearColor.call(gl, 0, 0, 0, 1);\n            gl.clear(gl.COLOR_BUFFER_BIT);\n          }\n\n          gl.useProgram(self.program);\n          gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, self.indexBuffer);\n          gl.bindBuffer(gl.ARRAY_BUFFER, self.vertexBuffer);\n          gl.enableVertexAttribArray(self.attribs.position);\n          gl.enableVertexAttribArray(self.attribs.texCoord);\n          gl.vertexAttribPointer(self.attribs.position, 2, gl.FLOAT, false, 20, 0);\n          gl.vertexAttribPointer(self.attribs.texCoord, 3, gl.FLOAT, false, 20, 8);\n          gl.activeTexture(gl.TEXTURE0);\n          gl.uniform1i(self.uniforms.diffuse, 0);\n          gl.bindTexture(gl.TEXTURE_2D, self.renderTarget);\n          gl.uniform4fv(self.uniforms.viewportOffsetScale, self.viewportOffsetScale);\n          gl.drawElements(gl.TRIANGLES, self.indexCount, gl.UNSIGNED_SHORT, 0);\n\n          if (self.cardboardUI) {\n            self.cardboardUI.renderNoState();\n          }\n\n          self.realBindFramebuffer.call(self.gl, gl.FRAMEBUFFER, self.framebuffer);\n\n          if (!self.ctxAttribs.preserveDrawingBuffer) {\n            self.realClearColor.call(gl, 0, 0, 0, 0);\n            gl.clear(gl.COLOR_BUFFER_BIT);\n          }\n\n          if (!self.dirtySubmitFrameBindings) {\n            self.realBindFramebuffer.call(gl, gl.FRAMEBUFFER, self.lastBoundFramebuffer);\n          }\n\n          if (self.cullFace) {\n            self.realEnable.call(gl, gl.CULL_FACE);\n          }\n\n          if (self.depthTest) {\n            self.realEnable.call(gl, gl.DEPTH_TEST);\n          }\n\n          if (self.blend) {\n            self.realEnable.call(gl, gl.BLEND);\n          }\n\n          if (self.scissorTest) {\n            self.realEnable.call(gl, gl.SCISSOR_TEST);\n          }\n\n          if (self.stencilTest) {\n            self.realEnable.call(gl, gl.STENCIL_TEST);\n          }\n\n          self.realColorMask.apply(gl, self.colorMask);\n          self.realViewport.apply(gl, self.viewport);\n\n          if (self.ctxAttribs.alpha || !self.ctxAttribs.preserveDrawingBuffer) {\n            self.realClearColor.apply(gl, self.clearColor);\n          }\n        });\n\n        if (isIOS()) {\n          var canvas = gl.canvas;\n\n          if (canvas.width != self.bufferWidth || canvas.height != self.bufferHeight) {\n            self.bufferWidth = canvas.width;\n            self.bufferHeight = canvas.height;\n            self.onResize();\n          }\n        }\n      };\n\n      CardboardDistorter.prototype.updateDeviceInfo = function (deviceInfo) {\n        var gl = this.gl;\n        var self = this;\n        var glState = [gl.ARRAY_BUFFER_BINDING, gl.ELEMENT_ARRAY_BUFFER_BINDING];\n        glPreserveState(gl, glState, function (gl) {\n          var vertices = self.computeMeshVertices_(self.meshWidth, self.meshHeight, deviceInfo);\n          gl.bindBuffer(gl.ARRAY_BUFFER, self.vertexBuffer);\n          gl.bufferData(gl.ARRAY_BUFFER, vertices, gl.STATIC_DRAW);\n\n          if (!self.indexCount) {\n            var indices = self.computeMeshIndices_(self.meshWidth, self.meshHeight);\n            gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, self.indexBuffer);\n            gl.bufferData(gl.ELEMENT_ARRAY_BUFFER, indices, gl.STATIC_DRAW);\n            self.indexCount = indices.length;\n          }\n        });\n      };\n\n      CardboardDistorter.prototype.computeMeshVertices_ = function (width, height, deviceInfo) {\n        var vertices = new Float32Array(2 * width * height * 5);\n        var lensFrustum = deviceInfo.getLeftEyeVisibleTanAngles();\n        var noLensFrustum = deviceInfo.getLeftEyeNoLensTanAngles();\n        var viewport = deviceInfo.getLeftEyeVisibleScreenRect(noLensFrustum);\n        var vidx = 0;\n\n        for (var e = 0; e < 2; e++) {\n          for (var j = 0; j < height; j++) {\n            for (var i = 0; i < width; i++, vidx++) {\n              var u = i / (width - 1);\n              var v = j / (height - 1);\n              var s = u;\n              var t = v;\n              var x = lerp(lensFrustum[0], lensFrustum[2], u);\n              var y = lerp(lensFrustum[3], lensFrustum[1], v);\n              var d = Math.sqrt(x * x + y * y);\n              var r = deviceInfo.distortion.distortInverse(d);\n              var p = x * r / d;\n              var q = y * r / d;\n              u = (p - noLensFrustum[0]) / (noLensFrustum[2] - noLensFrustum[0]);\n              v = (q - noLensFrustum[3]) / (noLensFrustum[1] - noLensFrustum[3]);\n              u = (viewport.x + u * viewport.width - 0.5) * 2.0;\n              v = (viewport.y + v * viewport.height - 0.5) * 2.0;\n              vertices[vidx * 5 + 0] = u;\n              vertices[vidx * 5 + 1] = v;\n              vertices[vidx * 5 + 2] = s;\n              vertices[vidx * 5 + 3] = t;\n              vertices[vidx * 5 + 4] = e;\n            }\n          }\n\n          var w = lensFrustum[2] - lensFrustum[0];\n          lensFrustum[0] = -(w + lensFrustum[0]);\n          lensFrustum[2] = w - lensFrustum[2];\n          w = noLensFrustum[2] - noLensFrustum[0];\n          noLensFrustum[0] = -(w + noLensFrustum[0]);\n          noLensFrustum[2] = w - noLensFrustum[2];\n          viewport.x = 1 - (viewport.x + viewport.width);\n        }\n\n        return vertices;\n      };\n\n      CardboardDistorter.prototype.computeMeshIndices_ = function (width, height) {\n        var indices = new Uint16Array(2 * (width - 1) * (height - 1) * 6);\n        var halfwidth = width / 2;\n        var halfheight = height / 2;\n        var vidx = 0;\n        var iidx = 0;\n\n        for (var e = 0; e < 2; e++) {\n          for (var j = 0; j < height; j++) {\n            for (var i = 0; i < width; i++, vidx++) {\n              if (i == 0 || j == 0) continue;\n\n              if (i <= halfwidth == j <= halfheight) {\n                indices[iidx++] = vidx;\n                indices[iidx++] = vidx - width - 1;\n                indices[iidx++] = vidx - width;\n                indices[iidx++] = vidx - width - 1;\n                indices[iidx++] = vidx;\n                indices[iidx++] = vidx - 1;\n              } else {\n                indices[iidx++] = vidx - 1;\n                indices[iidx++] = vidx - width;\n                indices[iidx++] = vidx;\n                indices[iidx++] = vidx - width;\n                indices[iidx++] = vidx - 1;\n                indices[iidx++] = vidx - width - 1;\n              }\n            }\n          }\n        }\n\n        return indices;\n      };\n\n      CardboardDistorter.prototype.getOwnPropertyDescriptor_ = function (proto, attrName) {\n        var descriptor = Object.getOwnPropertyDescriptor(proto, attrName);\n\n        if (descriptor.get === undefined || descriptor.set === undefined) {\n          descriptor.configurable = true;\n          descriptor.enumerable = true;\n\n          descriptor.get = function () {\n            return this.getAttribute(attrName);\n          };\n\n          descriptor.set = function (val) {\n            this.setAttribute(attrName, val);\n          };\n        }\n\n        return descriptor;\n      };\n\n      var uiVS = ['attribute vec2 position;', 'uniform mat4 projectionMat;', 'void main() {', '  gl_Position = projectionMat * vec4( position, -1.0, 1.0 );', '}'].join('\\n');\n      var uiFS = ['precision mediump float;', 'uniform vec4 color;', 'void main() {', '  gl_FragColor = color;', '}'].join('\\n');\n      var DEG2RAD = Math.PI / 180.0;\n      var kAnglePerGearSection = 60;\n      var kOuterRimEndAngle = 12;\n      var kInnerRimBeginAngle = 20;\n      var kOuterRadius = 1;\n      var kMiddleRadius = 0.75;\n      var kInnerRadius = 0.3125;\n      var kCenterLineThicknessDp = 4;\n      var kButtonWidthDp = 28;\n      var kTouchSlopFactor = 1.5;\n\n      function CardboardUI(gl) {\n        this.gl = gl;\n        this.attribs = {\n          position: 0\n        };\n        this.program = linkProgram(gl, uiVS, uiFS, this.attribs);\n        this.uniforms = getProgramUniforms(gl, this.program);\n        this.vertexBuffer = gl.createBuffer();\n        this.gearOffset = 0;\n        this.gearVertexCount = 0;\n        this.arrowOffset = 0;\n        this.arrowVertexCount = 0;\n        this.projMat = new Float32Array(16);\n        this.listener = null;\n        this.onResize();\n      }\n\n      CardboardUI.prototype.destroy = function () {\n        var gl = this.gl;\n\n        if (this.listener) {\n          gl.canvas.removeEventListener('click', this.listener, false);\n        }\n\n        gl.deleteProgram(this.program);\n        gl.deleteBuffer(this.vertexBuffer);\n      };\n\n      CardboardUI.prototype.listen = function (optionsCallback, backCallback) {\n        var canvas = this.gl.canvas;\n\n        this.listener = function (event) {\n          var midline = canvas.clientWidth / 2;\n          var buttonSize = kButtonWidthDp * kTouchSlopFactor;\n\n          if (event.clientX > midline - buttonSize && event.clientX < midline + buttonSize && event.clientY > canvas.clientHeight - buttonSize) {\n            optionsCallback(event);\n          } else if (event.clientX < buttonSize && event.clientY < buttonSize) {\n            backCallback(event);\n          }\n        };\n\n        canvas.addEventListener('click', this.listener, false);\n      };\n\n      CardboardUI.prototype.onResize = function () {\n        var gl = this.gl;\n        var self = this;\n        var glState = [gl.ARRAY_BUFFER_BINDING];\n        glPreserveState(gl, glState, function (gl) {\n          var vertices = [];\n          var midline = gl.drawingBufferWidth / 2;\n          var physicalPixels = Math.max(screen.width, screen.height) * window.devicePixelRatio;\n          var scalingRatio = gl.drawingBufferWidth / physicalPixels;\n          var dps = scalingRatio * window.devicePixelRatio;\n          var lineWidth = kCenterLineThicknessDp * dps / 2;\n          var buttonSize = kButtonWidthDp * kTouchSlopFactor * dps;\n          var buttonScale = kButtonWidthDp * dps / 2;\n          var buttonBorder = (kButtonWidthDp * kTouchSlopFactor - kButtonWidthDp) * dps;\n          vertices.push(midline - lineWidth, buttonSize);\n          vertices.push(midline - lineWidth, gl.drawingBufferHeight);\n          vertices.push(midline + lineWidth, buttonSize);\n          vertices.push(midline + lineWidth, gl.drawingBufferHeight);\n          self.gearOffset = vertices.length / 2;\n\n          function addGearSegment(theta, r) {\n            var angle = (90 - theta) * DEG2RAD;\n            var x = Math.cos(angle);\n            var y = Math.sin(angle);\n            vertices.push(kInnerRadius * x * buttonScale + midline, kInnerRadius * y * buttonScale + buttonScale);\n            vertices.push(r * x * buttonScale + midline, r * y * buttonScale + buttonScale);\n          }\n\n          for (var i = 0; i <= 6; i++) {\n            var segmentTheta = i * kAnglePerGearSection;\n            addGearSegment(segmentTheta, kOuterRadius);\n            addGearSegment(segmentTheta + kOuterRimEndAngle, kOuterRadius);\n            addGearSegment(segmentTheta + kInnerRimBeginAngle, kMiddleRadius);\n            addGearSegment(segmentTheta + (kAnglePerGearSection - kInnerRimBeginAngle), kMiddleRadius);\n            addGearSegment(segmentTheta + (kAnglePerGearSection - kOuterRimEndAngle), kOuterRadius);\n          }\n\n          self.gearVertexCount = vertices.length / 2 - self.gearOffset;\n          self.arrowOffset = vertices.length / 2;\n\n          function addArrowVertex(x, y) {\n            vertices.push(buttonBorder + x, gl.drawingBufferHeight - buttonBorder - y);\n          }\n\n          var angledLineWidth = lineWidth / Math.sin(45 * DEG2RAD);\n          addArrowVertex(0, buttonScale);\n          addArrowVertex(buttonScale, 0);\n          addArrowVertex(buttonScale + angledLineWidth, angledLineWidth);\n          addArrowVertex(angledLineWidth, buttonScale + angledLineWidth);\n          addArrowVertex(angledLineWidth, buttonScale - angledLineWidth);\n          addArrowVertex(0, buttonScale);\n          addArrowVertex(buttonScale, buttonScale * 2);\n          addArrowVertex(buttonScale + angledLineWidth, buttonScale * 2 - angledLineWidth);\n          addArrowVertex(angledLineWidth, buttonScale - angledLineWidth);\n          addArrowVertex(0, buttonScale);\n          addArrowVertex(angledLineWidth, buttonScale - lineWidth);\n          addArrowVertex(kButtonWidthDp * dps, buttonScale - lineWidth);\n          addArrowVertex(angledLineWidth, buttonScale + lineWidth);\n          addArrowVertex(kButtonWidthDp * dps, buttonScale + lineWidth);\n          self.arrowVertexCount = vertices.length / 2 - self.arrowOffset;\n          gl.bindBuffer(gl.ARRAY_BUFFER, self.vertexBuffer);\n          gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(vertices), gl.STATIC_DRAW);\n        });\n      };\n\n      CardboardUI.prototype.render = function () {\n        var gl = this.gl;\n        var self = this;\n        var glState = [gl.CULL_FACE, gl.DEPTH_TEST, gl.BLEND, gl.SCISSOR_TEST, gl.STENCIL_TEST, gl.COLOR_WRITEMASK, gl.VIEWPORT, gl.CURRENT_PROGRAM, gl.ARRAY_BUFFER_BINDING];\n        glPreserveState(gl, glState, function (gl) {\n          gl.disable(gl.CULL_FACE);\n          gl.disable(gl.DEPTH_TEST);\n          gl.disable(gl.BLEND);\n          gl.disable(gl.SCISSOR_TEST);\n          gl.disable(gl.STENCIL_TEST);\n          gl.colorMask(true, true, true, true);\n          gl.viewport(0, 0, gl.drawingBufferWidth, gl.drawingBufferHeight);\n          self.renderNoState();\n        });\n      };\n\n      CardboardUI.prototype.renderNoState = function () {\n        var gl = this.gl;\n        gl.useProgram(this.program);\n        gl.bindBuffer(gl.ARRAY_BUFFER, this.vertexBuffer);\n        gl.enableVertexAttribArray(this.attribs.position);\n        gl.vertexAttribPointer(this.attribs.position, 2, gl.FLOAT, false, 8, 0);\n        gl.uniform4f(this.uniforms.color, 1.0, 1.0, 1.0, 1.0);\n        orthoMatrix(this.projMat, 0, gl.drawingBufferWidth, 0, gl.drawingBufferHeight, 0.1, 1024.0);\n        gl.uniformMatrix4fv(this.uniforms.projectionMat, false, this.projMat);\n        gl.drawArrays(gl.TRIANGLE_STRIP, 0, 4);\n        gl.drawArrays(gl.TRIANGLE_STRIP, this.gearOffset, this.gearVertexCount);\n        gl.drawArrays(gl.TRIANGLE_STRIP, this.arrowOffset, this.arrowVertexCount);\n      };\n\n      function Distortion(coefficients) {\n        this.coefficients = coefficients;\n      }\n\n      Distortion.prototype.distortInverse = function (radius) {\n        var r0 = 0;\n        var r1 = 1;\n        var dr0 = radius - this.distort(r0);\n\n        while (Math.abs(r1 - r0) > 0.0001) {\n          var dr1 = radius - this.distort(r1);\n          var r2 = r1 - dr1 * ((r1 - r0) / (dr1 - dr0));\n          r0 = r1;\n          r1 = r2;\n          dr0 = dr1;\n        }\n\n        return r1;\n      };\n\n      Distortion.prototype.distort = function (radius) {\n        var r2 = radius * radius;\n        var ret = 0;\n\n        for (var i = 0; i < this.coefficients.length; i++) {\n          ret = r2 * (ret + this.coefficients[i]);\n        }\n\n        return (ret + 1) * radius;\n      };\n\n      var degToRad = Math.PI / 180;\n      var radToDeg = 180 / Math.PI;\n\n      var Vector3 = function Vector3(x, y, z) {\n        this.x = x || 0;\n        this.y = y || 0;\n        this.z = z || 0;\n      };\n\n      Vector3.prototype = {\n        constructor: Vector3,\n        set: function set(x, y, z) {\n          this.x = x;\n          this.y = y;\n          this.z = z;\n          return this;\n        },\n        copy: function copy(v) {\n          this.x = v.x;\n          this.y = v.y;\n          this.z = v.z;\n          return this;\n        },\n        length: function length() {\n          return Math.sqrt(this.x * this.x + this.y * this.y + this.z * this.z);\n        },\n        normalize: function normalize() {\n          var scalar = this.length();\n\n          if (scalar !== 0) {\n            var invScalar = 1 / scalar;\n            this.multiplyScalar(invScalar);\n          } else {\n            this.x = 0;\n            this.y = 0;\n            this.z = 0;\n          }\n\n          return this;\n        },\n        multiplyScalar: function multiplyScalar(scalar) {\n          this.x *= scalar;\n          this.y *= scalar;\n          this.z *= scalar;\n        },\n        applyQuaternion: function applyQuaternion(q) {\n          var x = this.x;\n          var y = this.y;\n          var z = this.z;\n          var qx = q.x;\n          var qy = q.y;\n          var qz = q.z;\n          var qw = q.w;\n          var ix = qw * x + qy * z - qz * y;\n          var iy = qw * y + qz * x - qx * z;\n          var iz = qw * z + qx * y - qy * x;\n          var iw = -qx * x - qy * y - qz * z;\n          this.x = ix * qw + iw * -qx + iy * -qz - iz * -qy;\n          this.y = iy * qw + iw * -qy + iz * -qx - ix * -qz;\n          this.z = iz * qw + iw * -qz + ix * -qy - iy * -qx;\n          return this;\n        },\n        dot: function dot(v) {\n          return this.x * v.x + this.y * v.y + this.z * v.z;\n        },\n        crossVectors: function crossVectors(a, b) {\n          var ax = a.x,\n              ay = a.y,\n              az = a.z;\n          var bx = b.x,\n              by = b.y,\n              bz = b.z;\n          this.x = ay * bz - az * by;\n          this.y = az * bx - ax * bz;\n          this.z = ax * by - ay * bx;\n          return this;\n        }\n      };\n\n      var Quaternion = function Quaternion(x, y, z, w) {\n        this.x = x || 0;\n        this.y = y || 0;\n        this.z = z || 0;\n        this.w = w !== undefined ? w : 1;\n      };\n\n      Quaternion.prototype = {\n        constructor: Quaternion,\n        set: function set(x, y, z, w) {\n          this.x = x;\n          this.y = y;\n          this.z = z;\n          this.w = w;\n          return this;\n        },\n        copy: function copy(quaternion) {\n          this.x = quaternion.x;\n          this.y = quaternion.y;\n          this.z = quaternion.z;\n          this.w = quaternion.w;\n          return this;\n        },\n        setFromEulerXYZ: function setFromEulerXYZ(x, y, z) {\n          var c1 = Math.cos(x / 2);\n          var c2 = Math.cos(y / 2);\n          var c3 = Math.cos(z / 2);\n          var s1 = Math.sin(x / 2);\n          var s2 = Math.sin(y / 2);\n          var s3 = Math.sin(z / 2);\n          this.x = s1 * c2 * c3 + c1 * s2 * s3;\n          this.y = c1 * s2 * c3 - s1 * c2 * s3;\n          this.z = c1 * c2 * s3 + s1 * s2 * c3;\n          this.w = c1 * c2 * c3 - s1 * s2 * s3;\n          return this;\n        },\n        setFromEulerYXZ: function setFromEulerYXZ(x, y, z) {\n          var c1 = Math.cos(x / 2);\n          var c2 = Math.cos(y / 2);\n          var c3 = Math.cos(z / 2);\n          var s1 = Math.sin(x / 2);\n          var s2 = Math.sin(y / 2);\n          var s3 = Math.sin(z / 2);\n          this.x = s1 * c2 * c3 + c1 * s2 * s3;\n          this.y = c1 * s2 * c3 - s1 * c2 * s3;\n          this.z = c1 * c2 * s3 - s1 * s2 * c3;\n          this.w = c1 * c2 * c3 + s1 * s2 * s3;\n          return this;\n        },\n        setFromAxisAngle: function setFromAxisAngle(axis, angle) {\n          var halfAngle = angle / 2,\n              s = Math.sin(halfAngle);\n          this.x = axis.x * s;\n          this.y = axis.y * s;\n          this.z = axis.z * s;\n          this.w = Math.cos(halfAngle);\n          return this;\n        },\n        multiply: function multiply(q) {\n          return this.multiplyQuaternions(this, q);\n        },\n        multiplyQuaternions: function multiplyQuaternions(a, b) {\n          var qax = a.x,\n              qay = a.y,\n              qaz = a.z,\n              qaw = a.w;\n          var qbx = b.x,\n              qby = b.y,\n              qbz = b.z,\n              qbw = b.w;\n          this.x = qax * qbw + qaw * qbx + qay * qbz - qaz * qby;\n          this.y = qay * qbw + qaw * qby + qaz * qbx - qax * qbz;\n          this.z = qaz * qbw + qaw * qbz + qax * qby - qay * qbx;\n          this.w = qaw * qbw - qax * qbx - qay * qby - qaz * qbz;\n          return this;\n        },\n        inverse: function inverse() {\n          this.x *= -1;\n          this.y *= -1;\n          this.z *= -1;\n          this.normalize();\n          return this;\n        },\n        normalize: function normalize() {\n          var l = Math.sqrt(this.x * this.x + this.y * this.y + this.z * this.z + this.w * this.w);\n\n          if (l === 0) {\n            this.x = 0;\n            this.y = 0;\n            this.z = 0;\n            this.w = 1;\n          } else {\n            l = 1 / l;\n            this.x = this.x * l;\n            this.y = this.y * l;\n            this.z = this.z * l;\n            this.w = this.w * l;\n          }\n\n          return this;\n        },\n        slerp: function slerp(qb, t) {\n          if (t === 0) return this;\n          if (t === 1) return this.copy(qb);\n          var x = this.x,\n              y = this.y,\n              z = this.z,\n              w = this.w;\n          var cosHalfTheta = w * qb.w + x * qb.x + y * qb.y + z * qb.z;\n\n          if (cosHalfTheta < 0) {\n            this.w = -qb.w;\n            this.x = -qb.x;\n            this.y = -qb.y;\n            this.z = -qb.z;\n            cosHalfTheta = -cosHalfTheta;\n          } else {\n            this.copy(qb);\n          }\n\n          if (cosHalfTheta >= 1.0) {\n            this.w = w;\n            this.x = x;\n            this.y = y;\n            this.z = z;\n            return this;\n          }\n\n          var halfTheta = Math.acos(cosHalfTheta);\n          var sinHalfTheta = Math.sqrt(1.0 - cosHalfTheta * cosHalfTheta);\n\n          if (Math.abs(sinHalfTheta) < 0.001) {\n            this.w = 0.5 * (w + this.w);\n            this.x = 0.5 * (x + this.x);\n            this.y = 0.5 * (y + this.y);\n            this.z = 0.5 * (z + this.z);\n            return this;\n          }\n\n          var ratioA = Math.sin((1 - t) * halfTheta) / sinHalfTheta,\n              ratioB = Math.sin(t * halfTheta) / sinHalfTheta;\n          this.w = w * ratioA + this.w * ratioB;\n          this.x = x * ratioA + this.x * ratioB;\n          this.y = y * ratioA + this.y * ratioB;\n          this.z = z * ratioA + this.z * ratioB;\n          return this;\n        },\n        setFromUnitVectors: function () {\n          var v1, r;\n          var EPS = 0.000001;\n          return function (vFrom, vTo) {\n            if (v1 === undefined) v1 = new Vector3();\n            r = vFrom.dot(vTo) + 1;\n\n            if (r < EPS) {\n              r = 0;\n\n              if (Math.abs(vFrom.x) > Math.abs(vFrom.z)) {\n                v1.set(-vFrom.y, vFrom.x, 0);\n              } else {\n                v1.set(0, -vFrom.z, vFrom.y);\n              }\n            } else {\n              v1.crossVectors(vFrom, vTo);\n            }\n\n            this.x = v1.x;\n            this.y = v1.y;\n            this.z = v1.z;\n            this.w = r;\n            this.normalize();\n            return this;\n          };\n        }()\n      };\n\n      function Device(params) {\n        this.width = params.width || getScreenWidth();\n        this.height = params.height || getScreenHeight();\n        this.widthMeters = params.widthMeters;\n        this.heightMeters = params.heightMeters;\n        this.bevelMeters = params.bevelMeters;\n      }\n\n      var DEFAULT_ANDROID = new Device({\n        widthMeters: 0.110,\n        heightMeters: 0.062,\n        bevelMeters: 0.004\n      });\n      var DEFAULT_IOS = new Device({\n        widthMeters: 0.1038,\n        heightMeters: 0.0584,\n        bevelMeters: 0.004\n      });\n      var Viewers = {\n        CardboardV1: new CardboardViewer({\n          id: 'CardboardV1',\n          label: 'Cardboard I/O 2014',\n          fov: 40,\n          interLensDistance: 0.060,\n          baselineLensDistance: 0.035,\n          screenLensDistance: 0.042,\n          distortionCoefficients: [0.441, 0.156],\n          inverseCoefficients: [-0.4410035, 0.42756155, -0.4804439, 0.5460139, -0.58821183, 0.5733938, -0.48303202, 0.33299083, -0.17573841, 0.0651772, -0.01488963, 0.001559834]\n        }),\n        CardboardV2: new CardboardViewer({\n          id: 'CardboardV2',\n          label: 'Cardboard I/O 2015',\n          fov: 60,\n          interLensDistance: 0.064,\n          baselineLensDistance: 0.035,\n          screenLensDistance: 0.039,\n          distortionCoefficients: [0.34, 0.55],\n          inverseCoefficients: [-0.33836704, -0.18162185, 0.862655, -1.2462051, 1.0560602, -0.58208317, 0.21609078, -0.05444823, 0.009177956, -9.904169E-4, 6.183535E-5, -1.6981803E-6]\n        })\n      };\n\n      function DeviceInfo(deviceParams, additionalViewers) {\n        this.viewer = Viewers.CardboardV2;\n        this.updateDeviceParams(deviceParams);\n        this.distortion = new Distortion(this.viewer.distortionCoefficients);\n\n        for (var i = 0; i < additionalViewers.length; i++) {\n          var viewer = additionalViewers[i];\n          Viewers[viewer.id] = new CardboardViewer(viewer);\n        }\n      }\n\n      DeviceInfo.prototype.updateDeviceParams = function (deviceParams) {\n        this.device = this.determineDevice_(deviceParams) || this.device;\n      };\n\n      DeviceInfo.prototype.getDevice = function () {\n        return this.device;\n      };\n\n      DeviceInfo.prototype.setViewer = function (viewer) {\n        this.viewer = viewer;\n        this.distortion = new Distortion(this.viewer.distortionCoefficients);\n      };\n\n      DeviceInfo.prototype.determineDevice_ = function (deviceParams) {\n        if (!deviceParams) {\n          if (isIOS()) {\n            console.warn('Using fallback iOS device measurements.');\n            return DEFAULT_IOS;\n          } else {\n            console.warn('Using fallback Android device measurements.');\n            return DEFAULT_ANDROID;\n          }\n        }\n\n        var METERS_PER_INCH = 0.0254;\n        var metersPerPixelX = METERS_PER_INCH / deviceParams.xdpi;\n        var metersPerPixelY = METERS_PER_INCH / deviceParams.ydpi;\n        var width = getScreenWidth();\n        var height = getScreenHeight();\n        return new Device({\n          widthMeters: metersPerPixelX * width,\n          heightMeters: metersPerPixelY * height,\n          bevelMeters: deviceParams.bevelMm * 0.001\n        });\n      };\n\n      DeviceInfo.prototype.getDistortedFieldOfViewLeftEye = function () {\n        var viewer = this.viewer;\n        var device = this.device;\n        var distortion = this.distortion;\n        var eyeToScreenDistance = viewer.screenLensDistance;\n        var outerDist = (device.widthMeters - viewer.interLensDistance) / 2;\n        var innerDist = viewer.interLensDistance / 2;\n        var bottomDist = viewer.baselineLensDistance - device.bevelMeters;\n        var topDist = device.heightMeters - bottomDist;\n        var outerAngle = radToDeg * Math.atan(distortion.distort(outerDist / eyeToScreenDistance));\n        var innerAngle = radToDeg * Math.atan(distortion.distort(innerDist / eyeToScreenDistance));\n        var bottomAngle = radToDeg * Math.atan(distortion.distort(bottomDist / eyeToScreenDistance));\n        var topAngle = radToDeg * Math.atan(distortion.distort(topDist / eyeToScreenDistance));\n        return {\n          leftDegrees: Math.min(outerAngle, viewer.fov),\n          rightDegrees: Math.min(innerAngle, viewer.fov),\n          downDegrees: Math.min(bottomAngle, viewer.fov),\n          upDegrees: Math.min(topAngle, viewer.fov)\n        };\n      };\n\n      DeviceInfo.prototype.getLeftEyeVisibleTanAngles = function () {\n        var viewer = this.viewer;\n        var device = this.device;\n        var distortion = this.distortion;\n        var fovLeft = Math.tan(-degToRad * viewer.fov);\n        var fovTop = Math.tan(degToRad * viewer.fov);\n        var fovRight = Math.tan(degToRad * viewer.fov);\n        var fovBottom = Math.tan(-degToRad * viewer.fov);\n        var halfWidth = device.widthMeters / 4;\n        var halfHeight = device.heightMeters / 2;\n        var verticalLensOffset = viewer.baselineLensDistance - device.bevelMeters - halfHeight;\n        var centerX = viewer.interLensDistance / 2 - halfWidth;\n        var centerY = -verticalLensOffset;\n        var centerZ = viewer.screenLensDistance;\n        var screenLeft = distortion.distort((centerX - halfWidth) / centerZ);\n        var screenTop = distortion.distort((centerY + halfHeight) / centerZ);\n        var screenRight = distortion.distort((centerX + halfWidth) / centerZ);\n        var screenBottom = distortion.distort((centerY - halfHeight) / centerZ);\n        var result = new Float32Array(4);\n        result[0] = Math.max(fovLeft, screenLeft);\n        result[1] = Math.min(fovTop, screenTop);\n        result[2] = Math.min(fovRight, screenRight);\n        result[3] = Math.max(fovBottom, screenBottom);\n        return result;\n      };\n\n      DeviceInfo.prototype.getLeftEyeNoLensTanAngles = function () {\n        var viewer = this.viewer;\n        var device = this.device;\n        var distortion = this.distortion;\n        var result = new Float32Array(4);\n        var fovLeft = distortion.distortInverse(Math.tan(-degToRad * viewer.fov));\n        var fovTop = distortion.distortInverse(Math.tan(degToRad * viewer.fov));\n        var fovRight = distortion.distortInverse(Math.tan(degToRad * viewer.fov));\n        var fovBottom = distortion.distortInverse(Math.tan(-degToRad * viewer.fov));\n        var halfWidth = device.widthMeters / 4;\n        var halfHeight = device.heightMeters / 2;\n        var verticalLensOffset = viewer.baselineLensDistance - device.bevelMeters - halfHeight;\n        var centerX = viewer.interLensDistance / 2 - halfWidth;\n        var centerY = -verticalLensOffset;\n        var centerZ = viewer.screenLensDistance;\n        var screenLeft = (centerX - halfWidth) / centerZ;\n        var screenTop = (centerY + halfHeight) / centerZ;\n        var screenRight = (centerX + halfWidth) / centerZ;\n        var screenBottom = (centerY - halfHeight) / centerZ;\n        result[0] = Math.max(fovLeft, screenLeft);\n        result[1] = Math.min(fovTop, screenTop);\n        result[2] = Math.min(fovRight, screenRight);\n        result[3] = Math.max(fovBottom, screenBottom);\n        return result;\n      };\n\n      DeviceInfo.prototype.getLeftEyeVisibleScreenRect = function (undistortedFrustum) {\n        var viewer = this.viewer;\n        var device = this.device;\n        var dist = viewer.screenLensDistance;\n        var eyeX = (device.widthMeters - viewer.interLensDistance) / 2;\n        var eyeY = viewer.baselineLensDistance - device.bevelMeters;\n        var left = (undistortedFrustum[0] * dist + eyeX) / device.widthMeters;\n        var top = (undistortedFrustum[1] * dist + eyeY) / device.heightMeters;\n        var right = (undistortedFrustum[2] * dist + eyeX) / device.widthMeters;\n        var bottom = (undistortedFrustum[3] * dist + eyeY) / device.heightMeters;\n        return {\n          x: left,\n          y: bottom,\n          width: right - left,\n          height: top - bottom\n        };\n      };\n\n      DeviceInfo.prototype.getFieldOfViewLeftEye = function (opt_isUndistorted) {\n        return opt_isUndistorted ? this.getUndistortedFieldOfViewLeftEye() : this.getDistortedFieldOfViewLeftEye();\n      };\n\n      DeviceInfo.prototype.getFieldOfViewRightEye = function (opt_isUndistorted) {\n        var fov = this.getFieldOfViewLeftEye(opt_isUndistorted);\n        return {\n          leftDegrees: fov.rightDegrees,\n          rightDegrees: fov.leftDegrees,\n          upDegrees: fov.upDegrees,\n          downDegrees: fov.downDegrees\n        };\n      };\n\n      DeviceInfo.prototype.getUndistortedFieldOfViewLeftEye = function () {\n        var p = this.getUndistortedParams_();\n        return {\n          leftDegrees: radToDeg * Math.atan(p.outerDist),\n          rightDegrees: radToDeg * Math.atan(p.innerDist),\n          downDegrees: radToDeg * Math.atan(p.bottomDist),\n          upDegrees: radToDeg * Math.atan(p.topDist)\n        };\n      };\n\n      DeviceInfo.prototype.getUndistortedViewportLeftEye = function () {\n        var p = this.getUndistortedParams_();\n        var viewer = this.viewer;\n        var device = this.device;\n        var eyeToScreenDistance = viewer.screenLensDistance;\n        var screenWidth = device.widthMeters / eyeToScreenDistance;\n        var screenHeight = device.heightMeters / eyeToScreenDistance;\n        var xPxPerTanAngle = device.width / screenWidth;\n        var yPxPerTanAngle = device.height / screenHeight;\n        var x = Math.round((p.eyePosX - p.outerDist) * xPxPerTanAngle);\n        var y = Math.round((p.eyePosY - p.bottomDist) * yPxPerTanAngle);\n        return {\n          x: x,\n          y: y,\n          width: Math.round((p.eyePosX + p.innerDist) * xPxPerTanAngle) - x,\n          height: Math.round((p.eyePosY + p.topDist) * yPxPerTanAngle) - y\n        };\n      };\n\n      DeviceInfo.prototype.getUndistortedParams_ = function () {\n        var viewer = this.viewer;\n        var device = this.device;\n        var distortion = this.distortion;\n        var eyeToScreenDistance = viewer.screenLensDistance;\n        var halfLensDistance = viewer.interLensDistance / 2 / eyeToScreenDistance;\n        var screenWidth = device.widthMeters / eyeToScreenDistance;\n        var screenHeight = device.heightMeters / eyeToScreenDistance;\n        var eyePosX = screenWidth / 2 - halfLensDistance;\n        var eyePosY = (viewer.baselineLensDistance - device.bevelMeters) / eyeToScreenDistance;\n        var maxFov = viewer.fov;\n        var viewerMax = distortion.distortInverse(Math.tan(degToRad * maxFov));\n        var outerDist = Math.min(eyePosX, viewerMax);\n        var innerDist = Math.min(halfLensDistance, viewerMax);\n        var bottomDist = Math.min(eyePosY, viewerMax);\n        var topDist = Math.min(screenHeight - eyePosY, viewerMax);\n        return {\n          outerDist: outerDist,\n          innerDist: innerDist,\n          topDist: topDist,\n          bottomDist: bottomDist,\n          eyePosX: eyePosX,\n          eyePosY: eyePosY\n        };\n      };\n\n      function CardboardViewer(params) {\n        this.id = params.id;\n        this.label = params.label;\n        this.fov = params.fov;\n        this.interLensDistance = params.interLensDistance;\n        this.baselineLensDistance = params.baselineLensDistance;\n        this.screenLensDistance = params.screenLensDistance;\n        this.distortionCoefficients = params.distortionCoefficients;\n        this.inverseCoefficients = params.inverseCoefficients;\n      }\n\n      DeviceInfo.Viewers = Viewers;\n      var format = 1;\n      var last_updated = \"2019-11-09T17:36:14Z\";\n      var devices = [{\n        \"type\": \"android\",\n        \"rules\": [{\n          \"mdmh\": \"asus/*/Nexus 7/*\"\n        }, {\n          \"ua\": \"Nexus 7\"\n        }],\n        \"dpi\": [320.8, 323],\n        \"bw\": 3,\n        \"ac\": 500\n      }, {\n        \"type\": \"android\",\n        \"rules\": [{\n          \"mdmh\": \"asus/*/ASUS_X00PD/*\"\n        }, {\n          \"ua\": \"ASUS_X00PD\"\n        }],\n        \"dpi\": 245,\n        \"bw\": 3,\n        \"ac\": 500\n      }, {\n        \"type\": \"android\",\n        \"rules\": [{\n          \"mdmh\": \"asus/*/ASUS_X008D/*\"\n        }, {\n          \"ua\": \"ASUS_X008D\"\n        }],\n        \"dpi\": 282,\n        \"bw\": 3,\n        \"ac\": 500\n      }, {\n        \"type\": \"android\",\n        \"rules\": [{\n          \"mdmh\": \"asus/*/ASUS_Z00AD/*\"\n        }, {\n          \"ua\": \"ASUS_Z00AD\"\n        }],\n        \"dpi\": [403, 404.6],\n        \"bw\": 3,\n        \"ac\": 1000\n      }, {\n        \"type\": \"android\",\n        \"rules\": [{\n          \"mdmh\": \"Google/*/Pixel 2 XL/*\"\n        }, {\n          \"ua\": \"Pixel 2 XL\"\n        }],\n        \"dpi\": 537.9,\n        \"bw\": 3,\n        \"ac\": 1000\n      }, {\n        \"type\": \"android\",\n        \"rules\": [{\n          \"mdmh\": \"Google/*/Pixel 3 XL/*\"\n        }, {\n          \"ua\": \"Pixel 3 XL\"\n        }],\n        \"dpi\": [558.5, 553.8],\n        \"bw\": 3,\n        \"ac\": 1000\n      }, {\n        \"type\": \"android\",\n        \"rules\": [{\n          \"mdmh\": \"Google/*/Pixel XL/*\"\n        }, {\n          \"ua\": \"Pixel XL\"\n        }],\n        \"dpi\": [537.9, 533],\n        \"bw\": 3,\n        \"ac\": 1000\n      }, {\n        \"type\": \"android\",\n        \"rules\": [{\n          \"mdmh\": \"Google/*/Pixel 3/*\"\n        }, {\n          \"ua\": \"Pixel 3\"\n        }],\n        \"dpi\": 442.4,\n        \"bw\": 3,\n        \"ac\": 1000\n      }, {\n        \"type\": \"android\",\n        \"rules\": [{\n          \"mdmh\": \"Google/*/Pixel 2/*\"\n        }, {\n          \"ua\": \"Pixel 2\"\n        }],\n        \"dpi\": 441,\n        \"bw\": 3,\n        \"ac\": 500\n      }, {\n        \"type\": \"android\",\n        \"rules\": [{\n          \"mdmh\": \"Google/*/Pixel/*\"\n        }, {\n          \"ua\": \"Pixel\"\n        }],\n        \"dpi\": [432.6, 436.7],\n        \"bw\": 3,\n        \"ac\": 1000\n      }, {\n        \"type\": \"android\",\n        \"rules\": [{\n          \"mdmh\": \"HTC/*/HTC6435LVW/*\"\n        }, {\n          \"ua\": \"HTC6435LVW\"\n        }],\n        \"dpi\": [449.7, 443.3],\n        \"bw\": 3,\n        \"ac\": 1000\n      }, {\n        \"type\": \"android\",\n        \"rules\": [{\n          \"mdmh\": \"HTC/*/HTC One XL/*\"\n        }, {\n          \"ua\": \"HTC One XL\"\n        }],\n        \"dpi\": [315.3, 314.6],\n        \"bw\": 3,\n        \"ac\": 1000\n      }, {\n        \"type\": \"android\",\n        \"rules\": [{\n          \"mdmh\": \"htc/*/Nexus 9/*\"\n        }, {\n          \"ua\": \"Nexus 9\"\n        }],\n        \"dpi\": 289,\n        \"bw\": 3,\n        \"ac\": 500\n      }, {\n        \"type\": \"android\",\n        \"rules\": [{\n          \"mdmh\": \"HTC/*/HTC One M9/*\"\n        }, {\n          \"ua\": \"HTC One M9\"\n        }],\n        \"dpi\": [442.5, 443.3],\n        \"bw\": 3,\n        \"ac\": 500\n      }, {\n        \"type\": \"android\",\n        \"rules\": [{\n          \"mdmh\": \"HTC/*/HTC One_M8/*\"\n        }, {\n          \"ua\": \"HTC One_M8\"\n        }],\n        \"dpi\": [449.7, 447.4],\n        \"bw\": 3,\n        \"ac\": 500\n      }, {\n        \"type\": \"android\",\n        \"rules\": [{\n          \"mdmh\": \"HTC/*/HTC One/*\"\n        }, {\n          \"ua\": \"HTC One\"\n        }],\n        \"dpi\": 472.8,\n        \"bw\": 3,\n        \"ac\": 1000\n      }, {\n        \"type\": \"android\",\n        \"rules\": [{\n          \"mdmh\": \"Huawei/*/Nexus 6P/*\"\n        }, {\n          \"ua\": \"Nexus 6P\"\n        }],\n        \"dpi\": [515.1, 518],\n        \"bw\": 3,\n        \"ac\": 1000\n      }, {\n        \"type\": \"android\",\n        \"rules\": [{\n          \"mdmh\": \"Huawei/*/BLN-L24/*\"\n        }, {\n          \"ua\": \"HONORBLN-L24\"\n        }],\n        \"dpi\": 480,\n        \"bw\": 4,\n        \"ac\": 500\n      }, {\n        \"type\": \"android\",\n        \"rules\": [{\n          \"mdmh\": \"Huawei/*/BKL-L09/*\"\n        }, {\n          \"ua\": \"BKL-L09\"\n        }],\n        \"dpi\": 403,\n        \"bw\": 3.47,\n        \"ac\": 500\n      }, {\n        \"type\": \"android\",\n        \"rules\": [{\n          \"mdmh\": \"LENOVO/*/Lenovo PB2-690Y/*\"\n        }, {\n          \"ua\": \"Lenovo PB2-690Y\"\n        }],\n        \"dpi\": [457.2, 454.713],\n        \"bw\": 3,\n        \"ac\": 500\n      }, {\n        \"type\": \"android\",\n        \"rules\": [{\n          \"mdmh\": \"LGE/*/Nexus 5X/*\"\n        }, {\n          \"ua\": \"Nexus 5X\"\n        }],\n        \"dpi\": [422, 419.9],\n        \"bw\": 3,\n        \"ac\": 1000\n      }, {\n        \"type\": \"android\",\n        \"rules\": [{\n          \"mdmh\": \"LGE/*/LGMS345/*\"\n        }, {\n          \"ua\": \"LGMS345\"\n        }],\n        \"dpi\": [221.7, 219.1],\n        \"bw\": 3,\n        \"ac\": 500\n      }, {\n        \"type\": \"android\",\n        \"rules\": [{\n          \"mdmh\": \"LGE/*/LG-D800/*\"\n        }, {\n          \"ua\": \"LG-D800\"\n        }],\n        \"dpi\": [422, 424.1],\n        \"bw\": 3,\n        \"ac\": 500\n      }, {\n        \"type\": \"android\",\n        \"rules\": [{\n          \"mdmh\": \"LGE/*/LG-D850/*\"\n        }, {\n          \"ua\": \"LG-D850\"\n        }],\n        \"dpi\": [537.9, 541.9],\n        \"bw\": 3,\n        \"ac\": 500\n      }, {\n        \"type\": \"android\",\n        \"rules\": [{\n          \"mdmh\": \"LGE/*/VS985 4G/*\"\n        }, {\n          \"ua\": \"VS985 4G\"\n        }],\n        \"dpi\": [537.9, 535.6],\n        \"bw\": 3,\n        \"ac\": 1000\n      }, {\n        \"type\": \"android\",\n        \"rules\": [{\n          \"mdmh\": \"LGE/*/Nexus 5/*\"\n        }, {\n          \"ua\": \"Nexus 5 B\"\n        }],\n        \"dpi\": [442.4, 444.8],\n        \"bw\": 3,\n        \"ac\": 1000\n      }, {\n        \"type\": \"android\",\n        \"rules\": [{\n          \"mdmh\": \"LGE/*/Nexus 4/*\"\n        }, {\n          \"ua\": \"Nexus 4\"\n        }],\n        \"dpi\": [319.8, 318.4],\n        \"bw\": 3,\n        \"ac\": 1000\n      }, {\n        \"type\": \"android\",\n        \"rules\": [{\n          \"mdmh\": \"LGE/*/LG-P769/*\"\n        }, {\n          \"ua\": \"LG-P769\"\n        }],\n        \"dpi\": [240.6, 247.5],\n        \"bw\": 3,\n        \"ac\": 1000\n      }, {\n        \"type\": \"android\",\n        \"rules\": [{\n          \"mdmh\": \"LGE/*/LGMS323/*\"\n        }, {\n          \"ua\": \"LGMS323\"\n        }],\n        \"dpi\": [206.6, 204.6],\n        \"bw\": 3,\n        \"ac\": 1000\n      }, {\n        \"type\": \"android\",\n        \"rules\": [{\n          \"mdmh\": \"LGE/*/LGLS996/*\"\n        }, {\n          \"ua\": \"LGLS996\"\n        }],\n        \"dpi\": [403.4, 401.5],\n        \"bw\": 3,\n        \"ac\": 1000\n      }, {\n        \"type\": \"android\",\n        \"rules\": [{\n          \"mdmh\": \"Micromax/*/4560MMX/*\"\n        }, {\n          \"ua\": \"4560MMX\"\n        }],\n        \"dpi\": [240, 219.4],\n        \"bw\": 3,\n        \"ac\": 1000\n      }, {\n        \"type\": \"android\",\n        \"rules\": [{\n          \"mdmh\": \"Micromax/*/A250/*\"\n        }, {\n          \"ua\": \"Micromax A250\"\n        }],\n        \"dpi\": [480, 446.4],\n        \"bw\": 3,\n        \"ac\": 1000\n      }, {\n        \"type\": \"android\",\n        \"rules\": [{\n          \"mdmh\": \"Micromax/*/Micromax AQ4501/*\"\n        }, {\n          \"ua\": \"Micromax AQ4501\"\n        }],\n        \"dpi\": 240,\n        \"bw\": 3,\n        \"ac\": 500\n      }, {\n        \"type\": \"android\",\n        \"rules\": [{\n          \"mdmh\": \"motorola/*/G5/*\"\n        }, {\n          \"ua\": \"Moto G (5) Plus\"\n        }],\n        \"dpi\": [403.4, 403],\n        \"bw\": 3,\n        \"ac\": 1000\n      }, {\n        \"type\": \"android\",\n        \"rules\": [{\n          \"mdmh\": \"motorola/*/DROID RAZR/*\"\n        }, {\n          \"ua\": \"DROID RAZR\"\n        }],\n        \"dpi\": [368.1, 256.7],\n        \"bw\": 3,\n        \"ac\": 1000\n      }, {\n        \"type\": \"android\",\n        \"rules\": [{\n          \"mdmh\": \"motorola/*/XT830C/*\"\n        }, {\n          \"ua\": \"XT830C\"\n        }],\n        \"dpi\": [254, 255.9],\n        \"bw\": 3,\n        \"ac\": 1000\n      }, {\n        \"type\": \"android\",\n        \"rules\": [{\n          \"mdmh\": \"motorola/*/XT1021/*\"\n        }, {\n          \"ua\": \"XT1021\"\n        }],\n        \"dpi\": [254, 256.7],\n        \"bw\": 3,\n        \"ac\": 500\n      }, {\n        \"type\": \"android\",\n        \"rules\": [{\n          \"mdmh\": \"motorola/*/XT1023/*\"\n        }, {\n          \"ua\": \"XT1023\"\n        }],\n        \"dpi\": [254, 256.7],\n        \"bw\": 3,\n        \"ac\": 500\n      }, {\n        \"type\": \"android\",\n        \"rules\": [{\n          \"mdmh\": \"motorola/*/XT1028/*\"\n        }, {\n          \"ua\": \"XT1028\"\n        }],\n        \"dpi\": [326.6, 327.6],\n        \"bw\": 3,\n        \"ac\": 1000\n      }, {\n        \"type\": \"android\",\n        \"rules\": [{\n          \"mdmh\": \"motorola/*/XT1034/*\"\n        }, {\n          \"ua\": \"XT1034\"\n        }],\n        \"dpi\": [326.6, 328.4],\n        \"bw\": 3,\n        \"ac\": 500\n      }, {\n        \"type\": \"android\",\n        \"rules\": [{\n          \"mdmh\": \"motorola/*/XT1053/*\"\n        }, {\n          \"ua\": \"XT1053\"\n        }],\n        \"dpi\": [315.3, 316.1],\n        \"bw\": 3,\n        \"ac\": 1000\n      }, {\n        \"type\": \"android\",\n        \"rules\": [{\n          \"mdmh\": \"motorola/*/XT1562/*\"\n        }, {\n          \"ua\": \"XT1562\"\n        }],\n        \"dpi\": [403.4, 402.7],\n        \"bw\": 3,\n        \"ac\": 1000\n      }, {\n        \"type\": \"android\",\n        \"rules\": [{\n          \"mdmh\": \"motorola/*/Nexus 6/*\"\n        }, {\n          \"ua\": \"Nexus 6 B\"\n        }],\n        \"dpi\": [494.3, 489.7],\n        \"bw\": 3,\n        \"ac\": 1000\n      }, {\n        \"type\": \"android\",\n        \"rules\": [{\n          \"mdmh\": \"motorola/*/XT1063/*\"\n        }, {\n          \"ua\": \"XT1063\"\n        }],\n        \"dpi\": [295, 296.6],\n        \"bw\": 3,\n        \"ac\": 1000\n      }, {\n        \"type\": \"android\",\n        \"rules\": [{\n          \"mdmh\": \"motorola/*/XT1064/*\"\n        }, {\n          \"ua\": \"XT1064\"\n        }],\n        \"dpi\": [295, 295.6],\n        \"bw\": 3,\n        \"ac\": 500\n      }, {\n        \"type\": \"android\",\n        \"rules\": [{\n          \"mdmh\": \"motorola/*/XT1092/*\"\n        }, {\n          \"ua\": \"XT1092\"\n        }],\n        \"dpi\": [422, 424.1],\n        \"bw\": 3,\n        \"ac\": 500\n      }, {\n        \"type\": \"android\",\n        \"rules\": [{\n          \"mdmh\": \"motorola/*/XT1095/*\"\n        }, {\n          \"ua\": \"XT1095\"\n        }],\n        \"dpi\": [422, 423.4],\n        \"bw\": 3,\n        \"ac\": 1000\n      }, {\n        \"type\": \"android\",\n        \"rules\": [{\n          \"mdmh\": \"motorola/*/G4/*\"\n        }, {\n          \"ua\": \"Moto G (4)\"\n        }],\n        \"dpi\": 401,\n        \"bw\": 4,\n        \"ac\": 1000\n      }, {\n        \"type\": \"android\",\n        \"rules\": [{\n          \"mdmh\": \"OnePlus/*/A0001/*\"\n        }, {\n          \"ua\": \"A0001\"\n        }],\n        \"dpi\": [403.4, 401],\n        \"bw\": 3,\n        \"ac\": 1000\n      }, {\n        \"type\": \"android\",\n        \"rules\": [{\n          \"mdmh\": \"OnePlus/*/ONE E1001/*\"\n        }, {\n          \"ua\": \"ONE E1001\"\n        }],\n        \"dpi\": [442.4, 441.4],\n        \"bw\": 3,\n        \"ac\": 1000\n      }, {\n        \"type\": \"android\",\n        \"rules\": [{\n          \"mdmh\": \"OnePlus/*/ONE E1003/*\"\n        }, {\n          \"ua\": \"ONE E1003\"\n        }],\n        \"dpi\": [442.4, 441.4],\n        \"bw\": 3,\n        \"ac\": 1000\n      }, {\n        \"type\": \"android\",\n        \"rules\": [{\n          \"mdmh\": \"OnePlus/*/ONE E1005/*\"\n        }, {\n          \"ua\": \"ONE E1005\"\n        }],\n        \"dpi\": [442.4, 441.4],\n        \"bw\": 3,\n        \"ac\": 1000\n      }, {\n        \"type\": \"android\",\n        \"rules\": [{\n          \"mdmh\": \"OnePlus/*/ONE A2001/*\"\n        }, {\n          \"ua\": \"ONE A2001\"\n        }],\n        \"dpi\": [391.9, 405.4],\n        \"bw\": 3,\n        \"ac\": 1000\n      }, {\n        \"type\": \"android\",\n        \"rules\": [{\n          \"mdmh\": \"OnePlus/*/ONE A2003/*\"\n        }, {\n          \"ua\": \"ONE A2003\"\n        }],\n        \"dpi\": [391.9, 405.4],\n        \"bw\": 3,\n        \"ac\": 1000\n      }, {\n        \"type\": \"android\",\n        \"rules\": [{\n          \"mdmh\": \"OnePlus/*/ONE A2005/*\"\n        }, {\n          \"ua\": \"ONE A2005\"\n        }],\n        \"dpi\": [391.9, 405.4],\n        \"bw\": 3,\n        \"ac\": 1000\n      }, {\n        \"type\": \"android\",\n        \"rules\": [{\n          \"mdmh\": \"OnePlus/*/ONEPLUS A3000/*\"\n        }, {\n          \"ua\": \"ONEPLUS A3000\"\n        }],\n        \"dpi\": 401,\n        \"bw\": 3,\n        \"ac\": 500\n      }, {\n        \"type\": \"android\",\n        \"rules\": [{\n          \"mdmh\": \"OnePlus/*/ONEPLUS A3003/*\"\n        }, {\n          \"ua\": \"ONEPLUS A3003\"\n        }],\n        \"dpi\": 401,\n        \"bw\": 3,\n        \"ac\": 500\n      }, {\n        \"type\": \"android\",\n        \"rules\": [{\n          \"mdmh\": \"OnePlus/*/ONEPLUS A3010/*\"\n        }, {\n          \"ua\": \"ONEPLUS A3010\"\n        }],\n        \"dpi\": 401,\n        \"bw\": 3,\n        \"ac\": 500\n      }, {\n        \"type\": \"android\",\n        \"rules\": [{\n          \"mdmh\": \"OnePlus/*/ONEPLUS A5000/*\"\n        }, {\n          \"ua\": \"ONEPLUS A5000 \"\n        }],\n        \"dpi\": [403.411, 399.737],\n        \"bw\": 3,\n        \"ac\": 1000\n      }, {\n        \"type\": \"android\",\n        \"rules\": [{\n          \"mdmh\": \"OnePlus/*/ONE A5010/*\"\n        }, {\n          \"ua\": \"ONEPLUS A5010\"\n        }],\n        \"dpi\": [403, 400],\n        \"bw\": 2,\n        \"ac\": 1000\n      }, {\n        \"type\": \"android\",\n        \"rules\": [{\n          \"mdmh\": \"OnePlus/*/ONEPLUS A6000/*\"\n        }, {\n          \"ua\": \"ONEPLUS A6000\"\n        }],\n        \"dpi\": 401,\n        \"bw\": 3,\n        \"ac\": 500\n      }, {\n        \"type\": \"android\",\n        \"rules\": [{\n          \"mdmh\": \"OnePlus/*/ONEPLUS A6003/*\"\n        }, {\n          \"ua\": \"ONEPLUS A6003\"\n        }],\n        \"dpi\": 401,\n        \"bw\": 3,\n        \"ac\": 500\n      }, {\n        \"type\": \"android\",\n        \"rules\": [{\n          \"mdmh\": \"OnePlus/*/ONEPLUS A6010/*\"\n        }, {\n          \"ua\": \"ONEPLUS A6010\"\n        }],\n        \"dpi\": 401,\n        \"bw\": 2,\n        \"ac\": 500\n      }, {\n        \"type\": \"android\",\n        \"rules\": [{\n          \"mdmh\": \"OnePlus/*/ONEPLUS A6013/*\"\n        }, {\n          \"ua\": \"ONEPLUS A6013\"\n        }],\n        \"dpi\": 401,\n        \"bw\": 2,\n        \"ac\": 500\n      }, {\n        \"type\": \"android\",\n        \"rules\": [{\n          \"mdmh\": \"OPPO/*/X909/*\"\n        }, {\n          \"ua\": \"X909\"\n        }],\n        \"dpi\": [442.4, 444.1],\n        \"bw\": 3,\n        \"ac\": 1000\n      }, {\n        \"type\": \"android\",\n        \"rules\": [{\n          \"mdmh\": \"samsung/*/GT-I9082/*\"\n        }, {\n          \"ua\": \"GT-I9082\"\n        }],\n        \"dpi\": [184.7, 185.4],\n        \"bw\": 3,\n        \"ac\": 1000\n      }, {\n        \"type\": \"android\",\n        \"rules\": [{\n          \"mdmh\": \"samsung/*/SM-G360P/*\"\n        }, {\n          \"ua\": \"SM-G360P\"\n        }],\n        \"dpi\": [196.7, 205.4],\n        \"bw\": 3,\n        \"ac\": 1000\n      }, {\n        \"type\": \"android\",\n        \"rules\": [{\n          \"mdmh\": \"samsung/*/Nexus S/*\"\n        }, {\n          \"ua\": \"Nexus S\"\n        }],\n        \"dpi\": [234.5, 229.8],\n        \"bw\": 3,\n        \"ac\": 1000\n      }, {\n        \"type\": \"android\",\n        \"rules\": [{\n          \"mdmh\": \"samsung/*/GT-I9300/*\"\n        }, {\n          \"ua\": \"GT-I9300\"\n        }],\n        \"dpi\": [304.8, 303.9],\n        \"bw\": 5,\n        \"ac\": 500\n      }, {\n        \"type\": \"android\",\n        \"rules\": [{\n          \"mdmh\": \"samsung/*/SM-T230NU/*\"\n        }, {\n          \"ua\": \"SM-T230NU\"\n        }],\n        \"dpi\": 216,\n        \"bw\": 3,\n        \"ac\": 500\n      }, {\n        \"type\": \"android\",\n        \"rules\": [{\n          \"mdmh\": \"samsung/*/SGH-T399/*\"\n        }, {\n          \"ua\": \"SGH-T399\"\n        }],\n        \"dpi\": [217.7, 231.4],\n        \"bw\": 3,\n        \"ac\": 1000\n      }, {\n        \"type\": \"android\",\n        \"rules\": [{\n          \"mdmh\": \"samsung/*/SGH-M919/*\"\n        }, {\n          \"ua\": \"SGH-M919\"\n        }],\n        \"dpi\": [440.8, 437.7],\n        \"bw\": 3,\n        \"ac\": 1000\n      }, {\n        \"type\": \"android\",\n        \"rules\": [{\n          \"mdmh\": \"samsung/*/SM-N9005/*\"\n        }, {\n          \"ua\": \"SM-N9005\"\n        }],\n        \"dpi\": [386.4, 387],\n        \"bw\": 3,\n        \"ac\": 500\n      }, {\n        \"type\": \"android\",\n        \"rules\": [{\n          \"mdmh\": \"samsung/*/SAMSUNG-SM-N900A/*\"\n        }, {\n          \"ua\": \"SAMSUNG-SM-N900A\"\n        }],\n        \"dpi\": [386.4, 387.7],\n        \"bw\": 3,\n        \"ac\": 1000\n      }, {\n        \"type\": \"android\",\n        \"rules\": [{\n          \"mdmh\": \"samsung/*/GT-I9500/*\"\n        }, {\n          \"ua\": \"GT-I9500\"\n        }],\n        \"dpi\": [442.5, 443.3],\n        \"bw\": 3,\n        \"ac\": 500\n      }, {\n        \"type\": \"android\",\n        \"rules\": [{\n          \"mdmh\": \"samsung/*/GT-I9505/*\"\n        }, {\n          \"ua\": \"GT-I9505\"\n        }],\n        \"dpi\": 439.4,\n        \"bw\": 4,\n        \"ac\": 1000\n      }, {\n        \"type\": \"android\",\n        \"rules\": [{\n          \"mdmh\": \"samsung/*/SM-G900F/*\"\n        }, {\n          \"ua\": \"SM-G900F\"\n        }],\n        \"dpi\": [415.6, 431.6],\n        \"bw\": 5,\n        \"ac\": 1000\n      }, {\n        \"type\": \"android\",\n        \"rules\": [{\n          \"mdmh\": \"samsung/*/SM-G900M/*\"\n        }, {\n          \"ua\": \"SM-G900M\"\n        }],\n        \"dpi\": [415.6, 431.6],\n        \"bw\": 5,\n        \"ac\": 1000\n      }, {\n        \"type\": \"android\",\n        \"rules\": [{\n          \"mdmh\": \"samsung/*/SM-G800F/*\"\n        }, {\n          \"ua\": \"SM-G800F\"\n        }],\n        \"dpi\": 326.8,\n        \"bw\": 3,\n        \"ac\": 1000\n      }, {\n        \"type\": \"android\",\n        \"rules\": [{\n          \"mdmh\": \"samsung/*/SM-G906S/*\"\n        }, {\n          \"ua\": \"SM-G906S\"\n        }],\n        \"dpi\": [562.7, 572.4],\n        \"bw\": 3,\n        \"ac\": 1000\n      }, {\n        \"type\": \"android\",\n        \"rules\": [{\n          \"mdmh\": \"samsung/*/GT-I9300/*\"\n        }, {\n          \"ua\": \"GT-I9300\"\n        }],\n        \"dpi\": [306.7, 304.8],\n        \"bw\": 5,\n        \"ac\": 1000\n      }, {\n        \"type\": \"android\",\n        \"rules\": [{\n          \"mdmh\": \"samsung/*/SM-T535/*\"\n        }, {\n          \"ua\": \"SM-T535\"\n        }],\n        \"dpi\": [142.6, 136.4],\n        \"bw\": 3,\n        \"ac\": 500\n      }, {\n        \"type\": \"android\",\n        \"rules\": [{\n          \"mdmh\": \"samsung/*/SM-N920C/*\"\n        }, {\n          \"ua\": \"SM-N920C\"\n        }],\n        \"dpi\": [515.1, 518.4],\n        \"bw\": 3,\n        \"ac\": 1000\n      }, {\n        \"type\": \"android\",\n        \"rules\": [{\n          \"mdmh\": \"samsung/*/SM-N920P/*\"\n        }, {\n          \"ua\": \"SM-N920P\"\n        }],\n        \"dpi\": [386.3655, 390.144],\n        \"bw\": 3,\n        \"ac\": 1000\n      }, {\n        \"type\": \"android\",\n        \"rules\": [{\n          \"mdmh\": \"samsung/*/SM-N920W8/*\"\n        }, {\n          \"ua\": \"SM-N920W8\"\n        }],\n        \"dpi\": [515.1, 518.4],\n        \"bw\": 3,\n        \"ac\": 1000\n      }, {\n        \"type\": \"android\",\n        \"rules\": [{\n          \"mdmh\": \"samsung/*/GT-I9300I/*\"\n        }, {\n          \"ua\": \"GT-I9300I\"\n        }],\n        \"dpi\": [304.8, 305.8],\n        \"bw\": 3,\n        \"ac\": 1000\n      }, {\n        \"type\": \"android\",\n        \"rules\": [{\n          \"mdmh\": \"samsung/*/GT-I9195/*\"\n        }, {\n          \"ua\": \"GT-I9195\"\n        }],\n        \"dpi\": [249.4, 256.7],\n        \"bw\": 3,\n        \"ac\": 500\n      }, {\n        \"type\": \"android\",\n        \"rules\": [{\n          \"mdmh\": \"samsung/*/SPH-L520/*\"\n        }, {\n          \"ua\": \"SPH-L520\"\n        }],\n        \"dpi\": [249.4, 255.9],\n        \"bw\": 3,\n        \"ac\": 1000\n      }, {\n        \"type\": \"android\",\n        \"rules\": [{\n          \"mdmh\": \"samsung/*/SAMSUNG-SGH-I717/*\"\n        }, {\n          \"ua\": \"SAMSUNG-SGH-I717\"\n        }],\n        \"dpi\": 285.8,\n        \"bw\": 3,\n        \"ac\": 1000\n      }, {\n        \"type\": \"android\",\n        \"rules\": [{\n          \"mdmh\": \"samsung/*/SPH-D710/*\"\n        }, {\n          \"ua\": \"SPH-D710\"\n        }],\n        \"dpi\": [217.7, 204.2],\n        \"bw\": 3,\n        \"ac\": 1000\n      }, {\n        \"type\": \"android\",\n        \"rules\": [{\n          \"mdmh\": \"samsung/*/GT-N7100/*\"\n        }, {\n          \"ua\": \"GT-N7100\"\n        }],\n        \"dpi\": 265.1,\n        \"bw\": 3,\n        \"ac\": 1000\n      }, {\n        \"type\": \"android\",\n        \"rules\": [{\n          \"mdmh\": \"samsung/*/SCH-I605/*\"\n        }, {\n          \"ua\": \"SCH-I605\"\n        }],\n        \"dpi\": 265.1,\n        \"bw\": 3,\n        \"ac\": 1000\n      }, {\n        \"type\": \"android\",\n        \"rules\": [{\n          \"mdmh\": \"samsung/*/Galaxy Nexus/*\"\n        }, {\n          \"ua\": \"Galaxy Nexus\"\n        }],\n        \"dpi\": [315.3, 314.2],\n        \"bw\": 3,\n        \"ac\": 1000\n      }, {\n        \"type\": \"android\",\n        \"rules\": [{\n          \"mdmh\": \"samsung/*/SM-N910H/*\"\n        }, {\n          \"ua\": \"SM-N910H\"\n        }],\n        \"dpi\": [515.1, 518],\n        \"bw\": 3,\n        \"ac\": 1000\n      }, {\n        \"type\": \"android\",\n        \"rules\": [{\n          \"mdmh\": \"samsung/*/SM-N910C/*\"\n        }, {\n          \"ua\": \"SM-N910C\"\n        }],\n        \"dpi\": [515.2, 520.2],\n        \"bw\": 3,\n        \"ac\": 500\n      }, {\n        \"type\": \"android\",\n        \"rules\": [{\n          \"mdmh\": \"samsung/*/SM-G130M/*\"\n        }, {\n          \"ua\": \"SM-G130M\"\n        }],\n        \"dpi\": [165.9, 164.8],\n        \"bw\": 3,\n        \"ac\": 500\n      }, {\n        \"type\": \"android\",\n        \"rules\": [{\n          \"mdmh\": \"samsung/*/SM-G928I/*\"\n        }, {\n          \"ua\": \"SM-G928I\"\n        }],\n        \"dpi\": [515.1, 518.4],\n        \"bw\": 3,\n        \"ac\": 1000\n      }, {\n        \"type\": \"android\",\n        \"rules\": [{\n          \"mdmh\": \"samsung/*/SM-G920F/*\"\n        }, {\n          \"ua\": \"SM-G920F\"\n        }],\n        \"dpi\": 580.6,\n        \"bw\": 3,\n        \"ac\": 500\n      }, {\n        \"type\": \"android\",\n        \"rules\": [{\n          \"mdmh\": \"samsung/*/SM-G920P/*\"\n        }, {\n          \"ua\": \"SM-G920P\"\n        }],\n        \"dpi\": [522.5, 577],\n        \"bw\": 3,\n        \"ac\": 1000\n      }, {\n        \"type\": \"android\",\n        \"rules\": [{\n          \"mdmh\": \"samsung/*/SM-G925F/*\"\n        }, {\n          \"ua\": \"SM-G925F\"\n        }],\n        \"dpi\": 580.6,\n        \"bw\": 3,\n        \"ac\": 500\n      }, {\n        \"type\": \"android\",\n        \"rules\": [{\n          \"mdmh\": \"samsung/*/SM-G925V/*\"\n        }, {\n          \"ua\": \"SM-G925V\"\n        }],\n        \"dpi\": [522.5, 576.6],\n        \"bw\": 3,\n        \"ac\": 1000\n      }, {\n        \"type\": \"android\",\n        \"rules\": [{\n          \"mdmh\": \"samsung/*/SM-G930F/*\"\n        }, {\n          \"ua\": \"SM-G930F\"\n        }],\n        \"dpi\": 576.6,\n        \"bw\": 3,\n        \"ac\": 1000\n      }, {\n        \"type\": \"android\",\n        \"rules\": [{\n          \"mdmh\": \"samsung/*/SM-G935F/*\"\n        }, {\n          \"ua\": \"SM-G935F\"\n        }],\n        \"dpi\": 533,\n        \"bw\": 3,\n        \"ac\": 500\n      }, {\n        \"type\": \"android\",\n        \"rules\": [{\n          \"mdmh\": \"samsung/*/SM-G950F/*\"\n        }, {\n          \"ua\": \"SM-G950F\"\n        }],\n        \"dpi\": [562.707, 565.293],\n        \"bw\": 3,\n        \"ac\": 500\n      }, {\n        \"type\": \"android\",\n        \"rules\": [{\n          \"mdmh\": \"samsung/*/SM-G955U/*\"\n        }, {\n          \"ua\": \"SM-G955U\"\n        }],\n        \"dpi\": [522.514, 525.762],\n        \"bw\": 3,\n        \"ac\": 500\n      }, {\n        \"type\": \"android\",\n        \"rules\": [{\n          \"mdmh\": \"samsung/*/SM-G955F/*\"\n        }, {\n          \"ua\": \"SM-G955F\"\n        }],\n        \"dpi\": [522.514, 525.762],\n        \"bw\": 3,\n        \"ac\": 500\n      }, {\n        \"type\": \"android\",\n        \"rules\": [{\n          \"mdmh\": \"samsung/*/SM-G960F/*\"\n        }, {\n          \"ua\": \"SM-G960F\"\n        }],\n        \"dpi\": [569.575, 571.5],\n        \"bw\": 3,\n        \"ac\": 1000\n      }, {\n        \"type\": \"android\",\n        \"rules\": [{\n          \"mdmh\": \"samsung/*/SM-G9600/*\"\n        }, {\n          \"ua\": \"SM-G9600\"\n        }],\n        \"dpi\": [569.575, 571.5],\n        \"bw\": 3,\n        \"ac\": 1000\n      }, {\n        \"type\": \"android\",\n        \"rules\": [{\n          \"mdmh\": \"samsung/*/SM-G960T/*\"\n        }, {\n          \"ua\": \"SM-G960T\"\n        }],\n        \"dpi\": [569.575, 571.5],\n        \"bw\": 3,\n        \"ac\": 1000\n      }, {\n        \"type\": \"android\",\n        \"rules\": [{\n          \"mdmh\": \"samsung/*/SM-G960N/*\"\n        }, {\n          \"ua\": \"SM-G960N\"\n        }],\n        \"dpi\": [569.575, 571.5],\n        \"bw\": 3,\n        \"ac\": 1000\n      }, {\n        \"type\": \"android\",\n        \"rules\": [{\n          \"mdmh\": \"samsung/*/SM-G960U/*\"\n        }, {\n          \"ua\": \"SM-G960U\"\n        }],\n        \"dpi\": [569.575, 571.5],\n        \"bw\": 3,\n        \"ac\": 1000\n      }, {\n        \"type\": \"android\",\n        \"rules\": [{\n          \"mdmh\": \"samsung/*/SM-G9608/*\"\n        }, {\n          \"ua\": \"SM-G9608\"\n        }],\n        \"dpi\": [569.575, 571.5],\n        \"bw\": 3,\n        \"ac\": 1000\n      }, {\n        \"type\": \"android\",\n        \"rules\": [{\n          \"mdmh\": \"samsung/*/SM-G960FD/*\"\n        }, {\n          \"ua\": \"SM-G960FD\"\n        }],\n        \"dpi\": [569.575, 571.5],\n        \"bw\": 3,\n        \"ac\": 1000\n      }, {\n        \"type\": \"android\",\n        \"rules\": [{\n          \"mdmh\": \"samsung/*/SM-G960W/*\"\n        }, {\n          \"ua\": \"SM-G960W\"\n        }],\n        \"dpi\": [569.575, 571.5],\n        \"bw\": 3,\n        \"ac\": 1000\n      }, {\n        \"type\": \"android\",\n        \"rules\": [{\n          \"mdmh\": \"samsung/*/SM-G965F/*\"\n        }, {\n          \"ua\": \"SM-G965F\"\n        }],\n        \"dpi\": 529,\n        \"bw\": 2,\n        \"ac\": 1000\n      }, {\n        \"type\": \"android\",\n        \"rules\": [{\n          \"mdmh\": \"Sony/*/C6903/*\"\n        }, {\n          \"ua\": \"C6903\"\n        }],\n        \"dpi\": [442.5, 443.3],\n        \"bw\": 3,\n        \"ac\": 500\n      }, {\n        \"type\": \"android\",\n        \"rules\": [{\n          \"mdmh\": \"Sony/*/D6653/*\"\n        }, {\n          \"ua\": \"D6653\"\n        }],\n        \"dpi\": [428.6, 427.6],\n        \"bw\": 3,\n        \"ac\": 1000\n      }, {\n        \"type\": \"android\",\n        \"rules\": [{\n          \"mdmh\": \"Sony/*/E6653/*\"\n        }, {\n          \"ua\": \"E6653\"\n        }],\n        \"dpi\": [428.6, 425.7],\n        \"bw\": 3,\n        \"ac\": 1000\n      }, {\n        \"type\": \"android\",\n        \"rules\": [{\n          \"mdmh\": \"Sony/*/E6853/*\"\n        }, {\n          \"ua\": \"E6853\"\n        }],\n        \"dpi\": [403.4, 401.9],\n        \"bw\": 3,\n        \"ac\": 1000\n      }, {\n        \"type\": \"android\",\n        \"rules\": [{\n          \"mdmh\": \"Sony/*/SGP321/*\"\n        }, {\n          \"ua\": \"SGP321\"\n        }],\n        \"dpi\": [224.7, 224.1],\n        \"bw\": 3,\n        \"ac\": 500\n      }, {\n        \"type\": \"android\",\n        \"rules\": [{\n          \"mdmh\": \"TCT/*/ALCATEL ONE TOUCH Fierce/*\"\n        }, {\n          \"ua\": \"ALCATEL ONE TOUCH Fierce\"\n        }],\n        \"dpi\": [240, 247.5],\n        \"bw\": 3,\n        \"ac\": 1000\n      }, {\n        \"type\": \"android\",\n        \"rules\": [{\n          \"mdmh\": \"THL/*/thl 5000/*\"\n        }, {\n          \"ua\": \"thl 5000\"\n        }],\n        \"dpi\": [480, 443.3],\n        \"bw\": 3,\n        \"ac\": 1000\n      }, {\n        \"type\": \"android\",\n        \"rules\": [{\n          \"mdmh\": \"Fly/*/IQ4412/*\"\n        }, {\n          \"ua\": \"IQ4412\"\n        }],\n        \"dpi\": 307.9,\n        \"bw\": 3,\n        \"ac\": 1000\n      }, {\n        \"type\": \"android\",\n        \"rules\": [{\n          \"mdmh\": \"ZTE/*/ZTE Blade L2/*\"\n        }, {\n          \"ua\": \"ZTE Blade L2\"\n        }],\n        \"dpi\": 240,\n        \"bw\": 3,\n        \"ac\": 500\n      }, {\n        \"type\": \"android\",\n        \"rules\": [{\n          \"mdmh\": \"BENEVE/*/VR518/*\"\n        }, {\n          \"ua\": \"VR518\"\n        }],\n        \"dpi\": 480,\n        \"bw\": 3,\n        \"ac\": 500\n      }, {\n        \"type\": \"ios\",\n        \"rules\": [{\n          \"res\": [640, 960]\n        }],\n        \"dpi\": [325.1, 328.4],\n        \"bw\": 4,\n        \"ac\": 1000\n      }, {\n        \"type\": \"ios\",\n        \"rules\": [{\n          \"res\": [640, 1136]\n        }],\n        \"dpi\": [317.1, 320.2],\n        \"bw\": 3,\n        \"ac\": 1000\n      }, {\n        \"type\": \"ios\",\n        \"rules\": [{\n          \"res\": [750, 1334]\n        }],\n        \"dpi\": 326.4,\n        \"bw\": 4,\n        \"ac\": 1000\n      }, {\n        \"type\": \"ios\",\n        \"rules\": [{\n          \"res\": [1242, 2208]\n        }],\n        \"dpi\": [453.6, 458.4],\n        \"bw\": 4,\n        \"ac\": 1000\n      }, {\n        \"type\": \"ios\",\n        \"rules\": [{\n          \"res\": [1125, 2001]\n        }],\n        \"dpi\": [410.9, 415.4],\n        \"bw\": 4,\n        \"ac\": 1000\n      }, {\n        \"type\": \"ios\",\n        \"rules\": [{\n          \"res\": [1125, 2436]\n        }],\n        \"dpi\": 458,\n        \"bw\": 4,\n        \"ac\": 1000\n      }, {\n        \"type\": \"android\",\n        \"rules\": [{\n          \"mdmh\": \"Huawei/*/EML-L29/*\"\n        }, {\n          \"ua\": \"EML-L29\"\n        }],\n        \"dpi\": 428,\n        \"bw\": 3.45,\n        \"ac\": 500\n      }, {\n        \"type\": \"android\",\n        \"rules\": [{\n          \"mdmh\": \"Nokia/*/Nokia 7.1/*\"\n        }, {\n          \"ua\": \"Nokia 7.1\"\n        }],\n        \"dpi\": [432, 431.9],\n        \"bw\": 3,\n        \"ac\": 500\n      }, {\n        \"type\": \"ios\",\n        \"rules\": [{\n          \"res\": [1242, 2688]\n        }],\n        \"dpi\": 458,\n        \"bw\": 4,\n        \"ac\": 1000\n      }, {\n        \"type\": \"android\",\n        \"rules\": [{\n          \"mdmh\": \"samsung/*/SM-G570M/*\"\n        }, {\n          \"ua\": \"SM-G570M\"\n        }],\n        \"dpi\": 320,\n        \"bw\": 3.684,\n        \"ac\": 1000\n      }, {\n        \"type\": \"android\",\n        \"rules\": [{\n          \"mdmh\": \"samsung/*/SM-G970F/*\"\n        }, {\n          \"ua\": \"SM-G970F\"\n        }],\n        \"dpi\": 438,\n        \"bw\": 2.281,\n        \"ac\": 500\n      }, {\n        \"type\": \"android\",\n        \"rules\": [{\n          \"mdmh\": \"samsung/*/SM-G973F/*\"\n        }, {\n          \"ua\": \"SM-G973F\"\n        }],\n        \"dpi\": 550,\n        \"bw\": 2.002,\n        \"ac\": 500\n      }, {\n        \"type\": \"android\",\n        \"rules\": [{\n          \"mdmh\": \"samsung/*/SM-G975F/*\"\n        }, {\n          \"ua\": \"SM-G975F\"\n        }],\n        \"dpi\": 522,\n        \"bw\": 2.054,\n        \"ac\": 500\n      }, {\n        \"type\": \"android\",\n        \"rules\": [{\n          \"mdmh\": \"samsung/*/SM-G977F/*\"\n        }, {\n          \"ua\": \"SM-G977F\"\n        }],\n        \"dpi\": 505,\n        \"bw\": 2.334,\n        \"ac\": 500\n      }, {\n        \"type\": \"ios\",\n        \"rules\": [{\n          \"res\": [828, 1792]\n        }],\n        \"dpi\": 326,\n        \"bw\": 5,\n        \"ac\": 500\n      }];\n      var DPDB_CACHE = {\n        format: format,\n        last_updated: last_updated,\n        devices: devices\n      };\n\n      function Dpdb(url, onDeviceParamsUpdated) {\n        this.dpdb = DPDB_CACHE;\n        this.recalculateDeviceParams_();\n\n        if (url) {\n          this.onDeviceParamsUpdated = onDeviceParamsUpdated;\n          var xhr = new XMLHttpRequest();\n          var obj = this;\n          xhr.open('GET', url, true);\n          xhr.addEventListener('load', function () {\n            obj.loading = false;\n\n            if (xhr.status >= 200 && xhr.status <= 299) {\n              obj.dpdb = JSON.parse(xhr.response);\n              obj.recalculateDeviceParams_();\n            } else {\n              console.error('Error loading online DPDB!');\n            }\n          });\n          xhr.send();\n        }\n      }\n\n      Dpdb.prototype.getDeviceParams = function () {\n        return this.deviceParams;\n      };\n\n      Dpdb.prototype.recalculateDeviceParams_ = function () {\n        var newDeviceParams = this.calcDeviceParams_();\n\n        if (newDeviceParams) {\n          this.deviceParams = newDeviceParams;\n\n          if (this.onDeviceParamsUpdated) {\n            this.onDeviceParamsUpdated(this.deviceParams);\n          }\n        } else {\n          console.error('Failed to recalculate device parameters.');\n        }\n      };\n\n      Dpdb.prototype.calcDeviceParams_ = function () {\n        var db = this.dpdb;\n\n        if (!db) {\n          console.error('DPDB not available.');\n          return null;\n        }\n\n        if (db.format != 1) {\n          console.error('DPDB has unexpected format version.');\n          return null;\n        }\n\n        if (!db.devices || !db.devices.length) {\n          console.error('DPDB does not have a devices section.');\n          return null;\n        }\n\n        var userAgent = navigator.userAgent || navigator.vendor || window.opera;\n        var width = getScreenWidth();\n        var height = getScreenHeight();\n\n        if (!db.devices) {\n          console.error('DPDB has no devices section.');\n          return null;\n        }\n\n        for (var i = 0; i < db.devices.length; i++) {\n          var device = db.devices[i];\n\n          if (!device.rules) {\n            console.warn('Device[' + i + '] has no rules section.');\n            continue;\n          }\n\n          if (device.type != 'ios' && device.type != 'android') {\n            console.warn('Device[' + i + '] has invalid type.');\n            continue;\n          }\n\n          if (isIOS() != (device.type == 'ios')) continue;\n          var matched = false;\n\n          for (var j = 0; j < device.rules.length; j++) {\n            var rule = device.rules[j];\n\n            if (this.ruleMatches_(rule, userAgent, width, height)) {\n              matched = true;\n              break;\n            }\n          }\n\n          if (!matched) continue;\n          var xdpi = device.dpi[0] || device.dpi;\n          var ydpi = device.dpi[1] || device.dpi;\n          return new DeviceParams({\n            xdpi: xdpi,\n            ydpi: ydpi,\n            bevelMm: device.bw\n          });\n        }\n\n        console.warn('No DPDB device match.');\n        return null;\n      };\n\n      Dpdb.prototype.ruleMatches_ = function (rule, ua, screenWidth, screenHeight) {\n        if (!rule.ua && !rule.res) return false;\n        if (rule.ua && rule.ua.substring(0, 2) === 'SM') rule.ua = rule.ua.substring(0, 7);\n        if (rule.ua && ua.indexOf(rule.ua) < 0) return false;\n\n        if (rule.res) {\n          if (!rule.res[0] || !rule.res[1]) return false;\n          var resX = rule.res[0];\n          var resY = rule.res[1];\n\n          if (Math.min(screenWidth, screenHeight) != Math.min(resX, resY) || Math.max(screenWidth, screenHeight) != Math.max(resX, resY)) {\n            return false;\n          }\n        }\n\n        return true;\n      };\n\n      function DeviceParams(params) {\n        this.xdpi = params.xdpi;\n        this.ydpi = params.ydpi;\n        this.bevelMm = params.bevelMm;\n      }\n\n      function SensorSample(sample, timestampS) {\n        this.set(sample, timestampS);\n      }\n\n      SensorSample.prototype.set = function (sample, timestampS) {\n        this.sample = sample;\n        this.timestampS = timestampS;\n      };\n\n      SensorSample.prototype.copy = function (sensorSample) {\n        this.set(sensorSample.sample, sensorSample.timestampS);\n      };\n\n      function ComplementaryFilter(kFilter, isDebug) {\n        this.kFilter = kFilter;\n        this.isDebug = isDebug;\n        this.currentAccelMeasurement = new SensorSample();\n        this.currentGyroMeasurement = new SensorSample();\n        this.previousGyroMeasurement = new SensorSample();\n\n        if (isIOS()) {\n          this.filterQ = new Quaternion(-1, 0, 0, 1);\n        } else {\n          this.filterQ = new Quaternion(1, 0, 0, 1);\n        }\n\n        this.previousFilterQ = new Quaternion();\n        this.previousFilterQ.copy(this.filterQ);\n        this.accelQ = new Quaternion();\n        this.isOrientationInitialized = false;\n        this.estimatedGravity = new Vector3();\n        this.measuredGravity = new Vector3();\n        this.gyroIntegralQ = new Quaternion();\n      }\n\n      ComplementaryFilter.prototype.addAccelMeasurement = function (vector, timestampS) {\n        this.currentAccelMeasurement.set(vector, timestampS);\n      };\n\n      ComplementaryFilter.prototype.addGyroMeasurement = function (vector, timestampS) {\n        this.currentGyroMeasurement.set(vector, timestampS);\n        var deltaT = timestampS - this.previousGyroMeasurement.timestampS;\n\n        if (isTimestampDeltaValid(deltaT)) {\n          this.run_();\n        }\n\n        this.previousGyroMeasurement.copy(this.currentGyroMeasurement);\n      };\n\n      ComplementaryFilter.prototype.run_ = function () {\n        if (!this.isOrientationInitialized) {\n          this.accelQ = this.accelToQuaternion_(this.currentAccelMeasurement.sample);\n          this.previousFilterQ.copy(this.accelQ);\n          this.isOrientationInitialized = true;\n          return;\n        }\n\n        var deltaT = this.currentGyroMeasurement.timestampS - this.previousGyroMeasurement.timestampS;\n        var gyroDeltaQ = this.gyroToQuaternionDelta_(this.currentGyroMeasurement.sample, deltaT);\n        this.gyroIntegralQ.multiply(gyroDeltaQ);\n        this.filterQ.copy(this.previousFilterQ);\n        this.filterQ.multiply(gyroDeltaQ);\n        var invFilterQ = new Quaternion();\n        invFilterQ.copy(this.filterQ);\n        invFilterQ.inverse();\n        this.estimatedGravity.set(0, 0, -1);\n        this.estimatedGravity.applyQuaternion(invFilterQ);\n        this.estimatedGravity.normalize();\n        this.measuredGravity.copy(this.currentAccelMeasurement.sample);\n        this.measuredGravity.normalize();\n        var deltaQ = new Quaternion();\n        deltaQ.setFromUnitVectors(this.estimatedGravity, this.measuredGravity);\n        deltaQ.inverse();\n\n        if (this.isDebug) {\n          console.log('Delta: %d deg, G_est: (%s, %s, %s), G_meas: (%s, %s, %s)', radToDeg * getQuaternionAngle(deltaQ), this.estimatedGravity.x.toFixed(1), this.estimatedGravity.y.toFixed(1), this.estimatedGravity.z.toFixed(1), this.measuredGravity.x.toFixed(1), this.measuredGravity.y.toFixed(1), this.measuredGravity.z.toFixed(1));\n        }\n\n        var targetQ = new Quaternion();\n        targetQ.copy(this.filterQ);\n        targetQ.multiply(deltaQ);\n        this.filterQ.slerp(targetQ, 1 - this.kFilter);\n        this.previousFilterQ.copy(this.filterQ);\n      };\n\n      ComplementaryFilter.prototype.getOrientation = function () {\n        return this.filterQ;\n      };\n\n      ComplementaryFilter.prototype.accelToQuaternion_ = function (accel) {\n        var normAccel = new Vector3();\n        normAccel.copy(accel);\n        normAccel.normalize();\n        var quat = new Quaternion();\n        quat.setFromUnitVectors(new Vector3(0, 0, -1), normAccel);\n        quat.inverse();\n        return quat;\n      };\n\n      ComplementaryFilter.prototype.gyroToQuaternionDelta_ = function (gyro, dt) {\n        var quat = new Quaternion();\n        var axis = new Vector3();\n        axis.copy(gyro);\n        axis.normalize();\n        quat.setFromAxisAngle(axis, gyro.length() * dt);\n        return quat;\n      };\n\n      function PosePredictor(predictionTimeS, isDebug) {\n        this.predictionTimeS = predictionTimeS;\n        this.isDebug = isDebug;\n        this.previousQ = new Quaternion();\n        this.previousTimestampS = null;\n        this.deltaQ = new Quaternion();\n        this.outQ = new Quaternion();\n      }\n\n      PosePredictor.prototype.getPrediction = function (currentQ, gyro, timestampS) {\n        if (!this.previousTimestampS) {\n          this.previousQ.copy(currentQ);\n          this.previousTimestampS = timestampS;\n          return currentQ;\n        }\n\n        var axis = new Vector3();\n        axis.copy(gyro);\n        axis.normalize();\n        var angularSpeed = gyro.length();\n\n        if (angularSpeed < degToRad * 20) {\n          if (this.isDebug) {\n            console.log('Moving slowly, at %s deg/s: no prediction', (radToDeg * angularSpeed).toFixed(1));\n          }\n\n          this.outQ.copy(currentQ);\n          this.previousQ.copy(currentQ);\n          return this.outQ;\n        }\n\n        var predictAngle = angularSpeed * this.predictionTimeS;\n        this.deltaQ.setFromAxisAngle(axis, predictAngle);\n        this.outQ.copy(this.previousQ);\n        this.outQ.multiply(this.deltaQ);\n        this.previousQ.copy(currentQ);\n        this.previousTimestampS = timestampS;\n        return this.outQ;\n      };\n\n      function FusionPoseSensor(kFilter, predictionTime, yawOnly, isDebug) {\n        this.yawOnly = yawOnly;\n        this.accelerometer = new Vector3();\n        this.gyroscope = new Vector3();\n        this.filter = new ComplementaryFilter(kFilter, isDebug);\n        this.posePredictor = new PosePredictor(predictionTime, isDebug);\n        this.isFirefoxAndroid = isFirefoxAndroid();\n        this.isIOS = isIOS();\n        var chromeVersion = getChromeVersion();\n        this.isDeviceMotionInRadians = !this.isIOS && chromeVersion && chromeVersion < 66;\n        this.isWithoutDeviceMotion = isChromeWithoutDeviceMotion();\n        this.filterToWorldQ = new Quaternion();\n\n        if (isIOS()) {\n          this.filterToWorldQ.setFromAxisAngle(new Vector3(1, 0, 0), Math.PI / 2);\n        } else {\n          this.filterToWorldQ.setFromAxisAngle(new Vector3(1, 0, 0), -Math.PI / 2);\n        }\n\n        this.inverseWorldToScreenQ = new Quaternion();\n        this.worldToScreenQ = new Quaternion();\n        this.originalPoseAdjustQ = new Quaternion();\n        this.originalPoseAdjustQ.setFromAxisAngle(new Vector3(0, 0, 1), -window.orientation * Math.PI / 180);\n        this.setScreenTransform_();\n\n        if (isLandscapeMode()) {\n          this.filterToWorldQ.multiply(this.inverseWorldToScreenQ);\n        }\n\n        this.resetQ = new Quaternion();\n        this.orientationOut_ = new Float32Array(4);\n        this.start();\n      }\n\n      FusionPoseSensor.prototype.getPosition = function () {\n        return null;\n      };\n\n      FusionPoseSensor.prototype.getOrientation = function () {\n        var orientation = void 0;\n\n        if (this.isWithoutDeviceMotion && this._deviceOrientationQ) {\n          this.deviceOrientationFixQ = this.deviceOrientationFixQ || function () {\n            var z = new Quaternion().setFromAxisAngle(new Vector3(0, 0, -1), 0);\n            var y = new Quaternion();\n\n            if (window.orientation === -90) {\n              y.setFromAxisAngle(new Vector3(0, 1, 0), Math.PI / -2);\n            } else {\n              y.setFromAxisAngle(new Vector3(0, 1, 0), Math.PI / 2);\n            }\n\n            return z.multiply(y);\n          }();\n\n          this.deviceOrientationFilterToWorldQ = this.deviceOrientationFilterToWorldQ || function () {\n            var q = new Quaternion();\n            q.setFromAxisAngle(new Vector3(1, 0, 0), -Math.PI / 2);\n            return q;\n          }();\n\n          orientation = this._deviceOrientationQ;\n          var out = new Quaternion();\n          out.copy(orientation);\n          out.multiply(this.deviceOrientationFilterToWorldQ);\n          out.multiply(this.resetQ);\n          out.multiply(this.worldToScreenQ);\n          out.multiplyQuaternions(this.deviceOrientationFixQ, out);\n\n          if (this.yawOnly) {\n            out.x = 0;\n            out.z = 0;\n            out.normalize();\n          }\n\n          this.orientationOut_[0] = out.x;\n          this.orientationOut_[1] = out.y;\n          this.orientationOut_[2] = out.z;\n          this.orientationOut_[3] = out.w;\n          return this.orientationOut_;\n        } else {\n          var filterOrientation = this.filter.getOrientation();\n          orientation = this.posePredictor.getPrediction(filterOrientation, this.gyroscope, this.previousTimestampS);\n        }\n\n        var out = new Quaternion();\n        out.copy(this.filterToWorldQ);\n        out.multiply(this.resetQ);\n        out.multiply(orientation);\n        out.multiply(this.worldToScreenQ);\n\n        if (this.yawOnly) {\n          out.x = 0;\n          out.z = 0;\n          out.normalize();\n        }\n\n        this.orientationOut_[0] = out.x;\n        this.orientationOut_[1] = out.y;\n        this.orientationOut_[2] = out.z;\n        this.orientationOut_[3] = out.w;\n        return this.orientationOut_;\n      };\n\n      FusionPoseSensor.prototype.resetPose = function () {\n        this.resetQ.copy(this.filter.getOrientation());\n        this.resetQ.x = 0;\n        this.resetQ.y = 0;\n        this.resetQ.z *= -1;\n        this.resetQ.normalize();\n\n        if (isLandscapeMode()) {\n          this.resetQ.multiply(this.inverseWorldToScreenQ);\n        }\n\n        this.resetQ.multiply(this.originalPoseAdjustQ);\n      };\n\n      FusionPoseSensor.prototype.onDeviceOrientation_ = function (e) {\n        this._deviceOrientationQ = this._deviceOrientationQ || new Quaternion();\n        var alpha = e.alpha,\n            beta = e.beta,\n            gamma = e.gamma;\n        alpha = (alpha || 0) * Math.PI / 180;\n        beta = (beta || 0) * Math.PI / 180;\n        gamma = (gamma || 0) * Math.PI / 180;\n\n        this._deviceOrientationQ.setFromEulerYXZ(beta, alpha, -gamma);\n      };\n\n      FusionPoseSensor.prototype.onDeviceMotion_ = function (deviceMotion) {\n        this.updateDeviceMotion_(deviceMotion);\n      };\n\n      FusionPoseSensor.prototype.updateDeviceMotion_ = function (deviceMotion) {\n        var accGravity = deviceMotion.accelerationIncludingGravity;\n        var rotRate = deviceMotion.rotationRate;\n        var timestampS = deviceMotion.timeStamp / 1000;\n        var deltaS = timestampS - this.previousTimestampS;\n\n        if (deltaS < 0) {\n          warnOnce('fusion-pose-sensor:invalid:non-monotonic', 'Invalid timestamps detected: non-monotonic timestamp from devicemotion');\n          this.previousTimestampS = timestampS;\n          return;\n        } else if (deltaS <= MIN_TIMESTEP || deltaS > MAX_TIMESTEP) {\n          warnOnce('fusion-pose-sensor:invalid:outside-threshold', 'Invalid timestamps detected: Timestamp from devicemotion outside expected range.');\n          this.previousTimestampS = timestampS;\n          return;\n        }\n\n        this.accelerometer.set(-accGravity.x, -accGravity.y, -accGravity.z);\n\n        if (isR7()) {\n          this.gyroscope.set(-rotRate.beta, rotRate.alpha, rotRate.gamma);\n        } else {\n          this.gyroscope.set(rotRate.alpha, rotRate.beta, rotRate.gamma);\n        }\n\n        if (!this.isDeviceMotionInRadians) {\n          this.gyroscope.multiplyScalar(Math.PI / 180);\n        }\n\n        this.filter.addAccelMeasurement(this.accelerometer, timestampS);\n        this.filter.addGyroMeasurement(this.gyroscope, timestampS);\n        this.previousTimestampS = timestampS;\n      };\n\n      FusionPoseSensor.prototype.onOrientationChange_ = function (screenOrientation) {\n        this.setScreenTransform_();\n      };\n\n      FusionPoseSensor.prototype.onMessage_ = function (event) {\n        var message = event.data;\n\n        if (!message || !message.type) {\n          return;\n        }\n\n        var type = message.type.toLowerCase();\n\n        if (type !== 'devicemotion') {\n          return;\n        }\n\n        this.updateDeviceMotion_(message.deviceMotionEvent);\n      };\n\n      FusionPoseSensor.prototype.setScreenTransform_ = function () {\n        this.worldToScreenQ.set(0, 0, 0, 1);\n\n        switch (window.orientation) {\n          case 0:\n            break;\n\n          case 90:\n            this.worldToScreenQ.setFromAxisAngle(new Vector3(0, 0, 1), -Math.PI / 2);\n            break;\n\n          case -90:\n            this.worldToScreenQ.setFromAxisAngle(new Vector3(0, 0, 1), Math.PI / 2);\n            break;\n\n          case 180:\n            break;\n        }\n\n        this.inverseWorldToScreenQ.copy(this.worldToScreenQ);\n        this.inverseWorldToScreenQ.inverse();\n      };\n\n      FusionPoseSensor.prototype.start = function () {\n        this.onDeviceMotionCallback_ = this.onDeviceMotion_.bind(this);\n        this.onOrientationChangeCallback_ = this.onOrientationChange_.bind(this);\n        this.onMessageCallback_ = this.onMessage_.bind(this);\n        this.onDeviceOrientationCallback_ = this.onDeviceOrientation_.bind(this);\n\n        if (isIOS() && isInsideCrossOriginIFrame()) {\n          window.addEventListener('message', this.onMessageCallback_);\n        }\n\n        window.addEventListener('orientationchange', this.onOrientationChangeCallback_);\n\n        if (this.isWithoutDeviceMotion) {\n          window.addEventListener('deviceorientation', this.onDeviceOrientationCallback_);\n        } else {\n          window.addEventListener('devicemotion', this.onDeviceMotionCallback_);\n        }\n      };\n\n      FusionPoseSensor.prototype.stop = function () {\n        window.removeEventListener('devicemotion', this.onDeviceMotionCallback_);\n        window.removeEventListener('deviceorientation', this.onDeviceOrientationCallback_);\n        window.removeEventListener('orientationchange', this.onOrientationChangeCallback_);\n        window.removeEventListener('message', this.onMessageCallback_);\n      };\n\n      var SENSOR_FREQUENCY = 60;\n      var X_AXIS = new Vector3(1, 0, 0);\n      var Z_AXIS = new Vector3(0, 0, 1);\n      var SENSOR_TO_VR = new Quaternion();\n      SENSOR_TO_VR.setFromAxisAngle(X_AXIS, -Math.PI / 2);\n      SENSOR_TO_VR.multiply(new Quaternion().setFromAxisAngle(Z_AXIS, Math.PI / 2));\n\n      var PoseSensor = function () {\n        function PoseSensor(config) {\n          classCallCheck(this, PoseSensor);\n          this.config = config;\n          this.sensor = null;\n          this.fusionSensor = null;\n          this._out = new Float32Array(4);\n          this.api = null;\n          this.errors = [];\n          this._sensorQ = new Quaternion();\n          this._outQ = new Quaternion();\n          this._onSensorRead = this._onSensorRead.bind(this);\n          this._onSensorError = this._onSensorError.bind(this);\n          this.init();\n        }\n\n        createClass(PoseSensor, [{\n          key: 'init',\n          value: function init() {\n            var sensor = null;\n\n            try {\n              sensor = new RelativeOrientationSensor({\n                frequency: SENSOR_FREQUENCY,\n                referenceFrame: 'screen'\n              });\n              sensor.addEventListener('error', this._onSensorError);\n            } catch (error) {\n              this.errors.push(error);\n\n              if (error.name === 'SecurityError') {\n                console.error('Cannot construct sensors due to the Feature Policy');\n                console.warn('Attempting to fall back using \"devicemotion\"; however this will ' + 'fail in the future without correct permissions.');\n                this.useDeviceMotion();\n              } else if (error.name === 'ReferenceError') {\n                this.useDeviceMotion();\n              } else {\n                console.error(error);\n              }\n            }\n\n            if (sensor) {\n              this.api = 'sensor';\n              this.sensor = sensor;\n              this.sensor.addEventListener('reading', this._onSensorRead);\n              this.sensor.start();\n            }\n          }\n        }, {\n          key: 'useDeviceMotion',\n          value: function useDeviceMotion() {\n            this.api = 'devicemotion';\n            this.fusionSensor = new FusionPoseSensor(this.config.K_FILTER, this.config.PREDICTION_TIME_S, this.config.YAW_ONLY, this.config.DEBUG);\n\n            if (this.sensor) {\n              this.sensor.removeEventListener('reading', this._onSensorRead);\n              this.sensor.removeEventListener('error', this._onSensorError);\n              this.sensor = null;\n            }\n          }\n        }, {\n          key: 'getOrientation',\n          value: function getOrientation() {\n            if (this.fusionSensor) {\n              return this.fusionSensor.getOrientation();\n            }\n\n            if (!this.sensor || !this.sensor.quaternion) {\n              this._out[0] = this._out[1] = this._out[2] = 0;\n              this._out[3] = 1;\n              return this._out;\n            }\n\n            var q = this.sensor.quaternion;\n\n            this._sensorQ.set(q[0], q[1], q[2], q[3]);\n\n            var out = this._outQ;\n            out.copy(SENSOR_TO_VR);\n            out.multiply(this._sensorQ);\n\n            if (this.config.YAW_ONLY) {\n              out.x = out.z = 0;\n              out.normalize();\n            }\n\n            this._out[0] = out.x;\n            this._out[1] = out.y;\n            this._out[2] = out.z;\n            this._out[3] = out.w;\n            return this._out;\n          }\n        }, {\n          key: '_onSensorError',\n          value: function _onSensorError(event) {\n            this.errors.push(event.error);\n\n            if (event.error.name === 'NotAllowedError') {\n              console.error('Permission to access sensor was denied');\n            } else if (event.error.name === 'NotReadableError') {\n              console.error('Sensor could not be read');\n            } else {\n              console.error(event.error);\n            }\n\n            this.useDeviceMotion();\n          }\n        }, {\n          key: '_onSensorRead',\n          value: function _onSensorRead() {}\n        }]);\n        return PoseSensor;\n      }();\n\n      var rotateInstructionsAsset = \"<svg width='198' height='240' viewBox='0 0 198 240' xmlns='http://www.w3.org/2000/svg'><g fill='none' fill-rule='evenodd'><path d='M149.625 109.527l6.737 3.891v.886c0 .177.013.36.038.549.01.081.02.162.027.242.14 1.415.974 2.998 2.105 3.999l5.72 5.062.081-.09s4.382-2.53 5.235-3.024l25.97 14.993v54.001c0 .771-.386 1.217-.948 1.217-.233 0-.495-.076-.772-.236l-23.967-13.838-.014.024-27.322 15.775-.85-1.323c-4.731-1.529-9.748-2.74-14.951-3.61a.27.27 0 0 0-.007.024l-5.067 16.961-7.891 4.556-.037-.063v27.59c0 .772-.386 1.217-.948 1.217-.232 0-.495-.076-.772-.236l-42.473-24.522c-.95-.549-1.72-1.877-1.72-2.967v-1.035l-.021.047a5.111 5.111 0 0 0-1.816-.399 5.682 5.682 0 0 0-.546.001 13.724 13.724 0 0 1-1.918-.041c-1.655-.153-3.2-.6-4.404-1.296l-46.576-26.89.005.012-10.278-18.75c-1.001-1.827-.241-4.216 1.698-5.336l56.011-32.345a4.194 4.194 0 0 1 2.099-.572c1.326 0 2.572.659 3.227 1.853l.005-.003.227.413-.006.004a9.63 9.63 0 0 0 1.477 2.018l.277.27c1.914 1.85 4.468 2.801 7.113 2.801 1.949 0 3.948-.517 5.775-1.572.013 0 7.319-4.219 7.319-4.219a4.194 4.194 0 0 1 2.099-.572c1.326 0 2.572.658 3.226 1.853l3.25 5.928.022-.018 6.785 3.917-.105-.182 46.881-26.965m0-1.635c-.282 0-.563.073-.815.218l-46.169 26.556-5.41-3.124-3.005-5.481c-.913-1.667-2.699-2.702-4.66-2.703-1.011 0-2.02.274-2.917.792a3825 3825 0 0 1-7.275 4.195l-.044.024a9.937 9.937 0 0 1-4.957 1.353c-2.292 0-4.414-.832-5.976-2.342l-.252-.245a7.992 7.992 0 0 1-1.139-1.534 1.379 1.379 0 0 0-.06-.122l-.227-.414a1.718 1.718 0 0 0-.095-.154c-.938-1.574-2.673-2.545-4.571-2.545-1.011 0-2.02.274-2.917.792L3.125 155.502c-2.699 1.559-3.738 4.94-2.314 7.538l10.278 18.75c.177.323.448.563.761.704l46.426 26.804c1.403.81 3.157 1.332 5.072 1.508a15.661 15.661 0 0 0 2.146.046 4.766 4.766 0 0 1 .396 0c.096.004.19.011.283.022.109 1.593 1.159 3.323 2.529 4.114l42.472 24.522c.524.302 1.058.455 1.59.455 1.497 0 2.583-1.2 2.583-2.852v-26.562l7.111-4.105a1.64 1.64 0 0 0 .749-.948l4.658-15.593c4.414.797 8.692 1.848 12.742 3.128l.533.829a1.634 1.634 0 0 0 2.193.531l26.532-15.317L193 192.433c.523.302 1.058.455 1.59.455 1.497 0 2.583-1.199 2.583-2.852v-54.001c0-.584-.312-1.124-.818-1.416l-25.97-14.993a1.633 1.633 0 0 0-1.636.001c-.606.351-2.993 1.73-4.325 2.498l-4.809-4.255c-.819-.725-1.461-1.933-1.561-2.936a7.776 7.776 0 0 0-.033-.294 2.487 2.487 0 0 1-.023-.336v-.886c0-.584-.312-1.123-.817-1.416l-6.739-3.891a1.633 1.633 0 0 0-.817-.219' fill='#455A64'/><path d='M96.027 132.636l46.576 26.891c1.204.695 1.979 1.587 2.242 2.541l-.01.007-81.374 46.982h-.001c-1.654-.152-3.199-.6-4.403-1.295l-46.576-26.891 83.546-48.235' fill='#FAFAFA'/><path d='M63.461 209.174c-.008 0-.015 0-.022-.002-1.693-.156-3.228-.609-4.441-1.309l-46.576-26.89a.118.118 0 0 1 0-.203l83.546-48.235a.117.117 0 0 1 .117 0l46.576 26.891c1.227.708 2.021 1.612 2.296 2.611a.116.116 0 0 1-.042.124l-.021.016-81.375 46.981a.11.11 0 0 1-.058.016zm-50.747-28.303l46.401 26.79c1.178.68 2.671 1.121 4.32 1.276l81.272-46.922c-.279-.907-1.025-1.73-2.163-2.387l-46.517-26.857-83.313 48.1z' fill='#607D8B'/><path d='M148.327 165.471a5.85 5.85 0 0 1-.546.001c-1.894-.083-3.302-1.038-3.145-2.132a2.693 2.693 0 0 0-.072-1.105l-81.103 46.822c.628.058 1.272.073 1.918.042.182-.009.364-.009.546-.001 1.894.083 3.302 1.038 3.145 2.132l79.257-45.759' fill='#FFF'/><path d='M69.07 211.347a.118.118 0 0 1-.115-.134c.045-.317-.057-.637-.297-.925-.505-.61-1.555-1.022-2.738-1.074a5.966 5.966 0 0 0-.535.001 14.03 14.03 0 0 1-1.935-.041.117.117 0 0 1-.103-.092.116.116 0 0 1 .055-.126l81.104-46.822a.117.117 0 0 1 .171.07c.104.381.129.768.074 1.153-.045.316.057.637.296.925.506.61 1.555 1.021 2.739 1.073.178.008.357.008.535-.001a.117.117 0 0 1 .064.218l-79.256 45.759a.114.114 0 0 1-.059.016zm-3.405-2.372c.089 0 .177.002.265.006 1.266.056 2.353.488 2.908 1.158.227.274.35.575.36.882l78.685-45.429c-.036 0-.072-.001-.107-.003-1.267-.056-2.354-.489-2.909-1.158-.282-.34-.402-.724-.347-1.107a2.604 2.604 0 0 0-.032-.91L63.846 208.97a13.91 13.91 0 0 0 1.528.012c.097-.005.194-.007.291-.007z' fill='#607D8B'/><path d='M2.208 162.134c-1.001-1.827-.241-4.217 1.698-5.337l56.011-32.344c1.939-1.12 4.324-.546 5.326 1.281l.232.41a9.344 9.344 0 0 0 1.47 2.021l.278.27c3.325 3.214 8.583 3.716 12.888 1.23l7.319-4.22c1.94-1.119 4.324-.546 5.325 1.282l3.25 5.928-83.519 48.229-10.278-18.75z' fill='#FAFAFA'/><path d='M12.486 181.001a.112.112 0 0 1-.031-.005.114.114 0 0 1-.071-.056L2.106 162.19c-1.031-1.88-.249-4.345 1.742-5.494l56.01-32.344a4.328 4.328 0 0 1 2.158-.588c1.415 0 2.65.702 3.311 1.882.01.008.018.017.024.028l.227.414a.122.122 0 0 1 .013.038 9.508 9.508 0 0 0 1.439 1.959l.275.266c1.846 1.786 4.344 2.769 7.031 2.769 1.977 0 3.954-.538 5.717-1.557a.148.148 0 0 1 .035-.013l7.284-4.206a4.321 4.321 0 0 1 2.157-.588c1.427 0 2.672.716 3.329 1.914l3.249 5.929a.116.116 0 0 1-.044.157l-83.518 48.229a.116.116 0 0 1-.059.016zm49.53-57.004c-.704 0-1.41.193-2.041.557l-56.01 32.345c-1.882 1.086-2.624 3.409-1.655 5.179l10.221 18.645 83.317-48.112-3.195-5.829c-.615-1.122-1.783-1.792-3.124-1.792a4.08 4.08 0 0 0-2.04.557l-7.317 4.225a.148.148 0 0 1-.035.013 11.7 11.7 0 0 1-5.801 1.569c-2.748 0-5.303-1.007-7.194-2.835l-.278-.27a9.716 9.716 0 0 1-1.497-2.046.096.096 0 0 1-.013-.037l-.191-.347a.11.11 0 0 1-.023-.029c-.615-1.123-1.783-1.793-3.124-1.793z' fill='#607D8B'/><path d='M42.434 155.808c-2.51-.001-4.697-1.258-5.852-3.365-1.811-3.304-.438-7.634 3.059-9.654l12.291-7.098a7.599 7.599 0 0 1 3.789-1.033c2.51 0 4.697 1.258 5.852 3.365 1.811 3.304.439 7.634-3.059 9.654l-12.291 7.098a7.606 7.606 0 0 1-3.789 1.033zm13.287-20.683a7.128 7.128 0 0 0-3.555.971l-12.291 7.098c-3.279 1.893-4.573 5.942-2.883 9.024 1.071 1.955 3.106 3.122 5.442 3.122a7.13 7.13 0 0 0 3.556-.97l12.291-7.098c3.279-1.893 4.572-5.942 2.883-9.024-1.072-1.955-3.106-3.123-5.443-3.123z' fill='#607D8B'/><path d='M149.588 109.407l6.737 3.89v.887c0 .176.013.36.037.549.011.081.02.161.028.242.14 1.415.973 2.998 2.105 3.999l7.396 6.545c.177.156.358.295.541.415 1.579 1.04 2.95.466 3.062-1.282.049-.784.057-1.595.023-2.429l-.003-.16v-1.151l25.987 15.003v54c0 1.09-.77 1.53-1.72.982l-42.473-24.523c-.95-.548-1.72-1.877-1.72-2.966v-34.033' fill='#FAFAFA'/><path d='M194.553 191.25c-.257 0-.54-.085-.831-.253l-42.472-24.521c-.981-.567-1.779-1.943-1.779-3.068v-34.033h.234v34.033c0 1.051.745 2.336 1.661 2.866l42.473 24.521c.424.245.816.288 1.103.122.285-.164.442-.52.442-1.002v-53.933l-25.753-14.868.003 1.106c.034.832.026 1.654-.024 2.439-.054.844-.396 1.464-.963 1.746-.619.309-1.45.173-2.28-.373a5.023 5.023 0 0 1-.553-.426l-7.397-6.544c-1.158-1.026-1.999-2.625-2.143-4.076a9.624 9.624 0 0 0-.027-.238 4.241 4.241 0 0 1-.038-.564v-.82l-6.68-3.856.117-.202 6.738 3.89.058.034v.954c0 .171.012.351.036.533.011.083.021.165.029.246.138 1.395.948 2.935 2.065 3.923l7.397 6.545c.173.153.35.289.527.406.758.499 1.504.63 2.047.359.49-.243.786-.795.834-1.551.05-.778.057-1.591.024-2.417l-.004-.163v-1.355l.175.1 25.987 15.004.059.033v54.068c0 .569-.198.996-.559 1.204a1.002 1.002 0 0 1-.506.131' fill='#607D8B'/><path d='M145.685 163.161l24.115 13.922-25.978 14.998-1.462-.307c-6.534-2.17-13.628-3.728-21.019-4.616-4.365-.524-8.663 1.096-9.598 3.62a2.746 2.746 0 0 0-.011 1.928c1.538 4.267 4.236 8.363 7.995 12.135l.532.845-25.977 14.997-24.115-13.922 75.518-43.6' fill='#FFF'/><path d='M94.282 220.818l-.059-.033-24.29-14.024.175-.101 75.577-43.634.058.033 24.29 14.024-26.191 15.122-.045-.01-1.461-.307c-6.549-2.174-13.613-3.725-21.009-4.614a13.744 13.744 0 0 0-1.638-.097c-3.758 0-7.054 1.531-7.837 3.642a2.62 2.62 0 0 0-.01 1.848c1.535 4.258 4.216 8.326 7.968 12.091l.016.021.526.835.006.01.064.102-.105.061-25.977 14.998-.058.033zm-23.881-14.057l23.881 13.788 24.802-14.32c.546-.315.846-.489 1.017-.575l-.466-.74c-3.771-3.787-6.467-7.881-8.013-12.168a2.851 2.851 0 0 1 .011-2.008c.815-2.199 4.203-3.795 8.056-3.795.557 0 1.117.033 1.666.099 7.412.891 14.491 2.445 21.041 4.621.836.175 1.215.254 1.39.304l25.78-14.884-23.881-13.788-75.284 43.466z' fill='#607D8B'/><path d='M167.23 125.979v50.871l-27.321 15.773-6.461-14.167c-.91-1.996-3.428-1.738-5.624.574a10.238 10.238 0 0 0-2.33 4.018l-6.46 21.628-27.322 15.774v-50.871l75.518-43.6' fill='#FFF'/><path d='M91.712 220.567a.127.127 0 0 1-.059-.016.118.118 0 0 1-.058-.101v-50.871c0-.042.023-.08.058-.101l75.519-43.6a.117.117 0 0 1 .175.101v50.871c0 .041-.023.08-.059.1l-27.321 15.775a.118.118 0 0 1-.094.01.12.12 0 0 1-.071-.063l-6.46-14.168c-.375-.822-1.062-1.275-1.934-1.275-1.089 0-2.364.686-3.5 1.881a10.206 10.206 0 0 0-2.302 3.972l-6.46 21.627a.118.118 0 0 1-.054.068L91.77 220.551a.12.12 0 0 1-.058.016zm.117-50.92v50.601l27.106-15.65 6.447-21.583a10.286 10.286 0 0 1 2.357-4.065c1.18-1.242 2.517-1.954 3.669-1.954.969 0 1.731.501 2.146 1.411l6.407 14.051 27.152-15.676v-50.601l-75.284 43.466z' fill='#607D8B'/><path d='M168.543 126.213v50.87l-27.322 15.774-6.46-14.168c-.91-1.995-3.428-1.738-5.624.574a10.248 10.248 0 0 0-2.33 4.019l-6.461 21.627-27.321 15.774v-50.87l75.518-43.6' fill='#FFF'/><path d='M93.025 220.8a.123.123 0 0 1-.059-.015.12.12 0 0 1-.058-.101v-50.871c0-.042.023-.08.058-.101l75.518-43.6a.112.112 0 0 1 .117 0c.036.02.059.059.059.1v50.871a.116.116 0 0 1-.059.101l-27.321 15.774a.111.111 0 0 1-.094.01.115.115 0 0 1-.071-.062l-6.46-14.168c-.375-.823-1.062-1.275-1.935-1.275-1.088 0-2.363.685-3.499 1.881a10.19 10.19 0 0 0-2.302 3.971l-6.461 21.628a.108.108 0 0 1-.053.067l-27.322 15.775a.12.12 0 0 1-.058.015zm.117-50.919v50.6l27.106-15.649 6.447-21.584a10.293 10.293 0 0 1 2.357-4.065c1.179-1.241 2.516-1.954 3.668-1.954.969 0 1.732.502 2.147 1.412l6.407 14.051 27.152-15.676v-50.601l-75.284 43.466z' fill='#607D8B'/><path d='M169.8 177.083l-27.322 15.774-6.46-14.168c-.91-1.995-3.428-1.738-5.625.574a10.246 10.246 0 0 0-2.329 4.019l-6.461 21.627-27.321 15.774v-50.87l75.518-43.6v50.87z' fill='#FAFAFA'/><path d='M94.282 220.917a.234.234 0 0 1-.234-.233v-50.871c0-.083.045-.161.117-.202l75.518-43.601a.234.234 0 1 1 .35.202v50.871a.233.233 0 0 1-.116.202l-27.322 15.775a.232.232 0 0 1-.329-.106l-6.461-14.168c-.36-.789-.992-1.206-1.828-1.206-1.056 0-2.301.672-3.415 1.844a10.099 10.099 0 0 0-2.275 3.924l-6.46 21.628a.235.235 0 0 1-.107.136l-27.322 15.774a.23.23 0 0 1-.116.031zm.233-50.969v50.331l26.891-15.525 6.434-21.539a10.41 10.41 0 0 1 2.384-4.112c1.201-1.265 2.569-1.991 3.753-1.991 1.018 0 1.818.526 2.253 1.48l6.354 13.934 26.982-15.578v-50.331l-75.051 43.331z' fill='#607D8B'/><path d='M109.894 199.943c-1.774 0-3.241-.725-4.244-2.12a.224.224 0 0 1 .023-.294.233.233 0 0 1 .301-.023c.78.547 1.705.827 2.75.827 1.323 0 2.754-.439 4.256-1.306 5.311-3.067 9.631-10.518 9.631-16.611 0-1.927-.442-3.56-1.278-4.724a.232.232 0 0 1 .323-.327c1.671 1.172 2.591 3.381 2.591 6.219 0 6.242-4.426 13.863-9.865 17.003-1.574.908-3.084 1.356-4.488 1.356zm-2.969-1.542c.813.651 1.82.877 2.968.877h.001c1.321 0 2.753-.327 4.254-1.194 5.311-3.067 9.632-10.463 9.632-16.556 0-1.979-.463-3.599-1.326-4.761.411 1.035.625 2.275.625 3.635 0 6.243-4.426 13.883-9.865 17.023-1.574.909-3.084 1.317-4.49 1.317-.641 0-1.243-.149-1.799-.341z' fill='#607D8B'/><path d='M113.097 197.23c5.384-3.108 9.748-10.636 9.748-16.814 0-2.051-.483-3.692-1.323-4.86-1.784-1.252-4.374-1.194-7.257.47-5.384 3.108-9.748 10.636-9.748 16.814 0 2.051.483 3.692 1.323 4.86 1.784 1.252 4.374 1.194 7.257-.47' fill='#FAFAFA'/><path d='M108.724 198.614c-1.142 0-2.158-.213-3.019-.817-.021-.014-.04.014-.055-.007-.894-1.244-1.367-2.948-1.367-4.973 0-6.242 4.426-13.864 9.865-17.005 1.574-.908 3.084-1.363 4.49-1.363 1.142 0 2.158.309 3.018.913a.23.23 0 0 1 .056.056c.894 1.244 1.367 2.972 1.367 4.997 0 6.243-4.426 13.783-9.865 16.923-1.574.909-3.084 1.276-4.49 1.276zm-2.718-1.109c.774.532 1.688.776 2.718.776 1.323 0 2.754-.413 4.256-1.28 5.311-3.066 9.631-10.505 9.631-16.598 0-1.909-.434-3.523-1.255-4.685-.774-.533-1.688-.799-2.718-.799-1.323 0-2.755.441-4.256 1.308-5.311 3.066-9.631 10.506-9.631 16.599 0 1.909.434 3.517 1.255 4.679z' fill='#607D8B'/><path d='M149.318 114.262l-9.984 8.878 15.893 11.031 5.589-6.112-11.498-13.797' fill='#FAFAFA'/><path d='M169.676 120.84l-9.748 5.627c-3.642 2.103-9.528 2.113-13.147.024-3.62-2.089-3.601-5.488.041-7.591l9.495-5.608-6.729-3.885-81.836 47.071 45.923 26.514 3.081-1.779c.631-.365.869-.898.618-1.39-2.357-4.632-2.593-9.546-.683-14.262 5.638-13.92 24.509-24.815 48.618-28.07 8.169-1.103 16.68-.967 24.704.394.852.145 1.776.008 2.407-.357l3.081-1.778-25.825-14.91' fill='#FAFAFA'/><path d='M113.675 183.459a.47.47 0 0 1-.233-.062l-45.924-26.515a.468.468 0 0 1 .001-.809l81.836-47.071a.467.467 0 0 1 .466 0l6.729 3.885a.467.467 0 0 1-.467.809l-6.496-3.75-80.9 46.533 44.988 25.973 2.848-1.644c.192-.111.62-.409.435-.773-2.416-4.748-2.658-9.814-.7-14.65 2.806-6.927 8.885-13.242 17.582-18.263 8.657-4.998 19.518-8.489 31.407-10.094 8.198-1.107 16.79-.97 24.844.397.739.125 1.561.007 2.095-.301l2.381-1.374-25.125-14.506a.467.467 0 0 1 .467-.809l25.825 14.91a.467.467 0 0 1 0 .809l-3.081 1.779c-.721.417-1.763.575-2.718.413-7.963-1.351-16.457-1.486-24.563-.392-11.77 1.589-22.512 5.039-31.065 9.977-8.514 4.916-14.456 11.073-17.183 17.805-1.854 4.578-1.623 9.376.666 13.875.37.725.055 1.513-.8 2.006l-3.081 1.78a.476.476 0 0 1-.234.062' fill='#455A64'/><path d='M153.316 128.279c-2.413 0-4.821-.528-6.652-1.586-1.818-1.049-2.82-2.461-2.82-3.975 0-1.527 1.016-2.955 2.861-4.02l9.493-5.607a.233.233 0 1 1 .238.402l-9.496 5.609c-1.696.979-2.628 2.263-2.628 3.616 0 1.34.918 2.608 2.585 3.571 3.549 2.049 9.343 2.038 12.914-.024l9.748-5.628a.234.234 0 0 1 .234.405l-9.748 5.628c-1.858 1.072-4.296 1.609-6.729 1.609' fill='#607D8B'/><path d='M113.675 182.992l-45.913-26.508M113.675 183.342a.346.346 0 0 1-.175-.047l-45.913-26.508a.35.35 0 1 1 .35-.607l45.913 26.508a.35.35 0 0 1-.175.654' fill='#455A64'/><path d='M67.762 156.484v54.001c0 1.09.77 2.418 1.72 2.967l42.473 24.521c.95.549 1.72.11 1.72-.98v-54.001' fill='#FAFAFA'/><path d='M112.727 238.561c-.297 0-.62-.095-.947-.285l-42.473-24.521c-1.063-.613-1.895-2.05-1.895-3.27v-54.001a.35.35 0 1 1 .701 0v54.001c0 .96.707 2.18 1.544 2.663l42.473 24.522c.344.198.661.243.87.122.206-.119.325-.411.325-.799v-54.001a.35.35 0 1 1 .7 0v54.001c0 .655-.239 1.154-.675 1.406a1.235 1.235 0 0 1-.623.162' fill='#455A64'/><path d='M112.86 147.512h-.001c-2.318 0-4.499-.522-6.142-1.471-1.705-.984-2.643-2.315-2.643-3.749 0-1.445.952-2.791 2.68-3.788l12.041-6.953c1.668-.962 3.874-1.493 6.212-1.493 2.318 0 4.499.523 6.143 1.472 1.704.984 2.643 2.315 2.643 3.748 0 1.446-.952 2.791-2.68 3.789l-12.042 6.952c-1.668.963-3.874 1.493-6.211 1.493zm12.147-16.753c-2.217 0-4.298.497-5.861 1.399l-12.042 6.952c-1.502.868-2.33 1.998-2.33 3.182 0 1.173.815 2.289 2.293 3.142 1.538.889 3.596 1.378 5.792 1.378h.001c2.216 0 4.298-.497 5.861-1.399l12.041-6.953c1.502-.867 2.33-1.997 2.33-3.182 0-1.172-.814-2.288-2.292-3.142-1.539-.888-3.596-1.377-5.793-1.377z' fill='#607D8B'/><path d='M165.63 123.219l-5.734 3.311c-3.167 1.828-8.286 1.837-11.433.02-3.147-1.817-3.131-4.772.036-6.601l5.734-3.31 11.397 6.58' fill='#FAFAFA'/><path d='M154.233 117.448l9.995 5.771-4.682 2.704c-1.434.827-3.352 1.283-5.399 1.283-2.029 0-3.923-.449-5.333-1.263-1.29-.744-2-1.694-2-2.674 0-.991.723-1.955 2.036-2.713l5.383-3.108m0-.809l-5.734 3.31c-3.167 1.829-3.183 4.784-.036 6.601 1.568.905 3.623 1.357 5.684 1.357 2.077 0 4.159-.46 5.749-1.377l5.734-3.311-11.397-6.58M145.445 179.667c-1.773 0-3.241-.85-4.243-2.245-.067-.092-.057-.275.023-.356.08-.081.207-.12.3-.055.781.548 1.706.812 2.751.811 1.322 0 2.754-.446 4.256-1.313 5.31-3.066 9.631-10.522 9.631-16.615 0-1.927-.442-3.562-1.279-4.726a.235.235 0 0 1 .024-.301.232.232 0 0 1 .3-.027c1.67 1.172 2.59 3.38 2.59 6.219 0 6.242-4.425 13.987-9.865 17.127-1.573.908-3.083 1.481-4.488 1.481zM142.476 178c.814.651 1.82 1.002 2.969 1.002 1.322 0 2.753-.452 4.255-1.32 5.31-3.065 9.631-10.523 9.631-16.617 0-1.98-.463-3.63-1.325-4.793.411 1.035.624 2.26.624 3.62 0 6.242-4.425 13.875-9.865 17.015-1.573.909-3.084 1.376-4.489 1.376a5.49 5.49 0 0 1-1.8-.283z' fill='#607D8B'/><path d='M148.648 176.704c5.384-3.108 9.748-10.636 9.748-16.813 0-2.052-.483-3.693-1.322-4.861-1.785-1.252-4.375-1.194-7.258.471-5.383 3.108-9.748 10.636-9.748 16.813 0 2.051.484 3.692 1.323 4.86 1.785 1.253 4.374 1.195 7.257-.47' fill='#FAFAFA'/><path d='M144.276 178.276c-1.143 0-2.158-.307-3.019-.911a.217.217 0 0 1-.055-.054c-.895-1.244-1.367-2.972-1.367-4.997 0-6.241 4.425-13.875 9.865-17.016 1.573-.908 3.084-1.369 4.489-1.369 1.143 0 2.158.307 3.019.91a.24.24 0 0 1 .055.055c.894 1.244 1.367 2.971 1.367 4.997 0 6.241-4.425 13.875-9.865 17.016-1.573.908-3.084 1.369-4.489 1.369zm-2.718-1.172c.773.533 1.687.901 2.718.901 1.322 0 2.754-.538 4.256-1.405 5.31-3.066 9.631-10.567 9.631-16.661 0-1.908-.434-3.554-1.256-4.716-.774-.532-1.688-.814-2.718-.814-1.322 0-2.754.433-4.256 1.3-5.31 3.066-9.631 10.564-9.631 16.657 0 1.91.434 3.576 1.256 4.738z' fill='#607D8B'/><path d='M150.72 172.361l-.363-.295a24.105 24.105 0 0 0 2.148-3.128 24.05 24.05 0 0 0 1.977-4.375l.443.149a24.54 24.54 0 0 1-2.015 4.46 24.61 24.61 0 0 1-2.19 3.189M115.917 191.514l-.363-.294a24.174 24.174 0 0 0 2.148-3.128 24.038 24.038 0 0 0 1.976-4.375l.443.148a24.48 24.48 0 0 1-2.015 4.461 24.662 24.662 0 0 1-2.189 3.188M114 237.476V182.584 237.476' fill='#607D8B'/><g><path d='M81.822 37.474c.017-.135-.075-.28-.267-.392-.327-.188-.826-.21-1.109-.045l-6.012 3.471c-.131.076-.194.178-.191.285.002.132.002.461.002.578v.043l-.007.128-6.591 3.779c-.001 0-2.077 1.046-2.787 5.192 0 0-.912 6.961-.898 19.745.015 12.57.606 17.07 1.167 21.351.22 1.684 3.001 2.125 3.001 2.125.331.04.698-.027 1.08-.248l75.273-43.551c1.808-1.069 2.667-3.719 3.056-6.284 1.213-7.99 1.675-32.978-.275-39.878-.196-.693-.51-1.083-.868-1.282l-2.086-.79c-.727.028-1.416.467-1.534.535L82.032 37.072l-.21.402' fill='#FFF'/><path d='M144.311 1.701l2.085.79c.358.199.672.589.868 1.282 1.949 6.9 1.487 31.887.275 39.878-.39 2.565-1.249 5.215-3.056 6.284L69.21 93.486a1.78 1.78 0 0 1-.896.258l-.183-.011c0 .001-2.782-.44-3.003-2.124-.56-4.282-1.151-8.781-1.165-21.351-.015-12.784.897-19.745.897-19.745.71-4.146 2.787-5.192 2.787-5.192l6.591-3.779.007-.128v-.043c0-.117 0-.446-.002-.578-.003-.107.059-.21.191-.285l6.012-3.472a.98.98 0 0 1 .481-.11c.218 0 .449.053.627.156.193.112.285.258.268.392l.211-.402 60.744-34.836c.117-.068.806-.507 1.534-.535m0-.997l-.039.001c-.618.023-1.283.244-1.974.656l-.021.012-60.519 34.706a2.358 2.358 0 0 0-.831-.15c-.365 0-.704.084-.98.244l-6.012 3.471c-.442.255-.699.69-.689 1.166l.001.15-6.08 3.487c-.373.199-2.542 1.531-3.29 5.898l-.006.039c-.009.07-.92 7.173-.906 19.875.014 12.62.603 17.116 1.172 21.465l.002.015c.308 2.355 3.475 2.923 3.836 2.98l.034.004c.101.013.204.019.305.019a2.77 2.77 0 0 0 1.396-.392l75.273-43.552c1.811-1.071 2.999-3.423 3.542-6.997 1.186-7.814 1.734-33.096-.301-40.299-.253-.893-.704-1.527-1.343-1.882l-.132-.062-2.085-.789a.973.973 0 0 0-.353-.065' fill='#455A64'/><path d='M128.267 11.565l1.495.434-56.339 32.326' fill='#FFF'/><path d='M74.202 90.545a.5.5 0 0 1-.25-.931l18.437-10.645a.499.499 0 1 1 .499.864L74.451 90.478l-.249.067M75.764 42.654l-.108-.062.046-.171 5.135-2.964.17.045-.045.171-5.135 2.964-.063.017M70.52 90.375V46.421l.063-.036L137.84 7.554v43.954l-.062.036L70.52 90.375zm.25-43.811v43.38l66.821-38.579V7.985L70.77 46.564z' fill='#607D8B'/><path d='M86.986 83.182c-.23.149-.612.384-.849.523l-11.505 6.701c-.237.139-.206.252.068.252h.565c.275 0 .693-.113.93-.252L87.7 83.705c.237-.139.428-.253.425-.256a11.29 11.29 0 0 1-.006-.503c0-.274-.188-.377-.418-.227l-.715.463' fill='#607D8B'/><path d='M75.266 90.782H74.7c-.2 0-.316-.056-.346-.166-.03-.11.043-.217.215-.317l11.505-6.702c.236-.138.615-.371.844-.519l.715-.464a.488.488 0 0 1 .266-.089c.172 0 .345.13.345.421 0 .214.001.363.003.437l.006.004-.004.069c-.003.075-.003.075-.486.356l-11.505 6.702a2.282 2.282 0 0 1-.992.268zm-.6-.25l.034.001h.566c.252 0 .649-.108.866-.234l11.505-6.702c.168-.098.294-.173.361-.214-.004-.084-.004-.218-.004-.437l-.095-.171-.131.049-.714.463c-.232.15-.616.386-.854.525l-11.505 6.702-.029.018z' fill='#607D8B'/><path d='M75.266 89.871H74.7c-.2 0-.316-.056-.346-.166-.03-.11.043-.217.215-.317l11.505-6.702c.258-.151.694-.268.993-.268h.565c.2 0 .316.056.346.166.03.11-.043.217-.215.317l-11.505 6.702a2.282 2.282 0 0 1-.992.268zm-.6-.25l.034.001h.566c.252 0 .649-.107.866-.234l11.505-6.702.03-.018-.035-.001h-.565c-.252 0-.649.108-.867.234l-11.505 6.702-.029.018zM74.37 90.801v-1.247 1.247' fill='#607D8B'/><path d='M68.13 93.901c-.751-.093-1.314-.737-1.439-1.376-.831-4.238-1.151-8.782-1.165-21.352-.015-12.784.897-19.745.897-19.745.711-4.146 2.787-5.192 2.787-5.192l74.859-43.219c.223-.129 2.487-1.584 3.195.923 1.95 6.9 1.488 31.887.275 39.878-.389 2.565-1.248 5.215-3.056 6.283L69.21 93.653c-.382.221-.749.288-1.08.248 0 0-2.781-.441-3.001-2.125-.561-4.281-1.152-8.781-1.167-21.351-.014-12.784.898-19.745.898-19.745.71-4.146 2.787-5.191 2.787-5.191l6.598-3.81.871-.119 6.599-3.83.046-.461L68.13 93.901' fill='#FAFAFA'/><path d='M68.317 94.161l-.215-.013h-.001l-.244-.047c-.719-.156-2.772-.736-2.976-2.292-.568-4.34-1.154-8.813-1.168-21.384-.014-12.654.891-19.707.9-19.777.725-4.231 2.832-5.338 2.922-5.382l6.628-3.827.87-.119 6.446-3.742.034-.334a.248.248 0 0 1 .273-.223.248.248 0 0 1 .223.272l-.059.589-6.752 3.919-.87.118-6.556 3.785c-.031.016-1.99 1.068-2.666 5.018-.007.06-.908 7.086-.894 19.702.014 12.539.597 16.996 1.161 21.305.091.691.689 1.154 1.309 1.452a1.95 1.95 0 0 1-.236-.609c-.781-3.984-1.155-8.202-1.17-21.399-.014-12.653.891-19.707.9-19.777.725-4.231 2.832-5.337 2.922-5.382-.004.001 74.444-42.98 74.846-43.212l.028-.017c.904-.538 1.72-.688 2.36-.433.555.221.949.733 1.172 1.52 2.014 7.128 1.46 32.219.281 39.983-.507 3.341-1.575 5.515-3.175 6.462L69.335 93.869a2.023 2.023 0 0 1-1.018.292zm-.147-.507c.293.036.604-.037.915-.217l75.273-43.551c1.823-1.078 2.602-3.915 2.934-6.106 1.174-7.731 1.731-32.695-.268-39.772-.178-.631-.473-1.032-.876-1.192-.484-.193-1.166-.052-1.921.397l-.034.021-74.858 43.218c-.031.017-1.989 1.069-2.666 5.019-.007.059-.908 7.085-.894 19.702.015 13.155.386 17.351 1.161 21.303.09.461.476.983 1.037 1.139.114.025.185.037.196.039h.001z' fill='#455A64'/><path d='M69.317 68.982c.489-.281.885-.056.885.505 0 .56-.396 1.243-.885 1.525-.488.282-.884.057-.884-.504 0-.56.396-1.243.884-1.526' fill='#FFF'/><path d='M68.92 71.133c-.289 0-.487-.228-.487-.625 0-.56.396-1.243.884-1.526a.812.812 0 0 1 .397-.121c.289 0 .488.229.488.626 0 .56-.396 1.243-.885 1.525a.812.812 0 0 1-.397.121m.794-2.459a.976.976 0 0 0-.49.147c-.548.317-.978 1.058-.978 1.687 0 .486.271.812.674.812a.985.985 0 0 0 .491-.146c.548-.317.978-1.057.978-1.687 0-.486-.272-.813-.675-.813' fill='#8097A2'/><path d='M68.92 70.947c-.271 0-.299-.307-.299-.439 0-.491.361-1.116.79-1.363a.632.632 0 0 1 .303-.096c.272 0 .301.306.301.438 0 .491-.363 1.116-.791 1.364a.629.629 0 0 1-.304.096m.794-2.086a.812.812 0 0 0-.397.121c-.488.283-.884.966-.884 1.526 0 .397.198.625.487.625a.812.812 0 0 0 .397-.121c.489-.282.885-.965.885-1.525 0-.397-.199-.626-.488-.626' fill='#8097A2'/><path d='M69.444 85.35c.264-.152.477-.031.477.272 0 .303-.213.67-.477.822-.263.153-.477.031-.477-.271 0-.302.214-.671.477-.823' fill='#FFF'/><path d='M69.23 86.51c-.156 0-.263-.123-.263-.337 0-.302.214-.671.477-.823a.431.431 0 0 1 .214-.066c.156 0 .263.124.263.338 0 .303-.213.67-.477.822a.431.431 0 0 1-.214.066m.428-1.412c-.1 0-.203.029-.307.09-.32.185-.57.618-.57.985 0 .309.185.524.449.524a.63.63 0 0 0 .308-.09c.32-.185.57-.618.57-.985 0-.309-.185-.524-.45-.524' fill='#8097A2'/><path d='M69.23 86.322l-.076-.149c0-.235.179-.544.384-.661l.12-.041.076.151c0 .234-.179.542-.383.66l-.121.04m.428-1.038a.431.431 0 0 0-.214.066c-.263.152-.477.521-.477.823 0 .214.107.337.263.337a.431.431 0 0 0 .214-.066c.264-.152.477-.519.477-.822 0-.214-.107-.338-.263-.338' fill='#8097A2'/><path d='M139.278 7.769v43.667L72.208 90.16V46.493l67.07-38.724' fill='#455A64'/><path d='M72.083 90.375V46.421l.063-.036 67.257-38.831v43.954l-.062.036-67.258 38.831zm.25-43.811v43.38l66.821-38.579V7.985L72.333 46.564z' fill='#607D8B'/></g><path d='M125.737 88.647l-7.639 3.334V84l-11.459 4.713v8.269L99 100.315l13.369 3.646 13.368-15.314' fill='#455A64'/></g></svg>\";\n\n      function RotateInstructions() {\n        this.loadIcon_();\n        var overlay = document.createElement('div');\n        var s = overlay.style;\n        s.position = 'fixed';\n        s.top = 0;\n        s.right = 0;\n        s.bottom = 0;\n        s.left = 0;\n        s.backgroundColor = 'gray';\n        s.fontFamily = 'sans-serif';\n        s.zIndex = 1000000;\n        var img = document.createElement('img');\n        img.src = this.icon;\n        var s = img.style;\n        s.marginLeft = '25%';\n        s.marginTop = '25%';\n        s.width = '50%';\n        overlay.appendChild(img);\n        var text = document.createElement('div');\n        var s = text.style;\n        s.textAlign = 'center';\n        s.fontSize = '16px';\n        s.lineHeight = '24px';\n        s.margin = '24px 25%';\n        s.width = '50%';\n        text.innerHTML = 'Place your phone into your Cardboard viewer.';\n        overlay.appendChild(text);\n        var snackbar = document.createElement('div');\n        var s = snackbar.style;\n        s.backgroundColor = '#CFD8DC';\n        s.position = 'fixed';\n        s.bottom = 0;\n        s.width = '100%';\n        s.height = '48px';\n        s.padding = '14px 24px';\n        s.boxSizing = 'border-box';\n        s.color = '#656A6B';\n        overlay.appendChild(snackbar);\n        var snackbarText = document.createElement('div');\n        snackbarText.style.float = 'left';\n        snackbarText.innerHTML = 'No Cardboard viewer?';\n        var snackbarButton = document.createElement('a');\n        snackbarButton.href = 'https://www.google.com/get/cardboard/get-cardboard/';\n        snackbarButton.innerHTML = 'get one';\n        snackbarButton.target = '_blank';\n        var s = snackbarButton.style;\n        s.float = 'right';\n        s.fontWeight = 600;\n        s.textTransform = 'uppercase';\n        s.borderLeft = '1px solid gray';\n        s.paddingLeft = '24px';\n        s.textDecoration = 'none';\n        s.color = '#656A6B';\n        snackbar.appendChild(snackbarText);\n        snackbar.appendChild(snackbarButton);\n        this.overlay = overlay;\n        this.text = text;\n        this.hide();\n      }\n\n      RotateInstructions.prototype.show = function (parent) {\n        if (!parent && !this.overlay.parentElement) {\n          document.body.appendChild(this.overlay);\n        } else if (parent) {\n          if (this.overlay.parentElement && this.overlay.parentElement != parent) this.overlay.parentElement.removeChild(this.overlay);\n          parent.appendChild(this.overlay);\n        }\n\n        this.overlay.style.display = 'block';\n        var img = this.overlay.querySelector('img');\n        var s = img.style;\n\n        if (isLandscapeMode()) {\n          s.width = '20%';\n          s.marginLeft = '40%';\n          s.marginTop = '3%';\n        } else {\n          s.width = '50%';\n          s.marginLeft = '25%';\n          s.marginTop = '25%';\n        }\n      };\n\n      RotateInstructions.prototype.hide = function () {\n        this.overlay.style.display = 'none';\n      };\n\n      RotateInstructions.prototype.showTemporarily = function (ms, parent) {\n        this.show(parent);\n        this.timer = setTimeout(this.hide.bind(this), ms);\n      };\n\n      RotateInstructions.prototype.disableShowTemporarily = function () {\n        clearTimeout(this.timer);\n      };\n\n      RotateInstructions.prototype.update = function () {\n        this.disableShowTemporarily();\n\n        if (!isLandscapeMode() && isMobile()) {\n          this.show();\n        } else {\n          this.hide();\n        }\n      };\n\n      RotateInstructions.prototype.loadIcon_ = function () {\n        this.icon = dataUri('image/svg+xml', rotateInstructionsAsset);\n      };\n\n      var DEFAULT_VIEWER = 'CardboardV1';\n      var VIEWER_KEY = 'WEBVR_CARDBOARD_VIEWER';\n      var CLASS_NAME = 'webvr-polyfill-viewer-selector';\n\n      function ViewerSelector(defaultViewer) {\n        try {\n          this.selectedKey = localStorage.getItem(VIEWER_KEY);\n        } catch (error) {\n          console.error('Failed to load viewer profile: %s', error);\n        }\n\n        if (!this.selectedKey) {\n          this.selectedKey = defaultViewer || DEFAULT_VIEWER;\n        }\n\n        this.dialog = this.createDialog_(DeviceInfo.Viewers);\n        this.root = null;\n        this.onChangeCallbacks_ = [];\n      }\n\n      ViewerSelector.prototype.show = function (root) {\n        this.root = root;\n        root.appendChild(this.dialog);\n        var selected = this.dialog.querySelector('#' + this.selectedKey);\n        selected.checked = true;\n        this.dialog.style.display = 'block';\n      };\n\n      ViewerSelector.prototype.hide = function () {\n        if (this.root && this.root.contains(this.dialog)) {\n          this.root.removeChild(this.dialog);\n        }\n\n        this.dialog.style.display = 'none';\n      };\n\n      ViewerSelector.prototype.getCurrentViewer = function () {\n        return DeviceInfo.Viewers[this.selectedKey];\n      };\n\n      ViewerSelector.prototype.getSelectedKey_ = function () {\n        var input = this.dialog.querySelector('input[name=field]:checked');\n\n        if (input) {\n          return input.id;\n        }\n\n        return null;\n      };\n\n      ViewerSelector.prototype.onChange = function (cb) {\n        this.onChangeCallbacks_.push(cb);\n      };\n\n      ViewerSelector.prototype.fireOnChange_ = function (viewer) {\n        for (var i = 0; i < this.onChangeCallbacks_.length; i++) {\n          this.onChangeCallbacks_[i](viewer);\n        }\n      };\n\n      ViewerSelector.prototype.onSave_ = function () {\n        this.selectedKey = this.getSelectedKey_();\n\n        if (!this.selectedKey || !DeviceInfo.Viewers[this.selectedKey]) {\n          console.error('ViewerSelector.onSave_: this should never happen!');\n          return;\n        }\n\n        this.fireOnChange_(DeviceInfo.Viewers[this.selectedKey]);\n\n        try {\n          localStorage.setItem(VIEWER_KEY, this.selectedKey);\n        } catch (error) {\n          console.error('Failed to save viewer profile: %s', error);\n        }\n\n        this.hide();\n      };\n\n      ViewerSelector.prototype.createDialog_ = function (options) {\n        var container = document.createElement('div');\n        container.classList.add(CLASS_NAME);\n        container.style.display = 'none';\n        var overlay = document.createElement('div');\n        var s = overlay.style;\n        s.position = 'fixed';\n        s.left = 0;\n        s.top = 0;\n        s.width = '100%';\n        s.height = '100%';\n        s.background = 'rgba(0, 0, 0, 0.3)';\n        overlay.addEventListener('click', this.hide.bind(this));\n        var width = 280;\n        var dialog = document.createElement('div');\n        var s = dialog.style;\n        s.boxSizing = 'border-box';\n        s.position = 'fixed';\n        s.top = '24px';\n        s.left = '50%';\n        s.marginLeft = -width / 2 + 'px';\n        s.width = width + 'px';\n        s.padding = '24px';\n        s.overflow = 'hidden';\n        s.background = '#fafafa';\n        s.fontFamily = \"'Roboto', sans-serif\";\n        s.boxShadow = '0px 5px 20px #666';\n        dialog.appendChild(this.createH1_('Select your viewer'));\n\n        for (var id in options) {\n          dialog.appendChild(this.createChoice_(id, options[id].label));\n        }\n\n        dialog.appendChild(this.createButton_('Save', this.onSave_.bind(this)));\n        container.appendChild(overlay);\n        container.appendChild(dialog);\n        return container;\n      };\n\n      ViewerSelector.prototype.createH1_ = function (name) {\n        var h1 = document.createElement('h1');\n        var s = h1.style;\n        s.color = 'black';\n        s.fontSize = '20px';\n        s.fontWeight = 'bold';\n        s.marginTop = 0;\n        s.marginBottom = '24px';\n        h1.innerHTML = name;\n        return h1;\n      };\n\n      ViewerSelector.prototype.createChoice_ = function (id, name) {\n        var div = document.createElement('div');\n        div.style.marginTop = '8px';\n        div.style.color = 'black';\n        var input = document.createElement('input');\n        input.style.fontSize = '30px';\n        input.setAttribute('id', id);\n        input.setAttribute('type', 'radio');\n        input.setAttribute('value', id);\n        input.setAttribute('name', 'field');\n        var label = document.createElement('label');\n        label.style.marginLeft = '4px';\n        label.setAttribute('for', id);\n        label.innerHTML = name;\n        div.appendChild(input);\n        div.appendChild(label);\n        return div;\n      };\n\n      ViewerSelector.prototype.createButton_ = function (label, onclick) {\n        var button = document.createElement('button');\n        button.innerHTML = label;\n        var s = button.style;\n        s.float = 'right';\n        s.textTransform = 'uppercase';\n        s.color = '#1094f7';\n        s.fontSize = '14px';\n        s.letterSpacing = 0;\n        s.border = 0;\n        s.background = 'none';\n        s.marginTop = '16px';\n        button.addEventListener('click', onclick);\n        return button;\n      };\n\n      var commonjsGlobal$$1 = typeof window !== 'undefined' ? window : typeof commonjsGlobal !== 'undefined' ? commonjsGlobal : typeof self !== 'undefined' ? self : {};\n\n      function unwrapExports$$1(x) {\n        return x && x.__esModule && Object.prototype.hasOwnProperty.call(x, 'default') ? x['default'] : x;\n      }\n\n      function createCommonjsModule$$1(fn, module) {\n        return module = {\n          exports: {}\n        }, fn(module, module.exports), module.exports;\n      }\n\n      var NoSleep = createCommonjsModule$$1(function (module, exports) {\n        (function webpackUniversalModuleDefinition(root, factory) {\n          module.exports = factory();\n        })(commonjsGlobal$$1, function () {\n          return function (modules) {\n            var installedModules = {};\n\n            function __webpack_require__(moduleId) {\n              if (installedModules[moduleId]) {\n                return installedModules[moduleId].exports;\n              }\n\n              var module = installedModules[moduleId] = {\n                i: moduleId,\n                l: false,\n                exports: {}\n              };\n              modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n              module.l = true;\n              return module.exports;\n            }\n\n            __webpack_require__.m = modules;\n            __webpack_require__.c = installedModules;\n\n            __webpack_require__.d = function (exports, name, getter) {\n              if (!__webpack_require__.o(exports, name)) {\n                Object.defineProperty(exports, name, {\n                  configurable: false,\n                  enumerable: true,\n                  get: getter\n                });\n              }\n            };\n\n            __webpack_require__.n = function (module) {\n              var getter = module && module.__esModule ? function getDefault() {\n                return module['default'];\n              } : function getModuleExports() {\n                return module;\n              };\n\n              __webpack_require__.d(getter, 'a', getter);\n\n              return getter;\n            };\n\n            __webpack_require__.o = function (object, property) {\n              return Object.prototype.hasOwnProperty.call(object, property);\n            };\n\n            __webpack_require__.p = \"\";\n            return __webpack_require__(__webpack_require__.s = 0);\n          }([function (module, exports, __webpack_require__) {\n            var _createClass = function () {\n              function defineProperties(target, props) {\n                for (var i = 0; i < props.length; i++) {\n                  var descriptor = props[i];\n                  descriptor.enumerable = descriptor.enumerable || false;\n                  descriptor.configurable = true;\n                  if (\"value\" in descriptor) descriptor.writable = true;\n                  Object.defineProperty(target, descriptor.key, descriptor);\n                }\n              }\n\n              return function (Constructor, protoProps, staticProps) {\n                if (protoProps) defineProperties(Constructor.prototype, protoProps);\n                if (staticProps) defineProperties(Constructor, staticProps);\n                return Constructor;\n              };\n            }();\n\n            function _classCallCheck(instance, Constructor) {\n              if (!(instance instanceof Constructor)) {\n                throw new TypeError(\"Cannot call a class as a function\");\n              }\n            }\n\n            var mediaFile = __webpack_require__(1);\n\n            var oldIOS = typeof navigator !== 'undefined' && parseFloat(('' + (/CPU.*OS ([0-9_]{3,4})[0-9_]{0,1}|(CPU like).*AppleWebKit.*Mobile/i.exec(navigator.userAgent) || [0, ''])[1]).replace('undefined', '3_2').replace('_', '.').replace('_', '')) < 10 && !window.MSStream;\n\n            var NoSleep = function () {\n              function NoSleep() {\n                _classCallCheck(this, NoSleep);\n\n                if (oldIOS) {\n                  this.noSleepTimer = null;\n                } else {\n                  this.noSleepVideo = document.createElement('video');\n                  this.noSleepVideo.setAttribute('playsinline', '');\n                  this.noSleepVideo.setAttribute('src', mediaFile);\n                  this.noSleepVideo.addEventListener('timeupdate', function (e) {\n                    if (this.noSleepVideo.currentTime > 0.5) {\n                      this.noSleepVideo.currentTime = Math.random();\n                    }\n                  }.bind(this));\n                }\n              }\n\n              _createClass(NoSleep, [{\n                key: 'enable',\n                value: function enable() {\n                  if (oldIOS) {\n                    this.disable();\n                    this.noSleepTimer = window.setInterval(function () {\n                      window.location.href = '/';\n                      window.setTimeout(window.stop, 0);\n                    }, 15000);\n                  } else {\n                    this.noSleepVideo.play();\n                  }\n                }\n              }, {\n                key: 'disable',\n                value: function disable() {\n                  if (oldIOS) {\n                    if (this.noSleepTimer) {\n                      window.clearInterval(this.noSleepTimer);\n                      this.noSleepTimer = null;\n                    }\n                  } else {\n                    this.noSleepVideo.pause();\n                  }\n                }\n              }]);\n\n              return NoSleep;\n            }();\n\n            module.exports = NoSleep;\n          }, function (module, exports, __webpack_require__) {\n            module.exports = 'data:video/mp4;base64,AAAAIGZ0eXBtcDQyAAACAGlzb21pc28yYXZjMW1wNDEAAAAIZnJlZQAACKBtZGF0AAAC8wYF///v3EXpvebZSLeWLNgg2SPu73gyNjQgLSBjb3JlIDE0MiByMjQ3OSBkZDc5YTYxIC0gSC4yNjQvTVBFRy00IEFWQyBjb2RlYyAtIENvcHlsZWZ0IDIwMDMtMjAxNCAtIGh0dHA6Ly93d3cudmlkZW9sYW4ub3JnL3gyNjQuaHRtbCAtIG9wdGlvbnM6IGNhYmFjPTEgcmVmPTEgZGVibG9jaz0xOjA6MCBhbmFseXNlPTB4MToweDExMSBtZT1oZXggc3VibWU9MiBwc3k9MSBwc3lfcmQ9MS4wMDowLjAwIG1peGVkX3JlZj0wIG1lX3JhbmdlPTE2IGNocm9tYV9tZT0xIHRyZWxsaXM9MCA4eDhkY3Q9MCBjcW09MCBkZWFkem9uZT0yMSwxMSBmYXN0X3Bza2lwPTEgY2hyb21hX3FwX29mZnNldD0wIHRocmVhZHM9NiBsb29rYWhlYWRfdGhyZWFkcz0xIHNsaWNlZF90aHJlYWRzPTAgbnI9MCBkZWNpbWF0ZT0xIGludGVybGFjZWQ9MCBibHVyYXlfY29tcGF0PTAgY29uc3RyYWluZWRfaW50cmE9MCBiZnJhbWVzPTMgYl9weXJhbWlkPTIgYl9hZGFwdD0xIGJfYmlhcz0wIGRpcmVjdD0xIHdlaWdodGI9MSBvcGVuX2dvcD0wIHdlaWdodHA9MSBrZXlpbnQ9MzAwIGtleWludF9taW49MzAgc2NlbmVjdXQ9NDAgaW50cmFfcmVmcmVzaD0wIHJjX2xvb2thaGVhZD0xMCByYz1jcmYgbWJ0cmVlPTEgY3JmPTIwLjAgcWNvbXA9MC42MCBxcG1pbj0wIHFwbWF4PTY5IHFwc3RlcD00IHZidl9tYXhyYXRlPTIwMDAwIHZidl9idWZzaXplPTI1MDAwIGNyZl9tYXg9MC4wIG5hbF9ocmQ9bm9uZSBmaWxsZXI9MCBpcF9yYXRpbz0xLjQwIGFxPTE6MS4wMACAAAAAOWWIhAA3//p+C7v8tDDSTjf97w55i3SbRPO4ZY+hkjD5hbkAkL3zpJ6h/LR1CAABzgB1kqqzUorlhQAAAAxBmiQYhn/+qZYADLgAAAAJQZ5CQhX/AAj5IQAD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';\n          }]);\n        });\n      });\n      var NoSleep$1 = unwrapExports$$1(NoSleep);\n      var nextDisplayId = 1000;\n      var defaultLeftBounds = [0, 0, 0.5, 1];\n      var defaultRightBounds = [0.5, 0, 0.5, 1];\n      var raf = window.requestAnimationFrame;\n      var caf = window.cancelAnimationFrame;\n\n      function VRFrameData() {\n        this.leftProjectionMatrix = new Float32Array(16);\n        this.leftViewMatrix = new Float32Array(16);\n        this.rightProjectionMatrix = new Float32Array(16);\n        this.rightViewMatrix = new Float32Array(16);\n        this.pose = null;\n      }\n\n      function VRDisplayCapabilities(config) {\n        Object.defineProperties(this, {\n          hasPosition: {\n            writable: false,\n            enumerable: true,\n            value: config.hasPosition\n          },\n          hasExternalDisplay: {\n            writable: false,\n            enumerable: true,\n            value: config.hasExternalDisplay\n          },\n          canPresent: {\n            writable: false,\n            enumerable: true,\n            value: config.canPresent\n          },\n          maxLayers: {\n            writable: false,\n            enumerable: true,\n            value: config.maxLayers\n          },\n          hasOrientation: {\n            enumerable: true,\n            get: function get() {\n              deprecateWarning('VRDisplayCapabilities.prototype.hasOrientation', 'VRDisplay.prototype.getFrameData');\n              return config.hasOrientation;\n            }\n          }\n        });\n      }\n\n      function VRDisplay(config) {\n        config = config || {};\n        var USE_WAKELOCK = 'wakelock' in config ? config.wakelock : true;\n        this.isPolyfilled = true;\n        this.displayId = nextDisplayId++;\n        this.displayName = '';\n        this.depthNear = 0.01;\n        this.depthFar = 10000.0;\n        this.isPresenting = false;\n        Object.defineProperty(this, 'isConnected', {\n          get: function get() {\n            deprecateWarning('VRDisplay.prototype.isConnected', 'VRDisplayCapabilities.prototype.hasExternalDisplay');\n            return false;\n          }\n        });\n        this.capabilities = new VRDisplayCapabilities({\n          hasPosition: false,\n          hasOrientation: false,\n          hasExternalDisplay: false,\n          canPresent: false,\n          maxLayers: 1\n        });\n        this.stageParameters = null;\n        this.waitingForPresent_ = false;\n        this.layer_ = null;\n        this.originalParent_ = null;\n        this.fullscreenElement_ = null;\n        this.fullscreenWrapper_ = null;\n        this.fullscreenElementCachedStyle_ = null;\n        this.fullscreenEventTarget_ = null;\n        this.fullscreenChangeHandler_ = null;\n        this.fullscreenErrorHandler_ = null;\n\n        if (USE_WAKELOCK && isMobile()) {\n          this.wakelock_ = new NoSleep$1();\n        }\n      }\n\n      VRDisplay.prototype.getFrameData = function (frameData) {\n        return frameDataFromPose(frameData, this._getPose(), this);\n      };\n\n      VRDisplay.prototype.getPose = function () {\n        deprecateWarning('VRDisplay.prototype.getPose', 'VRDisplay.prototype.getFrameData');\n        return this._getPose();\n      };\n\n      VRDisplay.prototype.resetPose = function () {\n        deprecateWarning('VRDisplay.prototype.resetPose');\n        return this._resetPose();\n      };\n\n      VRDisplay.prototype.getImmediatePose = function () {\n        deprecateWarning('VRDisplay.prototype.getImmediatePose', 'VRDisplay.prototype.getFrameData');\n        return this._getPose();\n      };\n\n      VRDisplay.prototype.requestAnimationFrame = function (callback) {\n        return raf(callback);\n      };\n\n      VRDisplay.prototype.cancelAnimationFrame = function (id) {\n        return caf(id);\n      };\n\n      VRDisplay.prototype.wrapForFullscreen = function (element) {\n        if (isIOS()) {\n          return element;\n        }\n\n        if (!this.fullscreenWrapper_) {\n          this.fullscreenWrapper_ = document.createElement('div');\n          var cssProperties = ['height: ' + Math.min(screen.height, screen.width) + 'px !important', 'top: 0 !important', 'left: 0 !important', 'right: 0 !important', 'border: 0', 'margin: 0', 'padding: 0', 'z-index: 999999 !important', 'position: fixed'];\n          this.fullscreenWrapper_.setAttribute('style', cssProperties.join('; ') + ';');\n          this.fullscreenWrapper_.classList.add('webvr-polyfill-fullscreen-wrapper');\n        }\n\n        if (this.fullscreenElement_ == element) {\n          return this.fullscreenWrapper_;\n        }\n\n        if (this.fullscreenElement_) {\n          if (this.originalParent_) {\n            this.originalParent_.appendChild(this.fullscreenElement_);\n          } else {\n            this.fullscreenElement_.parentElement.removeChild(this.fullscreenElement_);\n          }\n        }\n\n        this.fullscreenElement_ = element;\n        this.originalParent_ = element.parentElement;\n\n        if (!this.originalParent_) {\n          document.body.appendChild(element);\n        }\n\n        if (!this.fullscreenWrapper_.parentElement) {\n          var parent = this.fullscreenElement_.parentElement;\n          parent.insertBefore(this.fullscreenWrapper_, this.fullscreenElement_);\n          parent.removeChild(this.fullscreenElement_);\n        }\n\n        this.fullscreenWrapper_.insertBefore(this.fullscreenElement_, this.fullscreenWrapper_.firstChild);\n        this.fullscreenElementCachedStyle_ = this.fullscreenElement_.getAttribute('style');\n        var self = this;\n\n        function applyFullscreenElementStyle() {\n          if (!self.fullscreenElement_) {\n            return;\n          }\n\n          var cssProperties = ['position: absolute', 'top: 0', 'left: 0', 'width: ' + Math.max(screen.width, screen.height) + 'px', 'height: ' + Math.min(screen.height, screen.width) + 'px', 'border: 0', 'margin: 0', 'padding: 0'];\n          self.fullscreenElement_.setAttribute('style', cssProperties.join('; ') + ';');\n        }\n\n        applyFullscreenElementStyle();\n        return this.fullscreenWrapper_;\n      };\n\n      VRDisplay.prototype.removeFullscreenWrapper = function () {\n        if (!this.fullscreenElement_) {\n          return;\n        }\n\n        var element = this.fullscreenElement_;\n\n        if (this.fullscreenElementCachedStyle_) {\n          element.setAttribute('style', this.fullscreenElementCachedStyle_);\n        } else {\n          element.removeAttribute('style');\n        }\n\n        this.fullscreenElement_ = null;\n        this.fullscreenElementCachedStyle_ = null;\n        var parent = this.fullscreenWrapper_.parentElement;\n        this.fullscreenWrapper_.removeChild(element);\n\n        if (this.originalParent_ === parent) {\n          parent.insertBefore(element, this.fullscreenWrapper_);\n        } else if (this.originalParent_) {\n          this.originalParent_.appendChild(element);\n        }\n\n        parent.removeChild(this.fullscreenWrapper_);\n        return element;\n      };\n\n      VRDisplay.prototype.requestPresent = function (layers) {\n        var wasPresenting = this.isPresenting;\n        var self = this;\n\n        if (!(layers instanceof Array)) {\n          deprecateWarning('VRDisplay.prototype.requestPresent with non-array argument', 'an array of VRLayers as the first argument');\n          layers = [layers];\n        }\n\n        return new Promise(function (resolve, reject) {\n          if (!self.capabilities.canPresent) {\n            reject(new Error('VRDisplay is not capable of presenting.'));\n            return;\n          }\n\n          if (layers.length == 0 || layers.length > self.capabilities.maxLayers) {\n            reject(new Error('Invalid number of layers.'));\n            return;\n          }\n\n          var incomingLayer = layers[0];\n\n          if (!incomingLayer.source) {\n            resolve();\n            return;\n          }\n\n          var leftBounds = incomingLayer.leftBounds || defaultLeftBounds;\n          var rightBounds = incomingLayer.rightBounds || defaultRightBounds;\n\n          if (wasPresenting) {\n            var layer = self.layer_;\n\n            if (layer.source !== incomingLayer.source) {\n              layer.source = incomingLayer.source;\n            }\n\n            for (var i = 0; i < 4; i++) {\n              layer.leftBounds[i] = leftBounds[i];\n              layer.rightBounds[i] = rightBounds[i];\n            }\n\n            self.wrapForFullscreen(self.layer_.source);\n            self.updatePresent_();\n            resolve();\n            return;\n          }\n\n          self.layer_ = {\n            predistorted: incomingLayer.predistorted,\n            source: incomingLayer.source,\n            leftBounds: leftBounds.slice(0),\n            rightBounds: rightBounds.slice(0)\n          };\n          self.waitingForPresent_ = false;\n\n          if (self.layer_ && self.layer_.source) {\n            var fullscreenElement = self.wrapForFullscreen(self.layer_.source);\n\n            var onFullscreenChange = function onFullscreenChange() {\n              var actualFullscreenElement = getFullscreenElement();\n              self.isPresenting = fullscreenElement === actualFullscreenElement;\n\n              if (self.isPresenting) {\n                if (screen.orientation && screen.orientation.lock) {\n                  screen.orientation.lock('landscape-primary').catch(function (error) {\n                    console.error('screen.orientation.lock() failed due to', error.message);\n                  });\n                }\n\n                self.waitingForPresent_ = false;\n                self.beginPresent_();\n                resolve();\n              } else {\n                if (screen.orientation && screen.orientation.unlock) {\n                  screen.orientation.unlock();\n                }\n\n                self.removeFullscreenWrapper();\n                self.disableWakeLock();\n                self.endPresent_();\n                self.removeFullscreenListeners_();\n              }\n\n              self.fireVRDisplayPresentChange_();\n            };\n\n            var onFullscreenError = function onFullscreenError() {\n              if (!self.waitingForPresent_) {\n                return;\n              }\n\n              self.removeFullscreenWrapper();\n              self.removeFullscreenListeners_();\n              self.disableWakeLock();\n              self.waitingForPresent_ = false;\n              self.isPresenting = false;\n              reject(new Error('Unable to present.'));\n            };\n\n            self.addFullscreenListeners_(fullscreenElement, onFullscreenChange, onFullscreenError);\n\n            if (requestFullscreen(fullscreenElement)) {\n              self.enableWakeLock();\n              self.waitingForPresent_ = true;\n            } else if (isIOS() || isWebViewAndroid()) {\n              self.enableWakeLock();\n              self.isPresenting = true;\n              self.beginPresent_();\n              self.fireVRDisplayPresentChange_();\n              resolve();\n            }\n          }\n\n          if (!self.waitingForPresent_ && !isIOS()) {\n            exitFullscreen();\n            reject(new Error('Unable to present.'));\n          }\n        });\n      };\n\n      VRDisplay.prototype.exitPresent = function () {\n        var wasPresenting = this.isPresenting;\n        var self = this;\n        this.isPresenting = false;\n        this.layer_ = null;\n        this.disableWakeLock();\n        return new Promise(function (resolve, reject) {\n          if (wasPresenting) {\n            if (!exitFullscreen() && isIOS()) {\n              self.endPresent_();\n              self.fireVRDisplayPresentChange_();\n            }\n\n            if (isWebViewAndroid()) {\n              self.removeFullscreenWrapper();\n              self.removeFullscreenListeners_();\n              self.endPresent_();\n              self.fireVRDisplayPresentChange_();\n            }\n\n            resolve();\n          } else {\n            reject(new Error('Was not presenting to VRDisplay.'));\n          }\n        });\n      };\n\n      VRDisplay.prototype.getLayers = function () {\n        if (this.layer_) {\n          return [this.layer_];\n        }\n\n        return [];\n      };\n\n      VRDisplay.prototype.fireVRDisplayPresentChange_ = function () {\n        var event = new CustomEvent('vrdisplaypresentchange', {\n          detail: {\n            display: this\n          }\n        });\n        window.dispatchEvent(event);\n      };\n\n      VRDisplay.prototype.fireVRDisplayConnect_ = function () {\n        var event = new CustomEvent('vrdisplayconnect', {\n          detail: {\n            display: this\n          }\n        });\n        window.dispatchEvent(event);\n      };\n\n      VRDisplay.prototype.addFullscreenListeners_ = function (element, changeHandler, errorHandler) {\n        this.removeFullscreenListeners_();\n        this.fullscreenEventTarget_ = element;\n        this.fullscreenChangeHandler_ = changeHandler;\n        this.fullscreenErrorHandler_ = errorHandler;\n\n        if (changeHandler) {\n          if (document.fullscreenEnabled) {\n            element.addEventListener('fullscreenchange', changeHandler, false);\n          } else if (document.webkitFullscreenEnabled) {\n            element.addEventListener('webkitfullscreenchange', changeHandler, false);\n          } else if (document.mozFullScreenEnabled) {\n            document.addEventListener('mozfullscreenchange', changeHandler, false);\n          } else if (document.msFullscreenEnabled) {\n            element.addEventListener('msfullscreenchange', changeHandler, false);\n          }\n        }\n\n        if (errorHandler) {\n          if (document.fullscreenEnabled) {\n            element.addEventListener('fullscreenerror', errorHandler, false);\n          } else if (document.webkitFullscreenEnabled) {\n            element.addEventListener('webkitfullscreenerror', errorHandler, false);\n          } else if (document.mozFullScreenEnabled) {\n            document.addEventListener('mozfullscreenerror', errorHandler, false);\n          } else if (document.msFullscreenEnabled) {\n            element.addEventListener('msfullscreenerror', errorHandler, false);\n          }\n        }\n      };\n\n      VRDisplay.prototype.removeFullscreenListeners_ = function () {\n        if (!this.fullscreenEventTarget_) return;\n        var element = this.fullscreenEventTarget_;\n\n        if (this.fullscreenChangeHandler_) {\n          var changeHandler = this.fullscreenChangeHandler_;\n          element.removeEventListener('fullscreenchange', changeHandler, false);\n          element.removeEventListener('webkitfullscreenchange', changeHandler, false);\n          document.removeEventListener('mozfullscreenchange', changeHandler, false);\n          element.removeEventListener('msfullscreenchange', changeHandler, false);\n        }\n\n        if (this.fullscreenErrorHandler_) {\n          var errorHandler = this.fullscreenErrorHandler_;\n          element.removeEventListener('fullscreenerror', errorHandler, false);\n          element.removeEventListener('webkitfullscreenerror', errorHandler, false);\n          document.removeEventListener('mozfullscreenerror', errorHandler, false);\n          element.removeEventListener('msfullscreenerror', errorHandler, false);\n        }\n\n        this.fullscreenEventTarget_ = null;\n        this.fullscreenChangeHandler_ = null;\n        this.fullscreenErrorHandler_ = null;\n      };\n\n      VRDisplay.prototype.enableWakeLock = function () {\n        if (this.wakelock_) {\n          this.wakelock_.enable();\n        }\n      };\n\n      VRDisplay.prototype.disableWakeLock = function () {\n        if (this.wakelock_) {\n          this.wakelock_.disable();\n        }\n      };\n\n      VRDisplay.prototype.beginPresent_ = function () {};\n\n      VRDisplay.prototype.endPresent_ = function () {};\n\n      VRDisplay.prototype.submitFrame = function (pose) {};\n\n      VRDisplay.prototype.getEyeParameters = function (whichEye) {\n        return null;\n      };\n\n      var config = {\n        ADDITIONAL_VIEWERS: [],\n        DEFAULT_VIEWER: '',\n        MOBILE_WAKE_LOCK: true,\n        DEBUG: false,\n        DPDB_URL: 'https://dpdb.webvr.rocks/dpdb.json',\n        K_FILTER: 0.98,\n        PREDICTION_TIME_S: 0.040,\n        CARDBOARD_UI_DISABLED: false,\n        ROTATE_INSTRUCTIONS_DISABLED: false,\n        YAW_ONLY: false,\n        BUFFER_SCALE: 0.5,\n        DIRTY_SUBMIT_FRAME_BINDINGS: false\n      };\n      var Eye = {\n        LEFT: 'left',\n        RIGHT: 'right'\n      };\n\n      function CardboardVRDisplay(config$$1) {\n        var defaults = extend({}, config);\n        config$$1 = extend(defaults, config$$1 || {});\n        VRDisplay.call(this, {\n          wakelock: config$$1.MOBILE_WAKE_LOCK\n        });\n        this.config = config$$1;\n        this.displayName = 'Cardboard VRDisplay';\n        this.capabilities = new VRDisplayCapabilities({\n          hasPosition: false,\n          hasOrientation: true,\n          hasExternalDisplay: false,\n          canPresent: true,\n          maxLayers: 1\n        });\n        this.stageParameters = null;\n        this.bufferScale_ = this.config.BUFFER_SCALE;\n        this.poseSensor_ = new PoseSensor(this.config);\n        this.distorter_ = null;\n        this.cardboardUI_ = null;\n        this.dpdb_ = new Dpdb(this.config.DPDB_URL, this.onDeviceParamsUpdated_.bind(this));\n        this.deviceInfo_ = new DeviceInfo(this.dpdb_.getDeviceParams(), config$$1.ADDITIONAL_VIEWERS);\n        this.viewerSelector_ = new ViewerSelector(config$$1.DEFAULT_VIEWER);\n        this.viewerSelector_.onChange(this.onViewerChanged_.bind(this));\n        this.deviceInfo_.setViewer(this.viewerSelector_.getCurrentViewer());\n\n        if (!this.config.ROTATE_INSTRUCTIONS_DISABLED) {\n          this.rotateInstructions_ = new RotateInstructions();\n        }\n\n        if (isIOS()) {\n          window.addEventListener('resize', this.onResize_.bind(this));\n        }\n      }\n\n      CardboardVRDisplay.prototype = Object.create(VRDisplay.prototype);\n\n      CardboardVRDisplay.prototype._getPose = function () {\n        return {\n          position: null,\n          orientation: this.poseSensor_.getOrientation(),\n          linearVelocity: null,\n          linearAcceleration: null,\n          angularVelocity: null,\n          angularAcceleration: null\n        };\n      };\n\n      CardboardVRDisplay.prototype._resetPose = function () {\n        if (this.poseSensor_.resetPose) {\n          this.poseSensor_.resetPose();\n        }\n      };\n\n      CardboardVRDisplay.prototype._getFieldOfView = function (whichEye) {\n        var fieldOfView;\n\n        if (whichEye == Eye.LEFT) {\n          fieldOfView = this.deviceInfo_.getFieldOfViewLeftEye();\n        } else if (whichEye == Eye.RIGHT) {\n          fieldOfView = this.deviceInfo_.getFieldOfViewRightEye();\n        } else {\n          console.error('Invalid eye provided: %s', whichEye);\n          return null;\n        }\n\n        return fieldOfView;\n      };\n\n      CardboardVRDisplay.prototype._getEyeOffset = function (whichEye) {\n        var offset;\n\n        if (whichEye == Eye.LEFT) {\n          offset = [-this.deviceInfo_.viewer.interLensDistance * 0.5, 0.0, 0.0];\n        } else if (whichEye == Eye.RIGHT) {\n          offset = [this.deviceInfo_.viewer.interLensDistance * 0.5, 0.0, 0.0];\n        } else {\n          console.error('Invalid eye provided: %s', whichEye);\n          return null;\n        }\n\n        return offset;\n      };\n\n      CardboardVRDisplay.prototype.getEyeParameters = function (whichEye) {\n        var offset = this._getEyeOffset(whichEye);\n\n        var fieldOfView = this._getFieldOfView(whichEye);\n\n        var eyeParams = {\n          offset: offset,\n          renderWidth: this.deviceInfo_.device.width * 0.5 * this.bufferScale_,\n          renderHeight: this.deviceInfo_.device.height * this.bufferScale_\n        };\n        Object.defineProperty(eyeParams, 'fieldOfView', {\n          enumerable: true,\n          get: function get() {\n            deprecateWarning('VRFieldOfView', 'VRFrameData\\'s projection matrices');\n            return fieldOfView;\n          }\n        });\n        return eyeParams;\n      };\n\n      CardboardVRDisplay.prototype.onDeviceParamsUpdated_ = function (newParams) {\n        if (this.config.DEBUG) {\n          console.log('DPDB reported that device params were updated.');\n        }\n\n        this.deviceInfo_.updateDeviceParams(newParams);\n\n        if (this.distorter_) {\n          this.distorter_.updateDeviceInfo(this.deviceInfo_);\n        }\n      };\n\n      CardboardVRDisplay.prototype.updateBounds_ = function () {\n        if (this.layer_ && this.distorter_ && (this.layer_.leftBounds || this.layer_.rightBounds)) {\n          this.distorter_.setTextureBounds(this.layer_.leftBounds, this.layer_.rightBounds);\n        }\n      };\n\n      CardboardVRDisplay.prototype.beginPresent_ = function () {\n        var gl = this.layer_.source.getContext('webgl');\n        if (!gl) gl = this.layer_.source.getContext('experimental-webgl');\n        if (!gl) gl = this.layer_.source.getContext('webgl2');\n        if (!gl) return;\n\n        if (this.layer_.predistorted) {\n          if (!this.config.CARDBOARD_UI_DISABLED) {\n            gl.canvas.width = getScreenWidth() * this.bufferScale_;\n            gl.canvas.height = getScreenHeight() * this.bufferScale_;\n            this.cardboardUI_ = new CardboardUI(gl);\n          }\n        } else {\n          if (!this.config.CARDBOARD_UI_DISABLED) {\n            this.cardboardUI_ = new CardboardUI(gl);\n          }\n\n          this.distorter_ = new CardboardDistorter(gl, this.cardboardUI_, this.config.BUFFER_SCALE, this.config.DIRTY_SUBMIT_FRAME_BINDINGS);\n          this.distorter_.updateDeviceInfo(this.deviceInfo_);\n        }\n\n        if (this.cardboardUI_) {\n          this.cardboardUI_.listen(function (e) {\n            this.viewerSelector_.show(this.layer_.source.parentElement);\n            e.stopPropagation();\n            e.preventDefault();\n          }.bind(this), function (e) {\n            this.exitPresent();\n            e.stopPropagation();\n            e.preventDefault();\n          }.bind(this));\n        }\n\n        if (this.rotateInstructions_) {\n          if (isLandscapeMode() && isMobile()) {\n            this.rotateInstructions_.showTemporarily(3000, this.layer_.source.parentElement);\n          } else {\n            this.rotateInstructions_.update();\n          }\n        }\n\n        this.orientationHandler = this.onOrientationChange_.bind(this);\n        window.addEventListener('orientationchange', this.orientationHandler);\n        this.vrdisplaypresentchangeHandler = this.updateBounds_.bind(this);\n        window.addEventListener('vrdisplaypresentchange', this.vrdisplaypresentchangeHandler);\n        this.fireVRDisplayDeviceParamsChange_();\n      };\n\n      CardboardVRDisplay.prototype.endPresent_ = function () {\n        if (this.distorter_) {\n          this.distorter_.destroy();\n          this.distorter_ = null;\n        }\n\n        if (this.cardboardUI_) {\n          this.cardboardUI_.destroy();\n          this.cardboardUI_ = null;\n        }\n\n        if (this.rotateInstructions_) {\n          this.rotateInstructions_.hide();\n        }\n\n        this.viewerSelector_.hide();\n        window.removeEventListener('orientationchange', this.orientationHandler);\n        window.removeEventListener('vrdisplaypresentchange', this.vrdisplaypresentchangeHandler);\n      };\n\n      CardboardVRDisplay.prototype.updatePresent_ = function () {\n        this.endPresent_();\n        this.beginPresent_();\n      };\n\n      CardboardVRDisplay.prototype.submitFrame = function (pose) {\n        if (this.distorter_) {\n          this.updateBounds_();\n          this.distorter_.submitFrame();\n        } else if (this.cardboardUI_ && this.layer_) {\n          var gl = this.layer_.source.getContext('webgl');\n          if (!gl) gl = this.layer_.source.getContext('experimental-webgl');\n          if (!gl) gl = this.layer_.source.getContext('webgl2');\n          var canvas = gl.canvas;\n\n          if (canvas.width != this.lastWidth || canvas.height != this.lastHeight) {\n            this.cardboardUI_.onResize();\n          }\n\n          this.lastWidth = canvas.width;\n          this.lastHeight = canvas.height;\n          this.cardboardUI_.render();\n        }\n      };\n\n      CardboardVRDisplay.prototype.onOrientationChange_ = function (e) {\n        this.viewerSelector_.hide();\n\n        if (this.rotateInstructions_) {\n          this.rotateInstructions_.update();\n        }\n\n        this.onResize_();\n      };\n\n      CardboardVRDisplay.prototype.onResize_ = function (e) {\n        if (this.layer_) {\n          var gl = this.layer_.source.getContext('webgl');\n          if (!gl) gl = this.layer_.source.getContext('experimental-webgl');\n          if (!gl) gl = this.layer_.source.getContext('webgl2');\n          var cssProperties = ['position: absolute', 'top: 0', 'left: 0', 'width: 100vw', 'height: 100vh', 'border: 0', 'margin: 0', 'padding: 0px', 'box-sizing: content-box'];\n          gl.canvas.setAttribute('style', cssProperties.join('; ') + ';');\n          safariCssSizeWorkaround(gl.canvas);\n        }\n      };\n\n      CardboardVRDisplay.prototype.onViewerChanged_ = function (viewer) {\n        this.deviceInfo_.setViewer(viewer);\n\n        if (this.distorter_) {\n          this.distorter_.updateDeviceInfo(this.deviceInfo_);\n        }\n\n        this.fireVRDisplayDeviceParamsChange_();\n      };\n\n      CardboardVRDisplay.prototype.fireVRDisplayDeviceParamsChange_ = function () {\n        var event = new CustomEvent('vrdisplaydeviceparamschange', {\n          detail: {\n            vrdisplay: this,\n            deviceInfo: this.deviceInfo_\n          }\n        });\n        window.dispatchEvent(event);\n      };\n\n      CardboardVRDisplay.VRFrameData = VRFrameData;\n      CardboardVRDisplay.VRDisplay = VRDisplay;\n      return CardboardVRDisplay;\n    });\n  });\n  var CardboardVRDisplay = unwrapExports(cardboardVrDisplay);\n  var version = \"0.10.10\";\n  var DefaultConfig = {\n    ADDITIONAL_VIEWERS: [],\n    DEFAULT_VIEWER: '',\n    PROVIDE_MOBILE_VRDISPLAY: true,\n    MOBILE_WAKE_LOCK: true,\n    DEBUG: false,\n    DPDB_URL: 'https://dpdb.webvr.rocks/dpdb.json',\n    K_FILTER: 0.98,\n    PREDICTION_TIME_S: 0.040,\n    CARDBOARD_UI_DISABLED: false,\n    ROTATE_INSTRUCTIONS_DISABLED: false,\n    YAW_ONLY: false,\n    BUFFER_SCALE: 0.5,\n    DIRTY_SUBMIT_FRAME_BINDINGS: false\n  };\n\n  function WebVRPolyfill(config) {\n    this.config = extend(extend({}, DefaultConfig), config);\n    this.polyfillDisplays = [];\n    this.enabled = false;\n    this.hasNative = 'getVRDisplays' in navigator;\n    this.native = {};\n    this.native.getVRDisplays = navigator.getVRDisplays;\n    this.native.VRFrameData = window.VRFrameData;\n    this.native.VRDisplay = window.VRDisplay;\n\n    if (!this.hasNative || this.config.PROVIDE_MOBILE_VRDISPLAY && isMobile()) {\n      this.enable();\n      this.getVRDisplays().then(function (displays) {\n        if (displays && displays[0] && displays[0].fireVRDisplayConnect_) {\n          displays[0].fireVRDisplayConnect_();\n        }\n      });\n    }\n  }\n\n  WebVRPolyfill.prototype.getPolyfillDisplays = function () {\n    if (this._polyfillDisplaysPopulated) {\n      return this.polyfillDisplays;\n    }\n\n    if (isMobile()) {\n      var vrDisplay = new CardboardVRDisplay({\n        ADDITIONAL_VIEWERS: this.config.ADDITIONAL_VIEWERS,\n        DEFAULT_VIEWER: this.config.DEFAULT_VIEWER,\n        MOBILE_WAKE_LOCK: this.config.MOBILE_WAKE_LOCK,\n        DEBUG: this.config.DEBUG,\n        DPDB_URL: this.config.DPDB_URL,\n        CARDBOARD_UI_DISABLED: this.config.CARDBOARD_UI_DISABLED,\n        K_FILTER: this.config.K_FILTER,\n        PREDICTION_TIME_S: this.config.PREDICTION_TIME_S,\n        ROTATE_INSTRUCTIONS_DISABLED: this.config.ROTATE_INSTRUCTIONS_DISABLED,\n        YAW_ONLY: this.config.YAW_ONLY,\n        BUFFER_SCALE: this.config.BUFFER_SCALE,\n        DIRTY_SUBMIT_FRAME_BINDINGS: this.config.DIRTY_SUBMIT_FRAME_BINDINGS\n      });\n      this.polyfillDisplays.push(vrDisplay);\n    }\n\n    this._polyfillDisplaysPopulated = true;\n    return this.polyfillDisplays;\n  };\n\n  WebVRPolyfill.prototype.enable = function () {\n    this.enabled = true;\n\n    if (this.hasNative && this.native.VRFrameData) {\n      var NativeVRFrameData = this.native.VRFrameData;\n      var nativeFrameData = new this.native.VRFrameData();\n      var nativeGetFrameData = this.native.VRDisplay.prototype.getFrameData;\n\n      window.VRDisplay.prototype.getFrameData = function (frameData) {\n        if (frameData instanceof NativeVRFrameData) {\n          nativeGetFrameData.call(this, frameData);\n          return;\n        }\n\n        nativeGetFrameData.call(this, nativeFrameData);\n        frameData.pose = nativeFrameData.pose;\n        copyArray(nativeFrameData.leftProjectionMatrix, frameData.leftProjectionMatrix);\n        copyArray(nativeFrameData.rightProjectionMatrix, frameData.rightProjectionMatrix);\n        copyArray(nativeFrameData.leftViewMatrix, frameData.leftViewMatrix);\n        copyArray(nativeFrameData.rightViewMatrix, frameData.rightViewMatrix);\n      };\n    }\n\n    navigator.getVRDisplays = this.getVRDisplays.bind(this);\n    window.VRDisplay = CardboardVRDisplay.VRDisplay;\n    window.VRFrameData = CardboardVRDisplay.VRFrameData;\n  };\n\n  WebVRPolyfill.prototype.getVRDisplays = function () {\n    var _this = this;\n\n    var config = this.config;\n\n    if (!this.hasNative) {\n      return Promise.resolve(this.getPolyfillDisplays());\n    }\n\n    return this.native.getVRDisplays.call(navigator).then(function (nativeDisplays) {\n      return nativeDisplays.length > 0 ? nativeDisplays : _this.getPolyfillDisplays();\n    });\n  };\n\n  WebVRPolyfill.version = version;\n  WebVRPolyfill.VRFrameData = CardboardVRDisplay.VRFrameData;\n  WebVRPolyfill.VRDisplay = CardboardVRDisplay.VRDisplay;\n  var webvrPolyfill = Object.freeze({\n    default: WebVRPolyfill\n  });\n  var require$$0 = webvrPolyfill && WebVRPolyfill || webvrPolyfill;\n\n  if (typeof commonjsGlobal !== 'undefined' && commonjsGlobal.window) {\n    if (!commonjsGlobal.document) {\n      commonjsGlobal.document = commonjsGlobal.window.document;\n    }\n\n    if (!commonjsGlobal.navigator) {\n      commonjsGlobal.navigator = commonjsGlobal.window.navigator;\n    }\n  }\n\n  var src = require$$0;\n  return src;\n});","map":{"version":3,"sources":["C:/Users/Hannuri/Desktop/RoyalCyber/my-first-app/node_modules/webvr-polyfill/build/webvr-polyfill.js"],"names":["global","factory","exports","module","define","amd","WebVRPolyfill","commonjsGlobal","window","self","unwrapExports","x","__esModule","Object","prototype","hasOwnProperty","call","createCommonjsModule","fn","isMobile","test","navigator","userAgent","copyArray","source","dest","i","n","length","extend","src","key","cardboardVrDisplay","classCallCheck","instance","Constructor","TypeError","createClass","defineProperties","target","props","descriptor","enumerable","configurable","writable","defineProperty","protoProps","staticProps","slicedToArray","sliceIterator","arr","_arr","_n","_d","_e","undefined","_i","Symbol","iterator","_s","next","done","push","value","err","Array","isArray","MIN_TIMESTEP","MAX_TIMESTEP","dataUri","mimeType","svg","encodeURIComponent","lerp","a","b","t","isIOS","platform","isWebViewAndroid","indexOf","isSafari","isFirefoxAndroid","getChromeVersion","match","parseInt","isChromeWithoutDeviceMotion","_match$1$split","split","_match$1$split2","major","minor","branch","build","isR7","isLandscapeMode","rtn","orientation","isTimestampDeltaValid","timestampDeltaS","isNaN","getScreenWidth","Math","max","screen","width","height","devicePixelRatio","getScreenHeight","min","requestFullscreen","element","webkitRequestFullscreen","mozRequestFullScreen","msRequestFullscreen","exitFullscreen","document","webkitExitFullscreen","mozCancelFullScreen","msExitFullscreen","getFullscreenElement","fullscreenElement","webkitFullscreenElement","mozFullScreenElement","msFullscreenElement","linkProgram","gl","vertexSource","fragmentSource","attribLocationMap","vertexShader","createShader","VERTEX_SHADER","shaderSource","compileShader","fragmentShader","FRAGMENT_SHADER","program","createProgram","attachShader","attribName","bindAttribLocation","deleteShader","getProgramUniforms","uniforms","uniformCount","getProgramParameter","ACTIVE_UNIFORMS","uniformName","uniformInfo","getActiveUniform","name","replace","getUniformLocation","orthoMatrix","out","left","right","bottom","top","near","far","lr","bt","nf","check","substr","vendor","opera","safariCssSizeWorkaround","canvas","style","setTimeout","frameDataFromPose","piOver180","PI","rad45","mat4_perspectiveFromFieldOfView","fov","upTan","tan","upDegrees","downTan","downDegrees","leftTan","leftDegrees","rightTan","rightDegrees","xScale","yScale","mat4_fromRotationTranslation","q","v","y","z","w","x2","y2","z2","xx","xy","xz","yy","yz","zz","wx","wy","wz","mat4_translate","a00","a01","a02","a03","a10","a11","a12","a13","a20","a21","a22","a23","mat4_invert","a30","a31","a32","a33","b00","b01","b02","b03","b04","b05","b06","b07","b08","b09","b10","b11","det","defaultOrientation","Float32Array","defaultPosition","updateEyeMatrices","projection","view","pose","offset","vrDisplay","depthNear","depthFar","position","frameData","timestamp","leftProjectionMatrix","leftViewMatrix","_getFieldOfView","_getEyeOffset","rightProjectionMatrix","rightViewMatrix","isInsideCrossOriginIFrame","isFramed","refOrigin","getOriginFromUrl","referrer","thisOrigin","location","href","url","domainIdx","protoSepIdx","domainEndIdx","substring","getQuaternionAngle","quat","console","warn","angle","acos","warnOnce","observedWarnings","message","deprecateWarning","deprecated","suggested","alternative","WGLUPreserveGLState","bindings","callback","boundValues","activeTexture","binding","TEXTURE_BINDING_2D","TEXTURE_BINDING_CUBE_MAP","textureUnit","TEXTURE0","TEXTURE31","error","getParameter","ACTIVE_TEXTURE","boundValue","ARRAY_BUFFER_BINDING","bindBuffer","ARRAY_BUFFER","COLOR_CLEAR_VALUE","clearColor","COLOR_WRITEMASK","colorMask","CURRENT_PROGRAM","useProgram","ELEMENT_ARRAY_BUFFER_BINDING","ELEMENT_ARRAY_BUFFER","FRAMEBUFFER_BINDING","bindFramebuffer","FRAMEBUFFER","RENDERBUFFER_BINDING","bindRenderbuffer","RENDERBUFFER","bindTexture","TEXTURE_2D","TEXTURE_CUBE_MAP","VIEWPORT","viewport","BLEND","CULL_FACE","DEPTH_TEST","SCISSOR_TEST","STENCIL_TEST","enable","disable","log","toString","glPreserveState","distortionVS","join","distortionFS","CardboardDistorter","cardboardUI","bufferScale","dirtySubmitFrameBindings","ctxAttribs","getContextAttributes","meshWidth","meshHeight","bufferWidth","drawingBufferWidth","bufferHeight","drawingBufferHeight","realBindFramebuffer","realEnable","realDisable","realColorMask","realClearColor","realViewport","realCanvasWidth","getOwnPropertyDescriptor","__proto__","realCanvasHeight","isPatched","lastBoundFramebuffer","cullFace","depthTest","blend","scissorTest","stencilTest","attribs","texCoord","viewportOffsetScale","setTextureBounds","vertexBuffer","createBuffer","indexBuffer","indexCount","renderTarget","createTexture","framebuffer","createFramebuffer","depthStencilBuffer","depthBuffer","stencilBuffer","depth","stencil","createRenderbuffer","patch","onResize","destroy","unpatch","deleteProgram","deleteBuffer","deleteTexture","deleteFramebuffer","deleteRenderbuffer","glState","clear","COLOR_BUFFER_BIT","texImage2D","alpha","RGBA","RGB","UNSIGNED_BYTE","texParameteri","TEXTURE_MAG_FILTER","LINEAR","TEXTURE_MIN_FILTER","TEXTURE_WRAP_S","CLAMP_TO_EDGE","TEXTURE_WRAP_T","framebufferTexture2D","COLOR_ATTACHMENT0","renderbufferStorage","DEPTH_STENCIL","framebufferRenderbuffer","DEPTH_STENCIL_ATTACHMENT","DEPTH_COMPONENT16","DEPTH_ATTACHMENT","STENCIL_INDEX8","STENCIL_ATTACHMENT","checkFramebufferStatus","FRAMEBUFFER_COMPLETE","apply","get","set","pname","r","g","h","leftBounds","rightBounds","submitFrame","enableVertexAttribArray","vertexAttribPointer","FLOAT","uniform1i","diffuse","uniform4fv","drawElements","TRIANGLES","UNSIGNED_SHORT","renderNoState","preserveDrawingBuffer","updateDeviceInfo","deviceInfo","vertices","computeMeshVertices_","bufferData","STATIC_DRAW","indices","computeMeshIndices_","lensFrustum","getLeftEyeVisibleTanAngles","noLensFrustum","getLeftEyeNoLensTanAngles","getLeftEyeVisibleScreenRect","vidx","e","j","u","s","d","sqrt","distortion","distortInverse","p","Uint16Array","halfwidth","halfheight","iidx","getOwnPropertyDescriptor_","proto","attrName","getAttribute","val","setAttribute","uiVS","uiFS","DEG2RAD","kAnglePerGearSection","kOuterRimEndAngle","kInnerRimBeginAngle","kOuterRadius","kMiddleRadius","kInnerRadius","kCenterLineThicknessDp","kButtonWidthDp","kTouchSlopFactor","CardboardUI","gearOffset","gearVertexCount","arrowOffset","arrowVertexCount","projMat","listener","removeEventListener","listen","optionsCallback","backCallback","event","midline","clientWidth","buttonSize","clientX","clientY","clientHeight","addEventListener","physicalPixels","scalingRatio","dps","lineWidth","buttonScale","buttonBorder","addGearSegment","theta","cos","sin","segmentTheta","addArrowVertex","angledLineWidth","render","uniform4f","color","uniformMatrix4fv","projectionMat","drawArrays","TRIANGLE_STRIP","Distortion","coefficients","radius","r0","r1","dr0","distort","abs","dr1","r2","ret","degToRad","radToDeg","Vector3","constructor","copy","normalize","scalar","invScalar","multiplyScalar","applyQuaternion","qx","qy","qz","qw","ix","iy","iz","iw","dot","crossVectors","ax","ay","az","bx","by","bz","Quaternion","quaternion","setFromEulerXYZ","c1","c2","c3","s1","s2","s3","setFromEulerYXZ","setFromAxisAngle","axis","halfAngle","multiply","multiplyQuaternions","qax","qay","qaz","qaw","qbx","qby","qbz","qbw","inverse","l","slerp","qb","cosHalfTheta","halfTheta","sinHalfTheta","ratioA","ratioB","setFromUnitVectors","v1","EPS","vFrom","vTo","Device","params","widthMeters","heightMeters","bevelMeters","DEFAULT_ANDROID","DEFAULT_IOS","Viewers","CardboardV1","CardboardViewer","id","label","interLensDistance","baselineLensDistance","screenLensDistance","distortionCoefficients","inverseCoefficients","CardboardV2","DeviceInfo","deviceParams","additionalViewers","viewer","updateDeviceParams","device","determineDevice_","getDevice","setViewer","METERS_PER_INCH","metersPerPixelX","xdpi","metersPerPixelY","ydpi","bevelMm","getDistortedFieldOfViewLeftEye","eyeToScreenDistance","outerDist","innerDist","bottomDist","topDist","outerAngle","atan","innerAngle","bottomAngle","topAngle","fovLeft","fovTop","fovRight","fovBottom","halfWidth","halfHeight","verticalLensOffset","centerX","centerY","centerZ","screenLeft","screenTop","screenRight","screenBottom","result","undistortedFrustum","dist","eyeX","eyeY","getFieldOfViewLeftEye","opt_isUndistorted","getUndistortedFieldOfViewLeftEye","getFieldOfViewRightEye","getUndistortedParams_","getUndistortedViewportLeftEye","screenWidth","screenHeight","xPxPerTanAngle","yPxPerTanAngle","round","eyePosX","eyePosY","halfLensDistance","maxFov","viewerMax","format","last_updated","devices","DPDB_CACHE","Dpdb","onDeviceParamsUpdated","dpdb","recalculateDeviceParams_","xhr","XMLHttpRequest","obj","open","loading","status","JSON","parse","response","send","getDeviceParams","newDeviceParams","calcDeviceParams_","db","rules","type","matched","rule","ruleMatches_","dpi","DeviceParams","bw","ua","res","resX","resY","SensorSample","sample","timestampS","sensorSample","ComplementaryFilter","kFilter","isDebug","currentAccelMeasurement","currentGyroMeasurement","previousGyroMeasurement","filterQ","previousFilterQ","accelQ","isOrientationInitialized","estimatedGravity","measuredGravity","gyroIntegralQ","addAccelMeasurement","vector","addGyroMeasurement","deltaT","run_","accelToQuaternion_","gyroDeltaQ","gyroToQuaternionDelta_","invFilterQ","deltaQ","toFixed","targetQ","getOrientation","accel","normAccel","gyro","dt","PosePredictor","predictionTimeS","previousQ","previousTimestampS","outQ","getPrediction","currentQ","angularSpeed","predictAngle","FusionPoseSensor","predictionTime","yawOnly","accelerometer","gyroscope","filter","posePredictor","chromeVersion","isDeviceMotionInRadians","isWithoutDeviceMotion","filterToWorldQ","inverseWorldToScreenQ","worldToScreenQ","originalPoseAdjustQ","setScreenTransform_","resetQ","orientationOut_","start","getPosition","_deviceOrientationQ","deviceOrientationFixQ","deviceOrientationFilterToWorldQ","filterOrientation","resetPose","onDeviceOrientation_","beta","gamma","onDeviceMotion_","deviceMotion","updateDeviceMotion_","accGravity","accelerationIncludingGravity","rotRate","rotationRate","timeStamp","deltaS","onOrientationChange_","screenOrientation","onMessage_","data","toLowerCase","deviceMotionEvent","onDeviceMotionCallback_","bind","onOrientationChangeCallback_","onMessageCallback_","onDeviceOrientationCallback_","stop","SENSOR_FREQUENCY","X_AXIS","Z_AXIS","SENSOR_TO_VR","PoseSensor","config","sensor","fusionSensor","_out","api","errors","_sensorQ","_outQ","_onSensorRead","_onSensorError","init","RelativeOrientationSensor","frequency","referenceFrame","useDeviceMotion","K_FILTER","PREDICTION_TIME_S","YAW_ONLY","DEBUG","rotateInstructionsAsset","RotateInstructions","loadIcon_","overlay","createElement","backgroundColor","fontFamily","zIndex","img","icon","marginLeft","marginTop","appendChild","text","textAlign","fontSize","lineHeight","margin","innerHTML","snackbar","padding","boxSizing","snackbarText","float","snackbarButton","fontWeight","textTransform","borderLeft","paddingLeft","textDecoration","hide","show","parent","parentElement","body","removeChild","display","querySelector","showTemporarily","ms","timer","disableShowTemporarily","clearTimeout","update","DEFAULT_VIEWER","VIEWER_KEY","CLASS_NAME","ViewerSelector","defaultViewer","selectedKey","localStorage","getItem","dialog","createDialog_","root","onChangeCallbacks_","selected","checked","contains","getCurrentViewer","getSelectedKey_","input","onChange","cb","fireOnChange_","onSave_","setItem","options","container","classList","add","background","overflow","boxShadow","createH1_","createChoice_","createButton_","h1","marginBottom","div","onclick","button","letterSpacing","border","commonjsGlobal$$1","unwrapExports$$1","createCommonjsModule$$1","NoSleep","webpackUniversalModuleDefinition","modules","installedModules","__webpack_require__","moduleId","m","c","getter","o","getDefault","getModuleExports","object","property","_createClass","_classCallCheck","mediaFile","oldIOS","parseFloat","exec","MSStream","noSleepTimer","noSleepVideo","currentTime","random","setInterval","play","clearInterval","pause","NoSleep$1","nextDisplayId","defaultLeftBounds","defaultRightBounds","raf","requestAnimationFrame","caf","cancelAnimationFrame","VRFrameData","VRDisplayCapabilities","hasPosition","hasExternalDisplay","canPresent","maxLayers","hasOrientation","VRDisplay","USE_WAKELOCK","wakelock","isPolyfilled","displayId","displayName","isPresenting","capabilities","stageParameters","waitingForPresent_","layer_","originalParent_","fullscreenElement_","fullscreenWrapper_","fullscreenElementCachedStyle_","fullscreenEventTarget_","fullscreenChangeHandler_","fullscreenErrorHandler_","wakelock_","getFrameData","_getPose","getPose","_resetPose","getImmediatePose","wrapForFullscreen","cssProperties","insertBefore","firstChild","applyFullscreenElementStyle","removeFullscreenWrapper","removeAttribute","requestPresent","layers","wasPresenting","Promise","resolve","reject","Error","incomingLayer","layer","updatePresent_","predistorted","slice","onFullscreenChange","actualFullscreenElement","lock","catch","beginPresent_","unlock","disableWakeLock","endPresent_","removeFullscreenListeners_","fireVRDisplayPresentChange_","onFullscreenError","addFullscreenListeners_","enableWakeLock","exitPresent","getLayers","CustomEvent","detail","dispatchEvent","fireVRDisplayConnect_","changeHandler","errorHandler","fullscreenEnabled","webkitFullscreenEnabled","mozFullScreenEnabled","msFullscreenEnabled","getEyeParameters","whichEye","ADDITIONAL_VIEWERS","MOBILE_WAKE_LOCK","DPDB_URL","CARDBOARD_UI_DISABLED","ROTATE_INSTRUCTIONS_DISABLED","BUFFER_SCALE","DIRTY_SUBMIT_FRAME_BINDINGS","Eye","LEFT","RIGHT","CardboardVRDisplay","config$$1","defaults","bufferScale_","poseSensor_","distorter_","cardboardUI_","dpdb_","onDeviceParamsUpdated_","deviceInfo_","viewerSelector_","onViewerChanged_","rotateInstructions_","onResize_","create","linearVelocity","linearAcceleration","angularVelocity","angularAcceleration","fieldOfView","eyeParams","renderWidth","renderHeight","newParams","updateBounds_","getContext","stopPropagation","preventDefault","orientationHandler","vrdisplaypresentchangeHandler","fireVRDisplayDeviceParamsChange_","lastWidth","lastHeight","vrdisplay","version","DefaultConfig","PROVIDE_MOBILE_VRDISPLAY","polyfillDisplays","enabled","hasNative","native","getVRDisplays","then","displays","getPolyfillDisplays","_polyfillDisplaysPopulated","NativeVRFrameData","nativeFrameData","nativeGetFrameData","_this","nativeDisplays","webvrPolyfill","freeze","default","require$$0"],"mappings":"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","sourcesContent":["/**\n * @license\n * webvr-polyfill\n * Copyright (c) 2015-2017 Google\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * @license\n * cardboard-vr-display\n * Copyright (c) 2015-2017 Google\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * @license\n * webvr-polyfill-dpdb \n * Copyright (c) 2017 Google\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * @license\n * wglu-preserve-state\n * Copyright (c) 2016, Brandon Jones.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n * THE SOFTWARE.\n */\n\n/**\n * @license\n * nosleep.js\n * Copyright (c) 2017, Rich Tibbett\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n * THE SOFTWARE.\n */\n\n(function (global, factory) {\n\ttypeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\n\ttypeof define === 'function' && define.amd ? define(factory) :\n\t(global.WebVRPolyfill = factory());\n}(this, (function () { 'use strict';\n\nvar commonjsGlobal = typeof window !== 'undefined' ? window : typeof global !== 'undefined' ? global : typeof self !== 'undefined' ? self : {};\n\n\n\nfunction unwrapExports (x) {\n\treturn x && x.__esModule && Object.prototype.hasOwnProperty.call(x, 'default') ? x['default'] : x;\n}\n\nfunction createCommonjsModule(fn, module) {\n\treturn module = { exports: {} }, fn(module, module.exports), module.exports;\n}\n\nvar isMobile = function isMobile() {\n  return (/Android/i.test(navigator.userAgent) || /iPhone|iPad|iPod/i.test(navigator.userAgent)\n  );\n};\nvar copyArray = function copyArray(source, dest) {\n  for (var i = 0, n = source.length; i < n; i++) {\n    dest[i] = source[i];\n  }\n};\nvar extend = function extend(dest, src) {\n  for (var key in src) {\n    if (src.hasOwnProperty(key)) {\n      dest[key] = src[key];\n    }\n  }\n  return dest;\n};\n\nvar cardboardVrDisplay = createCommonjsModule(function (module, exports) {\n/**\n * @license\n * cardboard-vr-display\n * Copyright (c) 2015-2017 Google\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/**\n * @license\n * gl-preserve-state\n * Copyright (c) 2016, Brandon Jones.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n * THE SOFTWARE.\n */\n/**\n * @license\n * webvr-polyfill-dpdb\n * Copyright (c) 2015-2017 Google\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/**\n * @license\n * nosleep.js\n * Copyright (c) 2017, Rich Tibbett\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n * THE SOFTWARE.\n */\n(function (global, factory) {\n\tmodule.exports = factory();\n}(commonjsGlobal, (function () { var classCallCheck = function (instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n};\nvar createClass = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\nvar slicedToArray = function () {\n  function sliceIterator(arr, i) {\n    var _arr = [];\n    var _n = true;\n    var _d = false;\n    var _e = undefined;\n    try {\n      for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n        _arr.push(_s.value);\n        if (i && _arr.length === i) break;\n      }\n    } catch (err) {\n      _d = true;\n      _e = err;\n    } finally {\n      try {\n        if (!_n && _i[\"return\"]) _i[\"return\"]();\n      } finally {\n        if (_d) throw _e;\n      }\n    }\n    return _arr;\n  }\n  return function (arr, i) {\n    if (Array.isArray(arr)) {\n      return arr;\n    } else if (Symbol.iterator in Object(arr)) {\n      return sliceIterator(arr, i);\n    } else {\n      throw new TypeError(\"Invalid attempt to destructure non-iterable instance\");\n    }\n  };\n}();\nvar MIN_TIMESTEP = 0.001;\nvar MAX_TIMESTEP = 1;\nvar dataUri = function dataUri(mimeType, svg) {\n  return 'data:' + mimeType + ',' + encodeURIComponent(svg);\n};\nvar lerp = function lerp(a, b, t) {\n  return a + (b - a) * t;\n};\nvar isIOS = function () {\n  var isIOS = /iPad|iPhone|iPod/.test(navigator.platform);\n  return function () {\n    return isIOS;\n  };\n}();\nvar isWebViewAndroid = function () {\n  var isWebViewAndroid = navigator.userAgent.indexOf('Version') !== -1 && navigator.userAgent.indexOf('Android') !== -1 && navigator.userAgent.indexOf('Chrome') !== -1;\n  return function () {\n    return isWebViewAndroid;\n  };\n}();\nvar isSafari = function () {\n  var isSafari = /^((?!chrome|android).)*safari/i.test(navigator.userAgent);\n  return function () {\n    return isSafari;\n  };\n}();\nvar isFirefoxAndroid = function () {\n  var isFirefoxAndroid = navigator.userAgent.indexOf('Firefox') !== -1 && navigator.userAgent.indexOf('Android') !== -1;\n  return function () {\n    return isFirefoxAndroid;\n  };\n}();\nvar getChromeVersion = function () {\n  var match = navigator.userAgent.match(/.*Chrome\\/([0-9]+)/);\n  var value = match ? parseInt(match[1], 10) : null;\n  return function () {\n    return value;\n  };\n}();\nvar isChromeWithoutDeviceMotion = function () {\n  var value = false;\n  if (getChromeVersion() === 65) {\n    var match = navigator.userAgent.match(/.*Chrome\\/([0-9\\.]*)/);\n    if (match) {\n      var _match$1$split = match[1].split('.'),\n          _match$1$split2 = slicedToArray(_match$1$split, 4),\n          major = _match$1$split2[0],\n          minor = _match$1$split2[1],\n          branch = _match$1$split2[2],\n          build = _match$1$split2[3];\n      value = parseInt(branch, 10) === 3325 && parseInt(build, 10) < 148;\n    }\n  }\n  return function () {\n    return value;\n  };\n}();\nvar isR7 = function () {\n  var isR7 = navigator.userAgent.indexOf('R7 Build') !== -1;\n  return function () {\n    return isR7;\n  };\n}();\nvar isLandscapeMode = function isLandscapeMode() {\n  var rtn = window.orientation == 90 || window.orientation == -90;\n  return isR7() ? !rtn : rtn;\n};\nvar isTimestampDeltaValid = function isTimestampDeltaValid(timestampDeltaS) {\n  if (isNaN(timestampDeltaS)) {\n    return false;\n  }\n  if (timestampDeltaS <= MIN_TIMESTEP) {\n    return false;\n  }\n  if (timestampDeltaS > MAX_TIMESTEP) {\n    return false;\n  }\n  return true;\n};\nvar getScreenWidth = function getScreenWidth() {\n  return Math.max(window.screen.width, window.screen.height) * window.devicePixelRatio;\n};\nvar getScreenHeight = function getScreenHeight() {\n  return Math.min(window.screen.width, window.screen.height) * window.devicePixelRatio;\n};\nvar requestFullscreen = function requestFullscreen(element) {\n  if (isWebViewAndroid()) {\n    return false;\n  }\n  if (element.requestFullscreen) {\n    element.requestFullscreen();\n  } else if (element.webkitRequestFullscreen) {\n    element.webkitRequestFullscreen();\n  } else if (element.mozRequestFullScreen) {\n    element.mozRequestFullScreen();\n  } else if (element.msRequestFullscreen) {\n    element.msRequestFullscreen();\n  } else {\n    return false;\n  }\n  return true;\n};\nvar exitFullscreen = function exitFullscreen() {\n  if (document.exitFullscreen) {\n    document.exitFullscreen();\n  } else if (document.webkitExitFullscreen) {\n    document.webkitExitFullscreen();\n  } else if (document.mozCancelFullScreen) {\n    document.mozCancelFullScreen();\n  } else if (document.msExitFullscreen) {\n    document.msExitFullscreen();\n  } else {\n    return false;\n  }\n  return true;\n};\nvar getFullscreenElement = function getFullscreenElement() {\n  return document.fullscreenElement || document.webkitFullscreenElement || document.mozFullScreenElement || document.msFullscreenElement;\n};\nvar linkProgram = function linkProgram(gl, vertexSource, fragmentSource, attribLocationMap) {\n  var vertexShader = gl.createShader(gl.VERTEX_SHADER);\n  gl.shaderSource(vertexShader, vertexSource);\n  gl.compileShader(vertexShader);\n  var fragmentShader = gl.createShader(gl.FRAGMENT_SHADER);\n  gl.shaderSource(fragmentShader, fragmentSource);\n  gl.compileShader(fragmentShader);\n  var program = gl.createProgram();\n  gl.attachShader(program, vertexShader);\n  gl.attachShader(program, fragmentShader);\n  for (var attribName in attribLocationMap) {\n    gl.bindAttribLocation(program, attribLocationMap[attribName], attribName);\n  }gl.linkProgram(program);\n  gl.deleteShader(vertexShader);\n  gl.deleteShader(fragmentShader);\n  return program;\n};\nvar getProgramUniforms = function getProgramUniforms(gl, program) {\n  var uniforms = {};\n  var uniformCount = gl.getProgramParameter(program, gl.ACTIVE_UNIFORMS);\n  var uniformName = '';\n  for (var i = 0; i < uniformCount; i++) {\n    var uniformInfo = gl.getActiveUniform(program, i);\n    uniformName = uniformInfo.name.replace('[0]', '');\n    uniforms[uniformName] = gl.getUniformLocation(program, uniformName);\n  }\n  return uniforms;\n};\nvar orthoMatrix = function orthoMatrix(out, left, right, bottom, top, near, far) {\n  var lr = 1 / (left - right),\n      bt = 1 / (bottom - top),\n      nf = 1 / (near - far);\n  out[0] = -2 * lr;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = -2 * bt;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = 2 * nf;\n  out[11] = 0;\n  out[12] = (left + right) * lr;\n  out[13] = (top + bottom) * bt;\n  out[14] = (far + near) * nf;\n  out[15] = 1;\n  return out;\n};\nvar isMobile = function isMobile() {\n  var check = false;\n  (function (a) {\n    if (/(android|bb\\d+|meego).+mobile|avantgo|bada\\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(a) || /1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\\-(n|u)|c55\\/|capi|ccwa|cdm\\-|cell|chtm|cldc|cmd\\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\\-s|devi|dica|dmob|do(c|p)o|ds(12|\\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\\-|_)|g1 u|g560|gene|gf\\-5|g\\-mo|go(\\.w|od)|gr(ad|un)|haie|hcit|hd\\-(m|p|t)|hei\\-|hi(pt|ta)|hp( i|ip)|hs\\-c|ht(c(\\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\\-(20|go|ma)|i230|iac( |\\-|\\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\\/)|klon|kpt |kwc\\-|kyo(c|k)|le(no|xi)|lg( g|\\/(k|l|u)|50|54|\\-[a-w])|libw|lynx|m1\\-w|m3ga|m50\\/|ma(te|ui|xo)|mc(01|21|ca)|m\\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\\-2|po(ck|rt|se)|prox|psio|pt\\-g|qa\\-a|qc(07|12|21|32|60|\\-[2-7]|i\\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\\-|oo|p\\-)|sdk\\/|se(c(\\-|0|1)|47|mc|nd|ri)|sgh\\-|shar|sie(\\-|m)|sk\\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\\-|v\\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\\-|tdg\\-|tel(i|m)|tim\\-|t\\-mo|to(pl|sh)|ts(70|m\\-|m3|m5)|tx\\-9|up(\\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\\-|your|zeto|zte\\-/i.test(a.substr(0, 4))) check = true;\n  })(navigator.userAgent || navigator.vendor || window.opera);\n  return check;\n};\nvar extend = function extend(dest, src) {\n  for (var key in src) {\n    if (src.hasOwnProperty(key)) {\n      dest[key] = src[key];\n    }\n  }\n  return dest;\n};\nvar safariCssSizeWorkaround = function safariCssSizeWorkaround(canvas) {\n  if (isIOS()) {\n    var width = canvas.style.width;\n    var height = canvas.style.height;\n    canvas.style.width = parseInt(width) + 1 + 'px';\n    canvas.style.height = parseInt(height) + 'px';\n    setTimeout(function () {\n      canvas.style.width = width;\n      canvas.style.height = height;\n    }, 100);\n  }\n  window.canvas = canvas;\n};\nvar frameDataFromPose = function () {\n  var piOver180 = Math.PI / 180.0;\n  var rad45 = Math.PI * 0.25;\n  function mat4_perspectiveFromFieldOfView(out, fov, near, far) {\n    var upTan = Math.tan(fov ? fov.upDegrees * piOver180 : rad45),\n        downTan = Math.tan(fov ? fov.downDegrees * piOver180 : rad45),\n        leftTan = Math.tan(fov ? fov.leftDegrees * piOver180 : rad45),\n        rightTan = Math.tan(fov ? fov.rightDegrees * piOver180 : rad45),\n        xScale = 2.0 / (leftTan + rightTan),\n        yScale = 2.0 / (upTan + downTan);\n    out[0] = xScale;\n    out[1] = 0.0;\n    out[2] = 0.0;\n    out[3] = 0.0;\n    out[4] = 0.0;\n    out[5] = yScale;\n    out[6] = 0.0;\n    out[7] = 0.0;\n    out[8] = -((leftTan - rightTan) * xScale * 0.5);\n    out[9] = (upTan - downTan) * yScale * 0.5;\n    out[10] = far / (near - far);\n    out[11] = -1.0;\n    out[12] = 0.0;\n    out[13] = 0.0;\n    out[14] = far * near / (near - far);\n    out[15] = 0.0;\n    return out;\n  }\n  function mat4_fromRotationTranslation(out, q, v) {\n    var x = q[0],\n        y = q[1],\n        z = q[2],\n        w = q[3],\n        x2 = x + x,\n        y2 = y + y,\n        z2 = z + z,\n        xx = x * x2,\n        xy = x * y2,\n        xz = x * z2,\n        yy = y * y2,\n        yz = y * z2,\n        zz = z * z2,\n        wx = w * x2,\n        wy = w * y2,\n        wz = w * z2;\n    out[0] = 1 - (yy + zz);\n    out[1] = xy + wz;\n    out[2] = xz - wy;\n    out[3] = 0;\n    out[4] = xy - wz;\n    out[5] = 1 - (xx + zz);\n    out[6] = yz + wx;\n    out[7] = 0;\n    out[8] = xz + wy;\n    out[9] = yz - wx;\n    out[10] = 1 - (xx + yy);\n    out[11] = 0;\n    out[12] = v[0];\n    out[13] = v[1];\n    out[14] = v[2];\n    out[15] = 1;\n    return out;\n  }\n  function mat4_translate(out, a, v) {\n    var x = v[0],\n        y = v[1],\n        z = v[2],\n        a00,\n        a01,\n        a02,\n        a03,\n        a10,\n        a11,\n        a12,\n        a13,\n        a20,\n        a21,\n        a22,\n        a23;\n    if (a === out) {\n      out[12] = a[0] * x + a[4] * y + a[8] * z + a[12];\n      out[13] = a[1] * x + a[5] * y + a[9] * z + a[13];\n      out[14] = a[2] * x + a[6] * y + a[10] * z + a[14];\n      out[15] = a[3] * x + a[7] * y + a[11] * z + a[15];\n    } else {\n      a00 = a[0];a01 = a[1];a02 = a[2];a03 = a[3];\n      a10 = a[4];a11 = a[5];a12 = a[6];a13 = a[7];\n      a20 = a[8];a21 = a[9];a22 = a[10];a23 = a[11];\n      out[0] = a00;out[1] = a01;out[2] = a02;out[3] = a03;\n      out[4] = a10;out[5] = a11;out[6] = a12;out[7] = a13;\n      out[8] = a20;out[9] = a21;out[10] = a22;out[11] = a23;\n      out[12] = a00 * x + a10 * y + a20 * z + a[12];\n      out[13] = a01 * x + a11 * y + a21 * z + a[13];\n      out[14] = a02 * x + a12 * y + a22 * z + a[14];\n      out[15] = a03 * x + a13 * y + a23 * z + a[15];\n    }\n    return out;\n  }\n  function mat4_invert(out, a) {\n    var a00 = a[0],\n        a01 = a[1],\n        a02 = a[2],\n        a03 = a[3],\n        a10 = a[4],\n        a11 = a[5],\n        a12 = a[6],\n        a13 = a[7],\n        a20 = a[8],\n        a21 = a[9],\n        a22 = a[10],\n        a23 = a[11],\n        a30 = a[12],\n        a31 = a[13],\n        a32 = a[14],\n        a33 = a[15],\n        b00 = a00 * a11 - a01 * a10,\n        b01 = a00 * a12 - a02 * a10,\n        b02 = a00 * a13 - a03 * a10,\n        b03 = a01 * a12 - a02 * a11,\n        b04 = a01 * a13 - a03 * a11,\n        b05 = a02 * a13 - a03 * a12,\n        b06 = a20 * a31 - a21 * a30,\n        b07 = a20 * a32 - a22 * a30,\n        b08 = a20 * a33 - a23 * a30,\n        b09 = a21 * a32 - a22 * a31,\n        b10 = a21 * a33 - a23 * a31,\n        b11 = a22 * a33 - a23 * a32,\n    det = b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;\n    if (!det) {\n      return null;\n    }\n    det = 1.0 / det;\n    out[0] = (a11 * b11 - a12 * b10 + a13 * b09) * det;\n    out[1] = (a02 * b10 - a01 * b11 - a03 * b09) * det;\n    out[2] = (a31 * b05 - a32 * b04 + a33 * b03) * det;\n    out[3] = (a22 * b04 - a21 * b05 - a23 * b03) * det;\n    out[4] = (a12 * b08 - a10 * b11 - a13 * b07) * det;\n    out[5] = (a00 * b11 - a02 * b08 + a03 * b07) * det;\n    out[6] = (a32 * b02 - a30 * b05 - a33 * b01) * det;\n    out[7] = (a20 * b05 - a22 * b02 + a23 * b01) * det;\n    out[8] = (a10 * b10 - a11 * b08 + a13 * b06) * det;\n    out[9] = (a01 * b08 - a00 * b10 - a03 * b06) * det;\n    out[10] = (a30 * b04 - a31 * b02 + a33 * b00) * det;\n    out[11] = (a21 * b02 - a20 * b04 - a23 * b00) * det;\n    out[12] = (a11 * b07 - a10 * b09 - a12 * b06) * det;\n    out[13] = (a00 * b09 - a01 * b07 + a02 * b06) * det;\n    out[14] = (a31 * b01 - a30 * b03 - a32 * b00) * det;\n    out[15] = (a20 * b03 - a21 * b01 + a22 * b00) * det;\n    return out;\n  }\n  var defaultOrientation = new Float32Array([0, 0, 0, 1]);\n  var defaultPosition = new Float32Array([0, 0, 0]);\n  function updateEyeMatrices(projection, view, pose, fov, offset, vrDisplay) {\n    mat4_perspectiveFromFieldOfView(projection, fov || null, vrDisplay.depthNear, vrDisplay.depthFar);\n    var orientation = pose.orientation || defaultOrientation;\n    var position = pose.position || defaultPosition;\n    mat4_fromRotationTranslation(view, orientation, position);\n    if (offset) mat4_translate(view, view, offset);\n    mat4_invert(view, view);\n  }\n  return function (frameData, pose, vrDisplay) {\n    if (!frameData || !pose) return false;\n    frameData.pose = pose;\n    frameData.timestamp = pose.timestamp;\n    updateEyeMatrices(frameData.leftProjectionMatrix, frameData.leftViewMatrix, pose, vrDisplay._getFieldOfView(\"left\"), vrDisplay._getEyeOffset(\"left\"), vrDisplay);\n    updateEyeMatrices(frameData.rightProjectionMatrix, frameData.rightViewMatrix, pose, vrDisplay._getFieldOfView(\"right\"), vrDisplay._getEyeOffset(\"right\"), vrDisplay);\n    return true;\n  };\n}();\nvar isInsideCrossOriginIFrame = function isInsideCrossOriginIFrame() {\n  var isFramed = window.self !== window.top;\n  var refOrigin = getOriginFromUrl(document.referrer);\n  var thisOrigin = getOriginFromUrl(window.location.href);\n  return isFramed && refOrigin !== thisOrigin;\n};\nvar getOriginFromUrl = function getOriginFromUrl(url) {\n  var domainIdx;\n  var protoSepIdx = url.indexOf(\"://\");\n  if (protoSepIdx !== -1) {\n    domainIdx = protoSepIdx + 3;\n  } else {\n    domainIdx = 0;\n  }\n  var domainEndIdx = url.indexOf('/', domainIdx);\n  if (domainEndIdx === -1) {\n    domainEndIdx = url.length;\n  }\n  return url.substring(0, domainEndIdx);\n};\nvar getQuaternionAngle = function getQuaternionAngle(quat) {\n  if (quat.w > 1) {\n    console.warn('getQuaternionAngle: w > 1');\n    return 0;\n  }\n  var angle = 2 * Math.acos(quat.w);\n  return angle;\n};\nvar warnOnce = function () {\n  var observedWarnings = {};\n  return function (key, message) {\n    if (observedWarnings[key] === undefined) {\n      console.warn('webvr-polyfill: ' + message);\n      observedWarnings[key] = true;\n    }\n  };\n}();\nvar deprecateWarning = function deprecateWarning(deprecated, suggested) {\n  var alternative = suggested ? 'Please use ' + suggested + ' instead.' : '';\n  warnOnce(deprecated, deprecated + ' has been deprecated. ' + 'This may not work on native WebVR displays. ' + alternative);\n};\nfunction WGLUPreserveGLState(gl, bindings, callback) {\n  if (!bindings) {\n    callback(gl);\n    return;\n  }\n  var boundValues = [];\n  var activeTexture = null;\n  for (var i = 0; i < bindings.length; ++i) {\n    var binding = bindings[i];\n    switch (binding) {\n      case gl.TEXTURE_BINDING_2D:\n      case gl.TEXTURE_BINDING_CUBE_MAP:\n        var textureUnit = bindings[++i];\n        if (textureUnit < gl.TEXTURE0 || textureUnit > gl.TEXTURE31) {\n          console.error(\"TEXTURE_BINDING_2D or TEXTURE_BINDING_CUBE_MAP must be followed by a valid texture unit\");\n          boundValues.push(null, null);\n          break;\n        }\n        if (!activeTexture) {\n          activeTexture = gl.getParameter(gl.ACTIVE_TEXTURE);\n        }\n        gl.activeTexture(textureUnit);\n        boundValues.push(gl.getParameter(binding), null);\n        break;\n      case gl.ACTIVE_TEXTURE:\n        activeTexture = gl.getParameter(gl.ACTIVE_TEXTURE);\n        boundValues.push(null);\n        break;\n      default:\n        boundValues.push(gl.getParameter(binding));\n        break;\n    }\n  }\n  callback(gl);\n  for (var i = 0; i < bindings.length; ++i) {\n    var binding = bindings[i];\n    var boundValue = boundValues[i];\n    switch (binding) {\n      case gl.ACTIVE_TEXTURE:\n        break;\n      case gl.ARRAY_BUFFER_BINDING:\n        gl.bindBuffer(gl.ARRAY_BUFFER, boundValue);\n        break;\n      case gl.COLOR_CLEAR_VALUE:\n        gl.clearColor(boundValue[0], boundValue[1], boundValue[2], boundValue[3]);\n        break;\n      case gl.COLOR_WRITEMASK:\n        gl.colorMask(boundValue[0], boundValue[1], boundValue[2], boundValue[3]);\n        break;\n      case gl.CURRENT_PROGRAM:\n        gl.useProgram(boundValue);\n        break;\n      case gl.ELEMENT_ARRAY_BUFFER_BINDING:\n        gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, boundValue);\n        break;\n      case gl.FRAMEBUFFER_BINDING:\n        gl.bindFramebuffer(gl.FRAMEBUFFER, boundValue);\n        break;\n      case gl.RENDERBUFFER_BINDING:\n        gl.bindRenderbuffer(gl.RENDERBUFFER, boundValue);\n        break;\n      case gl.TEXTURE_BINDING_2D:\n        var textureUnit = bindings[++i];\n        if (textureUnit < gl.TEXTURE0 || textureUnit > gl.TEXTURE31)\n          break;\n        gl.activeTexture(textureUnit);\n        gl.bindTexture(gl.TEXTURE_2D, boundValue);\n        break;\n      case gl.TEXTURE_BINDING_CUBE_MAP:\n        var textureUnit = bindings[++i];\n        if (textureUnit < gl.TEXTURE0 || textureUnit > gl.TEXTURE31)\n          break;\n        gl.activeTexture(textureUnit);\n        gl.bindTexture(gl.TEXTURE_CUBE_MAP, boundValue);\n        break;\n      case gl.VIEWPORT:\n        gl.viewport(boundValue[0], boundValue[1], boundValue[2], boundValue[3]);\n        break;\n      case gl.BLEND:\n      case gl.CULL_FACE:\n      case gl.DEPTH_TEST:\n      case gl.SCISSOR_TEST:\n      case gl.STENCIL_TEST:\n        if (boundValue) {\n          gl.enable(binding);\n        } else {\n          gl.disable(binding);\n        }\n        break;\n      default:\n        console.log(\"No GL restore behavior for 0x\" + binding.toString(16));\n        break;\n    }\n    if (activeTexture) {\n      gl.activeTexture(activeTexture);\n    }\n  }\n}\nvar glPreserveState = WGLUPreserveGLState;\nvar distortionVS = ['attribute vec2 position;', 'attribute vec3 texCoord;', 'varying vec2 vTexCoord;', 'uniform vec4 viewportOffsetScale[2];', 'void main() {', '  vec4 viewport = viewportOffsetScale[int(texCoord.z)];', '  vTexCoord = (texCoord.xy * viewport.zw) + viewport.xy;', '  gl_Position = vec4( position, 1.0, 1.0 );', '}'].join('\\n');\nvar distortionFS = ['precision mediump float;', 'uniform sampler2D diffuse;', 'varying vec2 vTexCoord;', 'void main() {', '  gl_FragColor = texture2D(diffuse, vTexCoord);', '}'].join('\\n');\nfunction CardboardDistorter(gl, cardboardUI, bufferScale, dirtySubmitFrameBindings) {\n  this.gl = gl;\n  this.cardboardUI = cardboardUI;\n  this.bufferScale = bufferScale;\n  this.dirtySubmitFrameBindings = dirtySubmitFrameBindings;\n  this.ctxAttribs = gl.getContextAttributes();\n  this.meshWidth = 20;\n  this.meshHeight = 20;\n  this.bufferWidth = gl.drawingBufferWidth;\n  this.bufferHeight = gl.drawingBufferHeight;\n  this.realBindFramebuffer = gl.bindFramebuffer;\n  this.realEnable = gl.enable;\n  this.realDisable = gl.disable;\n  this.realColorMask = gl.colorMask;\n  this.realClearColor = gl.clearColor;\n  this.realViewport = gl.viewport;\n  if (!isIOS()) {\n    this.realCanvasWidth = Object.getOwnPropertyDescriptor(gl.canvas.__proto__, 'width');\n    this.realCanvasHeight = Object.getOwnPropertyDescriptor(gl.canvas.__proto__, 'height');\n  }\n  this.isPatched = false;\n  this.lastBoundFramebuffer = null;\n  this.cullFace = false;\n  this.depthTest = false;\n  this.blend = false;\n  this.scissorTest = false;\n  this.stencilTest = false;\n  this.viewport = [0, 0, 0, 0];\n  this.colorMask = [true, true, true, true];\n  this.clearColor = [0, 0, 0, 0];\n  this.attribs = {\n    position: 0,\n    texCoord: 1\n  };\n  this.program = linkProgram(gl, distortionVS, distortionFS, this.attribs);\n  this.uniforms = getProgramUniforms(gl, this.program);\n  this.viewportOffsetScale = new Float32Array(8);\n  this.setTextureBounds();\n  this.vertexBuffer = gl.createBuffer();\n  this.indexBuffer = gl.createBuffer();\n  this.indexCount = 0;\n  this.renderTarget = gl.createTexture();\n  this.framebuffer = gl.createFramebuffer();\n  this.depthStencilBuffer = null;\n  this.depthBuffer = null;\n  this.stencilBuffer = null;\n  if (this.ctxAttribs.depth && this.ctxAttribs.stencil) {\n    this.depthStencilBuffer = gl.createRenderbuffer();\n  } else if (this.ctxAttribs.depth) {\n    this.depthBuffer = gl.createRenderbuffer();\n  } else if (this.ctxAttribs.stencil) {\n    this.stencilBuffer = gl.createRenderbuffer();\n  }\n  this.patch();\n  this.onResize();\n}\nCardboardDistorter.prototype.destroy = function () {\n  var gl = this.gl;\n  this.unpatch();\n  gl.deleteProgram(this.program);\n  gl.deleteBuffer(this.vertexBuffer);\n  gl.deleteBuffer(this.indexBuffer);\n  gl.deleteTexture(this.renderTarget);\n  gl.deleteFramebuffer(this.framebuffer);\n  if (this.depthStencilBuffer) {\n    gl.deleteRenderbuffer(this.depthStencilBuffer);\n  }\n  if (this.depthBuffer) {\n    gl.deleteRenderbuffer(this.depthBuffer);\n  }\n  if (this.stencilBuffer) {\n    gl.deleteRenderbuffer(this.stencilBuffer);\n  }\n  if (this.cardboardUI) {\n    this.cardboardUI.destroy();\n  }\n};\nCardboardDistorter.prototype.onResize = function () {\n  var gl = this.gl;\n  var self = this;\n  var glState = [gl.RENDERBUFFER_BINDING, gl.TEXTURE_BINDING_2D, gl.TEXTURE0];\n  glPreserveState(gl, glState, function (gl) {\n    self.realBindFramebuffer.call(gl, gl.FRAMEBUFFER, null);\n    if (self.scissorTest) {\n      self.realDisable.call(gl, gl.SCISSOR_TEST);\n    }\n    self.realColorMask.call(gl, true, true, true, true);\n    self.realViewport.call(gl, 0, 0, gl.drawingBufferWidth, gl.drawingBufferHeight);\n    self.realClearColor.call(gl, 0, 0, 0, 1);\n    gl.clear(gl.COLOR_BUFFER_BIT);\n    self.realBindFramebuffer.call(gl, gl.FRAMEBUFFER, self.framebuffer);\n    gl.bindTexture(gl.TEXTURE_2D, self.renderTarget);\n    gl.texImage2D(gl.TEXTURE_2D, 0, self.ctxAttribs.alpha ? gl.RGBA : gl.RGB, self.bufferWidth, self.bufferHeight, 0, self.ctxAttribs.alpha ? gl.RGBA : gl.RGB, gl.UNSIGNED_BYTE, null);\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.LINEAR);\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR);\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\n    gl.framebufferTexture2D(gl.FRAMEBUFFER, gl.COLOR_ATTACHMENT0, gl.TEXTURE_2D, self.renderTarget, 0);\n    if (self.ctxAttribs.depth && self.ctxAttribs.stencil) {\n      gl.bindRenderbuffer(gl.RENDERBUFFER, self.depthStencilBuffer);\n      gl.renderbufferStorage(gl.RENDERBUFFER, gl.DEPTH_STENCIL, self.bufferWidth, self.bufferHeight);\n      gl.framebufferRenderbuffer(gl.FRAMEBUFFER, gl.DEPTH_STENCIL_ATTACHMENT, gl.RENDERBUFFER, self.depthStencilBuffer);\n    } else if (self.ctxAttribs.depth) {\n      gl.bindRenderbuffer(gl.RENDERBUFFER, self.depthBuffer);\n      gl.renderbufferStorage(gl.RENDERBUFFER, gl.DEPTH_COMPONENT16, self.bufferWidth, self.bufferHeight);\n      gl.framebufferRenderbuffer(gl.FRAMEBUFFER, gl.DEPTH_ATTACHMENT, gl.RENDERBUFFER, self.depthBuffer);\n    } else if (self.ctxAttribs.stencil) {\n      gl.bindRenderbuffer(gl.RENDERBUFFER, self.stencilBuffer);\n      gl.renderbufferStorage(gl.RENDERBUFFER, gl.STENCIL_INDEX8, self.bufferWidth, self.bufferHeight);\n      gl.framebufferRenderbuffer(gl.FRAMEBUFFER, gl.STENCIL_ATTACHMENT, gl.RENDERBUFFER, self.stencilBuffer);\n    }\n    if (!gl.checkFramebufferStatus(gl.FRAMEBUFFER) === gl.FRAMEBUFFER_COMPLETE) {\n      console.error('Framebuffer incomplete!');\n    }\n    self.realBindFramebuffer.call(gl, gl.FRAMEBUFFER, self.lastBoundFramebuffer);\n    if (self.scissorTest) {\n      self.realEnable.call(gl, gl.SCISSOR_TEST);\n    }\n    self.realColorMask.apply(gl, self.colorMask);\n    self.realViewport.apply(gl, self.viewport);\n    self.realClearColor.apply(gl, self.clearColor);\n  });\n  if (this.cardboardUI) {\n    this.cardboardUI.onResize();\n  }\n};\nCardboardDistorter.prototype.patch = function () {\n  if (this.isPatched) {\n    return;\n  }\n  var self = this;\n  var canvas = this.gl.canvas;\n  var gl = this.gl;\n  if (!isIOS()) {\n    canvas.width = getScreenWidth() * this.bufferScale;\n    canvas.height = getScreenHeight() * this.bufferScale;\n    Object.defineProperty(canvas, 'width', {\n      configurable: true,\n      enumerable: true,\n      get: function get() {\n        return self.bufferWidth;\n      },\n      set: function set(value) {\n        self.bufferWidth = value;\n        self.realCanvasWidth.set.call(canvas, value);\n        self.onResize();\n      }\n    });\n    Object.defineProperty(canvas, 'height', {\n      configurable: true,\n      enumerable: true,\n      get: function get() {\n        return self.bufferHeight;\n      },\n      set: function set(value) {\n        self.bufferHeight = value;\n        self.realCanvasHeight.set.call(canvas, value);\n        self.onResize();\n      }\n    });\n  }\n  this.lastBoundFramebuffer = gl.getParameter(gl.FRAMEBUFFER_BINDING);\n  if (this.lastBoundFramebuffer == null) {\n    this.lastBoundFramebuffer = this.framebuffer;\n    this.gl.bindFramebuffer(gl.FRAMEBUFFER, this.framebuffer);\n  }\n  this.gl.bindFramebuffer = function (target, framebuffer) {\n    self.lastBoundFramebuffer = framebuffer ? framebuffer : self.framebuffer;\n    self.realBindFramebuffer.call(gl, target, self.lastBoundFramebuffer);\n  };\n  this.cullFace = gl.getParameter(gl.CULL_FACE);\n  this.depthTest = gl.getParameter(gl.DEPTH_TEST);\n  this.blend = gl.getParameter(gl.BLEND);\n  this.scissorTest = gl.getParameter(gl.SCISSOR_TEST);\n  this.stencilTest = gl.getParameter(gl.STENCIL_TEST);\n  gl.enable = function (pname) {\n    switch (pname) {\n      case gl.CULL_FACE:\n        self.cullFace = true;break;\n      case gl.DEPTH_TEST:\n        self.depthTest = true;break;\n      case gl.BLEND:\n        self.blend = true;break;\n      case gl.SCISSOR_TEST:\n        self.scissorTest = true;break;\n      case gl.STENCIL_TEST:\n        self.stencilTest = true;break;\n    }\n    self.realEnable.call(gl, pname);\n  };\n  gl.disable = function (pname) {\n    switch (pname) {\n      case gl.CULL_FACE:\n        self.cullFace = false;break;\n      case gl.DEPTH_TEST:\n        self.depthTest = false;break;\n      case gl.BLEND:\n        self.blend = false;break;\n      case gl.SCISSOR_TEST:\n        self.scissorTest = false;break;\n      case gl.STENCIL_TEST:\n        self.stencilTest = false;break;\n    }\n    self.realDisable.call(gl, pname);\n  };\n  this.colorMask = gl.getParameter(gl.COLOR_WRITEMASK);\n  gl.colorMask = function (r, g, b, a) {\n    self.colorMask[0] = r;\n    self.colorMask[1] = g;\n    self.colorMask[2] = b;\n    self.colorMask[3] = a;\n    self.realColorMask.call(gl, r, g, b, a);\n  };\n  this.clearColor = gl.getParameter(gl.COLOR_CLEAR_VALUE);\n  gl.clearColor = function (r, g, b, a) {\n    self.clearColor[0] = r;\n    self.clearColor[1] = g;\n    self.clearColor[2] = b;\n    self.clearColor[3] = a;\n    self.realClearColor.call(gl, r, g, b, a);\n  };\n  this.viewport = gl.getParameter(gl.VIEWPORT);\n  gl.viewport = function (x, y, w, h) {\n    self.viewport[0] = x;\n    self.viewport[1] = y;\n    self.viewport[2] = w;\n    self.viewport[3] = h;\n    self.realViewport.call(gl, x, y, w, h);\n  };\n  this.isPatched = true;\n  safariCssSizeWorkaround(canvas);\n};\nCardboardDistorter.prototype.unpatch = function () {\n  if (!this.isPatched) {\n    return;\n  }\n  var gl = this.gl;\n  var canvas = this.gl.canvas;\n  if (!isIOS()) {\n    Object.defineProperty(canvas, 'width', this.realCanvasWidth);\n    Object.defineProperty(canvas, 'height', this.realCanvasHeight);\n  }\n  canvas.width = this.bufferWidth;\n  canvas.height = this.bufferHeight;\n  gl.bindFramebuffer = this.realBindFramebuffer;\n  gl.enable = this.realEnable;\n  gl.disable = this.realDisable;\n  gl.colorMask = this.realColorMask;\n  gl.clearColor = this.realClearColor;\n  gl.viewport = this.realViewport;\n  if (this.lastBoundFramebuffer == this.framebuffer) {\n    gl.bindFramebuffer(gl.FRAMEBUFFER, null);\n  }\n  this.isPatched = false;\n  setTimeout(function () {\n    safariCssSizeWorkaround(canvas);\n  }, 1);\n};\nCardboardDistorter.prototype.setTextureBounds = function (leftBounds, rightBounds) {\n  if (!leftBounds) {\n    leftBounds = [0, 0, 0.5, 1];\n  }\n  if (!rightBounds) {\n    rightBounds = [0.5, 0, 0.5, 1];\n  }\n  this.viewportOffsetScale[0] = leftBounds[0];\n  this.viewportOffsetScale[1] = leftBounds[1];\n  this.viewportOffsetScale[2] = leftBounds[2];\n  this.viewportOffsetScale[3] = leftBounds[3];\n  this.viewportOffsetScale[4] = rightBounds[0];\n  this.viewportOffsetScale[5] = rightBounds[1];\n  this.viewportOffsetScale[6] = rightBounds[2];\n  this.viewportOffsetScale[7] = rightBounds[3];\n};\nCardboardDistorter.prototype.submitFrame = function () {\n  var gl = this.gl;\n  var self = this;\n  var glState = [];\n  if (!this.dirtySubmitFrameBindings) {\n    glState.push(gl.CURRENT_PROGRAM, gl.ARRAY_BUFFER_BINDING, gl.ELEMENT_ARRAY_BUFFER_BINDING, gl.TEXTURE_BINDING_2D, gl.TEXTURE0);\n  }\n  glPreserveState(gl, glState, function (gl) {\n    self.realBindFramebuffer.call(gl, gl.FRAMEBUFFER, null);\n    if (self.cullFace) {\n      self.realDisable.call(gl, gl.CULL_FACE);\n    }\n    if (self.depthTest) {\n      self.realDisable.call(gl, gl.DEPTH_TEST);\n    }\n    if (self.blend) {\n      self.realDisable.call(gl, gl.BLEND);\n    }\n    if (self.scissorTest) {\n      self.realDisable.call(gl, gl.SCISSOR_TEST);\n    }\n    if (self.stencilTest) {\n      self.realDisable.call(gl, gl.STENCIL_TEST);\n    }\n    self.realColorMask.call(gl, true, true, true, true);\n    self.realViewport.call(gl, 0, 0, gl.drawingBufferWidth, gl.drawingBufferHeight);\n    if (self.ctxAttribs.alpha || isIOS()) {\n      self.realClearColor.call(gl, 0, 0, 0, 1);\n      gl.clear(gl.COLOR_BUFFER_BIT);\n    }\n    gl.useProgram(self.program);\n    gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, self.indexBuffer);\n    gl.bindBuffer(gl.ARRAY_BUFFER, self.vertexBuffer);\n    gl.enableVertexAttribArray(self.attribs.position);\n    gl.enableVertexAttribArray(self.attribs.texCoord);\n    gl.vertexAttribPointer(self.attribs.position, 2, gl.FLOAT, false, 20, 0);\n    gl.vertexAttribPointer(self.attribs.texCoord, 3, gl.FLOAT, false, 20, 8);\n    gl.activeTexture(gl.TEXTURE0);\n    gl.uniform1i(self.uniforms.diffuse, 0);\n    gl.bindTexture(gl.TEXTURE_2D, self.renderTarget);\n    gl.uniform4fv(self.uniforms.viewportOffsetScale, self.viewportOffsetScale);\n    gl.drawElements(gl.TRIANGLES, self.indexCount, gl.UNSIGNED_SHORT, 0);\n    if (self.cardboardUI) {\n      self.cardboardUI.renderNoState();\n    }\n    self.realBindFramebuffer.call(self.gl, gl.FRAMEBUFFER, self.framebuffer);\n    if (!self.ctxAttribs.preserveDrawingBuffer) {\n      self.realClearColor.call(gl, 0, 0, 0, 0);\n      gl.clear(gl.COLOR_BUFFER_BIT);\n    }\n    if (!self.dirtySubmitFrameBindings) {\n      self.realBindFramebuffer.call(gl, gl.FRAMEBUFFER, self.lastBoundFramebuffer);\n    }\n    if (self.cullFace) {\n      self.realEnable.call(gl, gl.CULL_FACE);\n    }\n    if (self.depthTest) {\n      self.realEnable.call(gl, gl.DEPTH_TEST);\n    }\n    if (self.blend) {\n      self.realEnable.call(gl, gl.BLEND);\n    }\n    if (self.scissorTest) {\n      self.realEnable.call(gl, gl.SCISSOR_TEST);\n    }\n    if (self.stencilTest) {\n      self.realEnable.call(gl, gl.STENCIL_TEST);\n    }\n    self.realColorMask.apply(gl, self.colorMask);\n    self.realViewport.apply(gl, self.viewport);\n    if (self.ctxAttribs.alpha || !self.ctxAttribs.preserveDrawingBuffer) {\n      self.realClearColor.apply(gl, self.clearColor);\n    }\n  });\n  if (isIOS()) {\n    var canvas = gl.canvas;\n    if (canvas.width != self.bufferWidth || canvas.height != self.bufferHeight) {\n      self.bufferWidth = canvas.width;\n      self.bufferHeight = canvas.height;\n      self.onResize();\n    }\n  }\n};\nCardboardDistorter.prototype.updateDeviceInfo = function (deviceInfo) {\n  var gl = this.gl;\n  var self = this;\n  var glState = [gl.ARRAY_BUFFER_BINDING, gl.ELEMENT_ARRAY_BUFFER_BINDING];\n  glPreserveState(gl, glState, function (gl) {\n    var vertices = self.computeMeshVertices_(self.meshWidth, self.meshHeight, deviceInfo);\n    gl.bindBuffer(gl.ARRAY_BUFFER, self.vertexBuffer);\n    gl.bufferData(gl.ARRAY_BUFFER, vertices, gl.STATIC_DRAW);\n    if (!self.indexCount) {\n      var indices = self.computeMeshIndices_(self.meshWidth, self.meshHeight);\n      gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, self.indexBuffer);\n      gl.bufferData(gl.ELEMENT_ARRAY_BUFFER, indices, gl.STATIC_DRAW);\n      self.indexCount = indices.length;\n    }\n  });\n};\nCardboardDistorter.prototype.computeMeshVertices_ = function (width, height, deviceInfo) {\n  var vertices = new Float32Array(2 * width * height * 5);\n  var lensFrustum = deviceInfo.getLeftEyeVisibleTanAngles();\n  var noLensFrustum = deviceInfo.getLeftEyeNoLensTanAngles();\n  var viewport = deviceInfo.getLeftEyeVisibleScreenRect(noLensFrustum);\n  var vidx = 0;\n  for (var e = 0; e < 2; e++) {\n    for (var j = 0; j < height; j++) {\n      for (var i = 0; i < width; i++, vidx++) {\n        var u = i / (width - 1);\n        var v = j / (height - 1);\n        var s = u;\n        var t = v;\n        var x = lerp(lensFrustum[0], lensFrustum[2], u);\n        var y = lerp(lensFrustum[3], lensFrustum[1], v);\n        var d = Math.sqrt(x * x + y * y);\n        var r = deviceInfo.distortion.distortInverse(d);\n        var p = x * r / d;\n        var q = y * r / d;\n        u = (p - noLensFrustum[0]) / (noLensFrustum[2] - noLensFrustum[0]);\n        v = (q - noLensFrustum[3]) / (noLensFrustum[1] - noLensFrustum[3]);\n        u = (viewport.x + u * viewport.width - 0.5) * 2.0;\n        v = (viewport.y + v * viewport.height - 0.5) * 2.0;\n        vertices[vidx * 5 + 0] = u;\n        vertices[vidx * 5 + 1] = v;\n        vertices[vidx * 5 + 2] = s;\n        vertices[vidx * 5 + 3] = t;\n        vertices[vidx * 5 + 4] = e;\n      }\n    }\n    var w = lensFrustum[2] - lensFrustum[0];\n    lensFrustum[0] = -(w + lensFrustum[0]);\n    lensFrustum[2] = w - lensFrustum[2];\n    w = noLensFrustum[2] - noLensFrustum[0];\n    noLensFrustum[0] = -(w + noLensFrustum[0]);\n    noLensFrustum[2] = w - noLensFrustum[2];\n    viewport.x = 1 - (viewport.x + viewport.width);\n  }\n  return vertices;\n};\nCardboardDistorter.prototype.computeMeshIndices_ = function (width, height) {\n  var indices = new Uint16Array(2 * (width - 1) * (height - 1) * 6);\n  var halfwidth = width / 2;\n  var halfheight = height / 2;\n  var vidx = 0;\n  var iidx = 0;\n  for (var e = 0; e < 2; e++) {\n    for (var j = 0; j < height; j++) {\n      for (var i = 0; i < width; i++, vidx++) {\n        if (i == 0 || j == 0) continue;\n        if (i <= halfwidth == j <= halfheight) {\n          indices[iidx++] = vidx;\n          indices[iidx++] = vidx - width - 1;\n          indices[iidx++] = vidx - width;\n          indices[iidx++] = vidx - width - 1;\n          indices[iidx++] = vidx;\n          indices[iidx++] = vidx - 1;\n        } else {\n          indices[iidx++] = vidx - 1;\n          indices[iidx++] = vidx - width;\n          indices[iidx++] = vidx;\n          indices[iidx++] = vidx - width;\n          indices[iidx++] = vidx - 1;\n          indices[iidx++] = vidx - width - 1;\n        }\n      }\n    }\n  }\n  return indices;\n};\nCardboardDistorter.prototype.getOwnPropertyDescriptor_ = function (proto, attrName) {\n  var descriptor = Object.getOwnPropertyDescriptor(proto, attrName);\n  if (descriptor.get === undefined || descriptor.set === undefined) {\n    descriptor.configurable = true;\n    descriptor.enumerable = true;\n    descriptor.get = function () {\n      return this.getAttribute(attrName);\n    };\n    descriptor.set = function (val) {\n      this.setAttribute(attrName, val);\n    };\n  }\n  return descriptor;\n};\nvar uiVS = ['attribute vec2 position;', 'uniform mat4 projectionMat;', 'void main() {', '  gl_Position = projectionMat * vec4( position, -1.0, 1.0 );', '}'].join('\\n');\nvar uiFS = ['precision mediump float;', 'uniform vec4 color;', 'void main() {', '  gl_FragColor = color;', '}'].join('\\n');\nvar DEG2RAD = Math.PI / 180.0;\nvar kAnglePerGearSection = 60;\nvar kOuterRimEndAngle = 12;\nvar kInnerRimBeginAngle = 20;\nvar kOuterRadius = 1;\nvar kMiddleRadius = 0.75;\nvar kInnerRadius = 0.3125;\nvar kCenterLineThicknessDp = 4;\nvar kButtonWidthDp = 28;\nvar kTouchSlopFactor = 1.5;\nfunction CardboardUI(gl) {\n  this.gl = gl;\n  this.attribs = {\n    position: 0\n  };\n  this.program = linkProgram(gl, uiVS, uiFS, this.attribs);\n  this.uniforms = getProgramUniforms(gl, this.program);\n  this.vertexBuffer = gl.createBuffer();\n  this.gearOffset = 0;\n  this.gearVertexCount = 0;\n  this.arrowOffset = 0;\n  this.arrowVertexCount = 0;\n  this.projMat = new Float32Array(16);\n  this.listener = null;\n  this.onResize();\n}\nCardboardUI.prototype.destroy = function () {\n  var gl = this.gl;\n  if (this.listener) {\n    gl.canvas.removeEventListener('click', this.listener, false);\n  }\n  gl.deleteProgram(this.program);\n  gl.deleteBuffer(this.vertexBuffer);\n};\nCardboardUI.prototype.listen = function (optionsCallback, backCallback) {\n  var canvas = this.gl.canvas;\n  this.listener = function (event) {\n    var midline = canvas.clientWidth / 2;\n    var buttonSize = kButtonWidthDp * kTouchSlopFactor;\n    if (event.clientX > midline - buttonSize && event.clientX < midline + buttonSize && event.clientY > canvas.clientHeight - buttonSize) {\n      optionsCallback(event);\n    }\n    else if (event.clientX < buttonSize && event.clientY < buttonSize) {\n        backCallback(event);\n      }\n  };\n  canvas.addEventListener('click', this.listener, false);\n};\nCardboardUI.prototype.onResize = function () {\n  var gl = this.gl;\n  var self = this;\n  var glState = [gl.ARRAY_BUFFER_BINDING];\n  glPreserveState(gl, glState, function (gl) {\n    var vertices = [];\n    var midline = gl.drawingBufferWidth / 2;\n    var physicalPixels = Math.max(screen.width, screen.height) * window.devicePixelRatio;\n    var scalingRatio = gl.drawingBufferWidth / physicalPixels;\n    var dps = scalingRatio * window.devicePixelRatio;\n    var lineWidth = kCenterLineThicknessDp * dps / 2;\n    var buttonSize = kButtonWidthDp * kTouchSlopFactor * dps;\n    var buttonScale = kButtonWidthDp * dps / 2;\n    var buttonBorder = (kButtonWidthDp * kTouchSlopFactor - kButtonWidthDp) * dps;\n    vertices.push(midline - lineWidth, buttonSize);\n    vertices.push(midline - lineWidth, gl.drawingBufferHeight);\n    vertices.push(midline + lineWidth, buttonSize);\n    vertices.push(midline + lineWidth, gl.drawingBufferHeight);\n    self.gearOffset = vertices.length / 2;\n    function addGearSegment(theta, r) {\n      var angle = (90 - theta) * DEG2RAD;\n      var x = Math.cos(angle);\n      var y = Math.sin(angle);\n      vertices.push(kInnerRadius * x * buttonScale + midline, kInnerRadius * y * buttonScale + buttonScale);\n      vertices.push(r * x * buttonScale + midline, r * y * buttonScale + buttonScale);\n    }\n    for (var i = 0; i <= 6; i++) {\n      var segmentTheta = i * kAnglePerGearSection;\n      addGearSegment(segmentTheta, kOuterRadius);\n      addGearSegment(segmentTheta + kOuterRimEndAngle, kOuterRadius);\n      addGearSegment(segmentTheta + kInnerRimBeginAngle, kMiddleRadius);\n      addGearSegment(segmentTheta + (kAnglePerGearSection - kInnerRimBeginAngle), kMiddleRadius);\n      addGearSegment(segmentTheta + (kAnglePerGearSection - kOuterRimEndAngle), kOuterRadius);\n    }\n    self.gearVertexCount = vertices.length / 2 - self.gearOffset;\n    self.arrowOffset = vertices.length / 2;\n    function addArrowVertex(x, y) {\n      vertices.push(buttonBorder + x, gl.drawingBufferHeight - buttonBorder - y);\n    }\n    var angledLineWidth = lineWidth / Math.sin(45 * DEG2RAD);\n    addArrowVertex(0, buttonScale);\n    addArrowVertex(buttonScale, 0);\n    addArrowVertex(buttonScale + angledLineWidth, angledLineWidth);\n    addArrowVertex(angledLineWidth, buttonScale + angledLineWidth);\n    addArrowVertex(angledLineWidth, buttonScale - angledLineWidth);\n    addArrowVertex(0, buttonScale);\n    addArrowVertex(buttonScale, buttonScale * 2);\n    addArrowVertex(buttonScale + angledLineWidth, buttonScale * 2 - angledLineWidth);\n    addArrowVertex(angledLineWidth, buttonScale - angledLineWidth);\n    addArrowVertex(0, buttonScale);\n    addArrowVertex(angledLineWidth, buttonScale - lineWidth);\n    addArrowVertex(kButtonWidthDp * dps, buttonScale - lineWidth);\n    addArrowVertex(angledLineWidth, buttonScale + lineWidth);\n    addArrowVertex(kButtonWidthDp * dps, buttonScale + lineWidth);\n    self.arrowVertexCount = vertices.length / 2 - self.arrowOffset;\n    gl.bindBuffer(gl.ARRAY_BUFFER, self.vertexBuffer);\n    gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(vertices), gl.STATIC_DRAW);\n  });\n};\nCardboardUI.prototype.render = function () {\n  var gl = this.gl;\n  var self = this;\n  var glState = [gl.CULL_FACE, gl.DEPTH_TEST, gl.BLEND, gl.SCISSOR_TEST, gl.STENCIL_TEST, gl.COLOR_WRITEMASK, gl.VIEWPORT, gl.CURRENT_PROGRAM, gl.ARRAY_BUFFER_BINDING];\n  glPreserveState(gl, glState, function (gl) {\n    gl.disable(gl.CULL_FACE);\n    gl.disable(gl.DEPTH_TEST);\n    gl.disable(gl.BLEND);\n    gl.disable(gl.SCISSOR_TEST);\n    gl.disable(gl.STENCIL_TEST);\n    gl.colorMask(true, true, true, true);\n    gl.viewport(0, 0, gl.drawingBufferWidth, gl.drawingBufferHeight);\n    self.renderNoState();\n  });\n};\nCardboardUI.prototype.renderNoState = function () {\n  var gl = this.gl;\n  gl.useProgram(this.program);\n  gl.bindBuffer(gl.ARRAY_BUFFER, this.vertexBuffer);\n  gl.enableVertexAttribArray(this.attribs.position);\n  gl.vertexAttribPointer(this.attribs.position, 2, gl.FLOAT, false, 8, 0);\n  gl.uniform4f(this.uniforms.color, 1.0, 1.0, 1.0, 1.0);\n  orthoMatrix(this.projMat, 0, gl.drawingBufferWidth, 0, gl.drawingBufferHeight, 0.1, 1024.0);\n  gl.uniformMatrix4fv(this.uniforms.projectionMat, false, this.projMat);\n  gl.drawArrays(gl.TRIANGLE_STRIP, 0, 4);\n  gl.drawArrays(gl.TRIANGLE_STRIP, this.gearOffset, this.gearVertexCount);\n  gl.drawArrays(gl.TRIANGLE_STRIP, this.arrowOffset, this.arrowVertexCount);\n};\nfunction Distortion(coefficients) {\n  this.coefficients = coefficients;\n}\nDistortion.prototype.distortInverse = function (radius) {\n  var r0 = 0;\n  var r1 = 1;\n  var dr0 = radius - this.distort(r0);\n  while (Math.abs(r1 - r0) > 0.0001             ) {\n    var dr1 = radius - this.distort(r1);\n    var r2 = r1 - dr1 * ((r1 - r0) / (dr1 - dr0));\n    r0 = r1;\n    r1 = r2;\n    dr0 = dr1;\n  }\n  return r1;\n};\nDistortion.prototype.distort = function (radius) {\n  var r2 = radius * radius;\n  var ret = 0;\n  for (var i = 0; i < this.coefficients.length; i++) {\n    ret = r2 * (ret + this.coefficients[i]);\n  }\n  return (ret + 1) * radius;\n};\nvar degToRad = Math.PI / 180;\nvar radToDeg = 180 / Math.PI;\nvar Vector3 = function Vector3(x, y, z) {\n  this.x = x || 0;\n  this.y = y || 0;\n  this.z = z || 0;\n};\nVector3.prototype = {\n  constructor: Vector3,\n  set: function set(x, y, z) {\n    this.x = x;\n    this.y = y;\n    this.z = z;\n    return this;\n  },\n  copy: function copy(v) {\n    this.x = v.x;\n    this.y = v.y;\n    this.z = v.z;\n    return this;\n  },\n  length: function length() {\n    return Math.sqrt(this.x * this.x + this.y * this.y + this.z * this.z);\n  },\n  normalize: function normalize() {\n    var scalar = this.length();\n    if (scalar !== 0) {\n      var invScalar = 1 / scalar;\n      this.multiplyScalar(invScalar);\n    } else {\n      this.x = 0;\n      this.y = 0;\n      this.z = 0;\n    }\n    return this;\n  },\n  multiplyScalar: function multiplyScalar(scalar) {\n    this.x *= scalar;\n    this.y *= scalar;\n    this.z *= scalar;\n  },\n  applyQuaternion: function applyQuaternion(q) {\n    var x = this.x;\n    var y = this.y;\n    var z = this.z;\n    var qx = q.x;\n    var qy = q.y;\n    var qz = q.z;\n    var qw = q.w;\n    var ix = qw * x + qy * z - qz * y;\n    var iy = qw * y + qz * x - qx * z;\n    var iz = qw * z + qx * y - qy * x;\n    var iw = -qx * x - qy * y - qz * z;\n    this.x = ix * qw + iw * -qx + iy * -qz - iz * -qy;\n    this.y = iy * qw + iw * -qy + iz * -qx - ix * -qz;\n    this.z = iz * qw + iw * -qz + ix * -qy - iy * -qx;\n    return this;\n  },\n  dot: function dot(v) {\n    return this.x * v.x + this.y * v.y + this.z * v.z;\n  },\n  crossVectors: function crossVectors(a, b) {\n    var ax = a.x,\n        ay = a.y,\n        az = a.z;\n    var bx = b.x,\n        by = b.y,\n        bz = b.z;\n    this.x = ay * bz - az * by;\n    this.y = az * bx - ax * bz;\n    this.z = ax * by - ay * bx;\n    return this;\n  }\n};\nvar Quaternion = function Quaternion(x, y, z, w) {\n  this.x = x || 0;\n  this.y = y || 0;\n  this.z = z || 0;\n  this.w = w !== undefined ? w : 1;\n};\nQuaternion.prototype = {\n  constructor: Quaternion,\n  set: function set(x, y, z, w) {\n    this.x = x;\n    this.y = y;\n    this.z = z;\n    this.w = w;\n    return this;\n  },\n  copy: function copy(quaternion) {\n    this.x = quaternion.x;\n    this.y = quaternion.y;\n    this.z = quaternion.z;\n    this.w = quaternion.w;\n    return this;\n  },\n  setFromEulerXYZ: function setFromEulerXYZ(x, y, z) {\n    var c1 = Math.cos(x / 2);\n    var c2 = Math.cos(y / 2);\n    var c3 = Math.cos(z / 2);\n    var s1 = Math.sin(x / 2);\n    var s2 = Math.sin(y / 2);\n    var s3 = Math.sin(z / 2);\n    this.x = s1 * c2 * c3 + c1 * s2 * s3;\n    this.y = c1 * s2 * c3 - s1 * c2 * s3;\n    this.z = c1 * c2 * s3 + s1 * s2 * c3;\n    this.w = c1 * c2 * c3 - s1 * s2 * s3;\n    return this;\n  },\n  setFromEulerYXZ: function setFromEulerYXZ(x, y, z) {\n    var c1 = Math.cos(x / 2);\n    var c2 = Math.cos(y / 2);\n    var c3 = Math.cos(z / 2);\n    var s1 = Math.sin(x / 2);\n    var s2 = Math.sin(y / 2);\n    var s3 = Math.sin(z / 2);\n    this.x = s1 * c2 * c3 + c1 * s2 * s3;\n    this.y = c1 * s2 * c3 - s1 * c2 * s3;\n    this.z = c1 * c2 * s3 - s1 * s2 * c3;\n    this.w = c1 * c2 * c3 + s1 * s2 * s3;\n    return this;\n  },\n  setFromAxisAngle: function setFromAxisAngle(axis, angle) {\n    var halfAngle = angle / 2,\n        s = Math.sin(halfAngle);\n    this.x = axis.x * s;\n    this.y = axis.y * s;\n    this.z = axis.z * s;\n    this.w = Math.cos(halfAngle);\n    return this;\n  },\n  multiply: function multiply(q) {\n    return this.multiplyQuaternions(this, q);\n  },\n  multiplyQuaternions: function multiplyQuaternions(a, b) {\n    var qax = a.x,\n        qay = a.y,\n        qaz = a.z,\n        qaw = a.w;\n    var qbx = b.x,\n        qby = b.y,\n        qbz = b.z,\n        qbw = b.w;\n    this.x = qax * qbw + qaw * qbx + qay * qbz - qaz * qby;\n    this.y = qay * qbw + qaw * qby + qaz * qbx - qax * qbz;\n    this.z = qaz * qbw + qaw * qbz + qax * qby - qay * qbx;\n    this.w = qaw * qbw - qax * qbx - qay * qby - qaz * qbz;\n    return this;\n  },\n  inverse: function inverse() {\n    this.x *= -1;\n    this.y *= -1;\n    this.z *= -1;\n    this.normalize();\n    return this;\n  },\n  normalize: function normalize() {\n    var l = Math.sqrt(this.x * this.x + this.y * this.y + this.z * this.z + this.w * this.w);\n    if (l === 0) {\n      this.x = 0;\n      this.y = 0;\n      this.z = 0;\n      this.w = 1;\n    } else {\n      l = 1 / l;\n      this.x = this.x * l;\n      this.y = this.y * l;\n      this.z = this.z * l;\n      this.w = this.w * l;\n    }\n    return this;\n  },\n  slerp: function slerp(qb, t) {\n    if (t === 0) return this;\n    if (t === 1) return this.copy(qb);\n    var x = this.x,\n        y = this.y,\n        z = this.z,\n        w = this.w;\n    var cosHalfTheta = w * qb.w + x * qb.x + y * qb.y + z * qb.z;\n    if (cosHalfTheta < 0) {\n      this.w = -qb.w;\n      this.x = -qb.x;\n      this.y = -qb.y;\n      this.z = -qb.z;\n      cosHalfTheta = -cosHalfTheta;\n    } else {\n      this.copy(qb);\n    }\n    if (cosHalfTheta >= 1.0) {\n      this.w = w;\n      this.x = x;\n      this.y = y;\n      this.z = z;\n      return this;\n    }\n    var halfTheta = Math.acos(cosHalfTheta);\n    var sinHalfTheta = Math.sqrt(1.0 - cosHalfTheta * cosHalfTheta);\n    if (Math.abs(sinHalfTheta) < 0.001) {\n      this.w = 0.5 * (w + this.w);\n      this.x = 0.5 * (x + this.x);\n      this.y = 0.5 * (y + this.y);\n      this.z = 0.5 * (z + this.z);\n      return this;\n    }\n    var ratioA = Math.sin((1 - t) * halfTheta) / sinHalfTheta,\n        ratioB = Math.sin(t * halfTheta) / sinHalfTheta;\n    this.w = w * ratioA + this.w * ratioB;\n    this.x = x * ratioA + this.x * ratioB;\n    this.y = y * ratioA + this.y * ratioB;\n    this.z = z * ratioA + this.z * ratioB;\n    return this;\n  },\n  setFromUnitVectors: function () {\n    var v1, r;\n    var EPS = 0.000001;\n    return function (vFrom, vTo) {\n      if (v1 === undefined) v1 = new Vector3();\n      r = vFrom.dot(vTo) + 1;\n      if (r < EPS) {\n        r = 0;\n        if (Math.abs(vFrom.x) > Math.abs(vFrom.z)) {\n          v1.set(-vFrom.y, vFrom.x, 0);\n        } else {\n          v1.set(0, -vFrom.z, vFrom.y);\n        }\n      } else {\n        v1.crossVectors(vFrom, vTo);\n      }\n      this.x = v1.x;\n      this.y = v1.y;\n      this.z = v1.z;\n      this.w = r;\n      this.normalize();\n      return this;\n    };\n  }()\n};\nfunction Device(params) {\n  this.width = params.width || getScreenWidth();\n  this.height = params.height || getScreenHeight();\n  this.widthMeters = params.widthMeters;\n  this.heightMeters = params.heightMeters;\n  this.bevelMeters = params.bevelMeters;\n}\nvar DEFAULT_ANDROID = new Device({\n  widthMeters: 0.110,\n  heightMeters: 0.062,\n  bevelMeters: 0.004\n});\nvar DEFAULT_IOS = new Device({\n  widthMeters: 0.1038,\n  heightMeters: 0.0584,\n  bevelMeters: 0.004\n});\nvar Viewers = {\n  CardboardV1: new CardboardViewer({\n    id: 'CardboardV1',\n    label: 'Cardboard I/O 2014',\n    fov: 40,\n    interLensDistance: 0.060,\n    baselineLensDistance: 0.035,\n    screenLensDistance: 0.042,\n    distortionCoefficients: [0.441, 0.156],\n    inverseCoefficients: [-0.4410035, 0.42756155, -0.4804439, 0.5460139, -0.58821183, 0.5733938, -0.48303202, 0.33299083, -0.17573841, 0.0651772, -0.01488963, 0.001559834]\n  }),\n  CardboardV2: new CardboardViewer({\n    id: 'CardboardV2',\n    label: 'Cardboard I/O 2015',\n    fov: 60,\n    interLensDistance: 0.064,\n    baselineLensDistance: 0.035,\n    screenLensDistance: 0.039,\n    distortionCoefficients: [0.34, 0.55],\n    inverseCoefficients: [-0.33836704, -0.18162185, 0.862655, -1.2462051, 1.0560602, -0.58208317, 0.21609078, -0.05444823, 0.009177956, -9.904169E-4, 6.183535E-5, -1.6981803E-6]\n  })\n};\nfunction DeviceInfo(deviceParams, additionalViewers) {\n  this.viewer = Viewers.CardboardV2;\n  this.updateDeviceParams(deviceParams);\n  this.distortion = new Distortion(this.viewer.distortionCoefficients);\n  for (var i = 0; i < additionalViewers.length; i++) {\n    var viewer = additionalViewers[i];\n    Viewers[viewer.id] = new CardboardViewer(viewer);\n  }\n}\nDeviceInfo.prototype.updateDeviceParams = function (deviceParams) {\n  this.device = this.determineDevice_(deviceParams) || this.device;\n};\nDeviceInfo.prototype.getDevice = function () {\n  return this.device;\n};\nDeviceInfo.prototype.setViewer = function (viewer) {\n  this.viewer = viewer;\n  this.distortion = new Distortion(this.viewer.distortionCoefficients);\n};\nDeviceInfo.prototype.determineDevice_ = function (deviceParams) {\n  if (!deviceParams) {\n    if (isIOS()) {\n      console.warn('Using fallback iOS device measurements.');\n      return DEFAULT_IOS;\n    } else {\n      console.warn('Using fallback Android device measurements.');\n      return DEFAULT_ANDROID;\n    }\n  }\n  var METERS_PER_INCH = 0.0254;\n  var metersPerPixelX = METERS_PER_INCH / deviceParams.xdpi;\n  var metersPerPixelY = METERS_PER_INCH / deviceParams.ydpi;\n  var width = getScreenWidth();\n  var height = getScreenHeight();\n  return new Device({\n    widthMeters: metersPerPixelX * width,\n    heightMeters: metersPerPixelY * height,\n    bevelMeters: deviceParams.bevelMm * 0.001\n  });\n};\nDeviceInfo.prototype.getDistortedFieldOfViewLeftEye = function () {\n  var viewer = this.viewer;\n  var device = this.device;\n  var distortion = this.distortion;\n  var eyeToScreenDistance = viewer.screenLensDistance;\n  var outerDist = (device.widthMeters - viewer.interLensDistance) / 2;\n  var innerDist = viewer.interLensDistance / 2;\n  var bottomDist = viewer.baselineLensDistance - device.bevelMeters;\n  var topDist = device.heightMeters - bottomDist;\n  var outerAngle = radToDeg * Math.atan(distortion.distort(outerDist / eyeToScreenDistance));\n  var innerAngle = radToDeg * Math.atan(distortion.distort(innerDist / eyeToScreenDistance));\n  var bottomAngle = radToDeg * Math.atan(distortion.distort(bottomDist / eyeToScreenDistance));\n  var topAngle = radToDeg * Math.atan(distortion.distort(topDist / eyeToScreenDistance));\n  return {\n    leftDegrees: Math.min(outerAngle, viewer.fov),\n    rightDegrees: Math.min(innerAngle, viewer.fov),\n    downDegrees: Math.min(bottomAngle, viewer.fov),\n    upDegrees: Math.min(topAngle, viewer.fov)\n  };\n};\nDeviceInfo.prototype.getLeftEyeVisibleTanAngles = function () {\n  var viewer = this.viewer;\n  var device = this.device;\n  var distortion = this.distortion;\n  var fovLeft = Math.tan(-degToRad * viewer.fov);\n  var fovTop = Math.tan(degToRad * viewer.fov);\n  var fovRight = Math.tan(degToRad * viewer.fov);\n  var fovBottom = Math.tan(-degToRad * viewer.fov);\n  var halfWidth = device.widthMeters / 4;\n  var halfHeight = device.heightMeters / 2;\n  var verticalLensOffset = viewer.baselineLensDistance - device.bevelMeters - halfHeight;\n  var centerX = viewer.interLensDistance / 2 - halfWidth;\n  var centerY = -verticalLensOffset;\n  var centerZ = viewer.screenLensDistance;\n  var screenLeft = distortion.distort((centerX - halfWidth) / centerZ);\n  var screenTop = distortion.distort((centerY + halfHeight) / centerZ);\n  var screenRight = distortion.distort((centerX + halfWidth) / centerZ);\n  var screenBottom = distortion.distort((centerY - halfHeight) / centerZ);\n  var result = new Float32Array(4);\n  result[0] = Math.max(fovLeft, screenLeft);\n  result[1] = Math.min(fovTop, screenTop);\n  result[2] = Math.min(fovRight, screenRight);\n  result[3] = Math.max(fovBottom, screenBottom);\n  return result;\n};\nDeviceInfo.prototype.getLeftEyeNoLensTanAngles = function () {\n  var viewer = this.viewer;\n  var device = this.device;\n  var distortion = this.distortion;\n  var result = new Float32Array(4);\n  var fovLeft = distortion.distortInverse(Math.tan(-degToRad * viewer.fov));\n  var fovTop = distortion.distortInverse(Math.tan(degToRad * viewer.fov));\n  var fovRight = distortion.distortInverse(Math.tan(degToRad * viewer.fov));\n  var fovBottom = distortion.distortInverse(Math.tan(-degToRad * viewer.fov));\n  var halfWidth = device.widthMeters / 4;\n  var halfHeight = device.heightMeters / 2;\n  var verticalLensOffset = viewer.baselineLensDistance - device.bevelMeters - halfHeight;\n  var centerX = viewer.interLensDistance / 2 - halfWidth;\n  var centerY = -verticalLensOffset;\n  var centerZ = viewer.screenLensDistance;\n  var screenLeft = (centerX - halfWidth) / centerZ;\n  var screenTop = (centerY + halfHeight) / centerZ;\n  var screenRight = (centerX + halfWidth) / centerZ;\n  var screenBottom = (centerY - halfHeight) / centerZ;\n  result[0] = Math.max(fovLeft, screenLeft);\n  result[1] = Math.min(fovTop, screenTop);\n  result[2] = Math.min(fovRight, screenRight);\n  result[3] = Math.max(fovBottom, screenBottom);\n  return result;\n};\nDeviceInfo.prototype.getLeftEyeVisibleScreenRect = function (undistortedFrustum) {\n  var viewer = this.viewer;\n  var device = this.device;\n  var dist = viewer.screenLensDistance;\n  var eyeX = (device.widthMeters - viewer.interLensDistance) / 2;\n  var eyeY = viewer.baselineLensDistance - device.bevelMeters;\n  var left = (undistortedFrustum[0] * dist + eyeX) / device.widthMeters;\n  var top = (undistortedFrustum[1] * dist + eyeY) / device.heightMeters;\n  var right = (undistortedFrustum[2] * dist + eyeX) / device.widthMeters;\n  var bottom = (undistortedFrustum[3] * dist + eyeY) / device.heightMeters;\n  return {\n    x: left,\n    y: bottom,\n    width: right - left,\n    height: top - bottom\n  };\n};\nDeviceInfo.prototype.getFieldOfViewLeftEye = function (opt_isUndistorted) {\n  return opt_isUndistorted ? this.getUndistortedFieldOfViewLeftEye() : this.getDistortedFieldOfViewLeftEye();\n};\nDeviceInfo.prototype.getFieldOfViewRightEye = function (opt_isUndistorted) {\n  var fov = this.getFieldOfViewLeftEye(opt_isUndistorted);\n  return {\n    leftDegrees: fov.rightDegrees,\n    rightDegrees: fov.leftDegrees,\n    upDegrees: fov.upDegrees,\n    downDegrees: fov.downDegrees\n  };\n};\nDeviceInfo.prototype.getUndistortedFieldOfViewLeftEye = function () {\n  var p = this.getUndistortedParams_();\n  return {\n    leftDegrees: radToDeg * Math.atan(p.outerDist),\n    rightDegrees: radToDeg * Math.atan(p.innerDist),\n    downDegrees: radToDeg * Math.atan(p.bottomDist),\n    upDegrees: radToDeg * Math.atan(p.topDist)\n  };\n};\nDeviceInfo.prototype.getUndistortedViewportLeftEye = function () {\n  var p = this.getUndistortedParams_();\n  var viewer = this.viewer;\n  var device = this.device;\n  var eyeToScreenDistance = viewer.screenLensDistance;\n  var screenWidth = device.widthMeters / eyeToScreenDistance;\n  var screenHeight = device.heightMeters / eyeToScreenDistance;\n  var xPxPerTanAngle = device.width / screenWidth;\n  var yPxPerTanAngle = device.height / screenHeight;\n  var x = Math.round((p.eyePosX - p.outerDist) * xPxPerTanAngle);\n  var y = Math.round((p.eyePosY - p.bottomDist) * yPxPerTanAngle);\n  return {\n    x: x,\n    y: y,\n    width: Math.round((p.eyePosX + p.innerDist) * xPxPerTanAngle) - x,\n    height: Math.round((p.eyePosY + p.topDist) * yPxPerTanAngle) - y\n  };\n};\nDeviceInfo.prototype.getUndistortedParams_ = function () {\n  var viewer = this.viewer;\n  var device = this.device;\n  var distortion = this.distortion;\n  var eyeToScreenDistance = viewer.screenLensDistance;\n  var halfLensDistance = viewer.interLensDistance / 2 / eyeToScreenDistance;\n  var screenWidth = device.widthMeters / eyeToScreenDistance;\n  var screenHeight = device.heightMeters / eyeToScreenDistance;\n  var eyePosX = screenWidth / 2 - halfLensDistance;\n  var eyePosY = (viewer.baselineLensDistance - device.bevelMeters) / eyeToScreenDistance;\n  var maxFov = viewer.fov;\n  var viewerMax = distortion.distortInverse(Math.tan(degToRad * maxFov));\n  var outerDist = Math.min(eyePosX, viewerMax);\n  var innerDist = Math.min(halfLensDistance, viewerMax);\n  var bottomDist = Math.min(eyePosY, viewerMax);\n  var topDist = Math.min(screenHeight - eyePosY, viewerMax);\n  return {\n    outerDist: outerDist,\n    innerDist: innerDist,\n    topDist: topDist,\n    bottomDist: bottomDist,\n    eyePosX: eyePosX,\n    eyePosY: eyePosY\n  };\n};\nfunction CardboardViewer(params) {\n  this.id = params.id;\n  this.label = params.label;\n  this.fov = params.fov;\n  this.interLensDistance = params.interLensDistance;\n  this.baselineLensDistance = params.baselineLensDistance;\n  this.screenLensDistance = params.screenLensDistance;\n  this.distortionCoefficients = params.distortionCoefficients;\n  this.inverseCoefficients = params.inverseCoefficients;\n}\nDeviceInfo.Viewers = Viewers;\nvar format = 1;\nvar last_updated = \"2019-11-09T17:36:14Z\";\nvar devices = [{\"type\":\"android\",\"rules\":[{\"mdmh\":\"asus/*/Nexus 7/*\"},{\"ua\":\"Nexus 7\"}],\"dpi\":[320.8,323],\"bw\":3,\"ac\":500},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"asus/*/ASUS_X00PD/*\"},{\"ua\":\"ASUS_X00PD\"}],\"dpi\":245,\"bw\":3,\"ac\":500},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"asus/*/ASUS_X008D/*\"},{\"ua\":\"ASUS_X008D\"}],\"dpi\":282,\"bw\":3,\"ac\":500},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"asus/*/ASUS_Z00AD/*\"},{\"ua\":\"ASUS_Z00AD\"}],\"dpi\":[403,404.6],\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"Google/*/Pixel 2 XL/*\"},{\"ua\":\"Pixel 2 XL\"}],\"dpi\":537.9,\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"Google/*/Pixel 3 XL/*\"},{\"ua\":\"Pixel 3 XL\"}],\"dpi\":[558.5,553.8],\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"Google/*/Pixel XL/*\"},{\"ua\":\"Pixel XL\"}],\"dpi\":[537.9,533],\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"Google/*/Pixel 3/*\"},{\"ua\":\"Pixel 3\"}],\"dpi\":442.4,\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"Google/*/Pixel 2/*\"},{\"ua\":\"Pixel 2\"}],\"dpi\":441,\"bw\":3,\"ac\":500},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"Google/*/Pixel/*\"},{\"ua\":\"Pixel\"}],\"dpi\":[432.6,436.7],\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"HTC/*/HTC6435LVW/*\"},{\"ua\":\"HTC6435LVW\"}],\"dpi\":[449.7,443.3],\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"HTC/*/HTC One XL/*\"},{\"ua\":\"HTC One XL\"}],\"dpi\":[315.3,314.6],\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"htc/*/Nexus 9/*\"},{\"ua\":\"Nexus 9\"}],\"dpi\":289,\"bw\":3,\"ac\":500},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"HTC/*/HTC One M9/*\"},{\"ua\":\"HTC One M9\"}],\"dpi\":[442.5,443.3],\"bw\":3,\"ac\":500},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"HTC/*/HTC One_M8/*\"},{\"ua\":\"HTC One_M8\"}],\"dpi\":[449.7,447.4],\"bw\":3,\"ac\":500},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"HTC/*/HTC One/*\"},{\"ua\":\"HTC One\"}],\"dpi\":472.8,\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"Huawei/*/Nexus 6P/*\"},{\"ua\":\"Nexus 6P\"}],\"dpi\":[515.1,518],\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"Huawei/*/BLN-L24/*\"},{\"ua\":\"HONORBLN-L24\"}],\"dpi\":480,\"bw\":4,\"ac\":500},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"Huawei/*/BKL-L09/*\"},{\"ua\":\"BKL-L09\"}],\"dpi\":403,\"bw\":3.47,\"ac\":500},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"LENOVO/*/Lenovo PB2-690Y/*\"},{\"ua\":\"Lenovo PB2-690Y\"}],\"dpi\":[457.2,454.713],\"bw\":3,\"ac\":500},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"LGE/*/Nexus 5X/*\"},{\"ua\":\"Nexus 5X\"}],\"dpi\":[422,419.9],\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"LGE/*/LGMS345/*\"},{\"ua\":\"LGMS345\"}],\"dpi\":[221.7,219.1],\"bw\":3,\"ac\":500},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"LGE/*/LG-D800/*\"},{\"ua\":\"LG-D800\"}],\"dpi\":[422,424.1],\"bw\":3,\"ac\":500},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"LGE/*/LG-D850/*\"},{\"ua\":\"LG-D850\"}],\"dpi\":[537.9,541.9],\"bw\":3,\"ac\":500},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"LGE/*/VS985 4G/*\"},{\"ua\":\"VS985 4G\"}],\"dpi\":[537.9,535.6],\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"LGE/*/Nexus 5/*\"},{\"ua\":\"Nexus 5 B\"}],\"dpi\":[442.4,444.8],\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"LGE/*/Nexus 4/*\"},{\"ua\":\"Nexus 4\"}],\"dpi\":[319.8,318.4],\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"LGE/*/LG-P769/*\"},{\"ua\":\"LG-P769\"}],\"dpi\":[240.6,247.5],\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"LGE/*/LGMS323/*\"},{\"ua\":\"LGMS323\"}],\"dpi\":[206.6,204.6],\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"LGE/*/LGLS996/*\"},{\"ua\":\"LGLS996\"}],\"dpi\":[403.4,401.5],\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"Micromax/*/4560MMX/*\"},{\"ua\":\"4560MMX\"}],\"dpi\":[240,219.4],\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"Micromax/*/A250/*\"},{\"ua\":\"Micromax A250\"}],\"dpi\":[480,446.4],\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"Micromax/*/Micromax AQ4501/*\"},{\"ua\":\"Micromax AQ4501\"}],\"dpi\":240,\"bw\":3,\"ac\":500},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"motorola/*/G5/*\"},{\"ua\":\"Moto G (5) Plus\"}],\"dpi\":[403.4,403],\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"motorola/*/DROID RAZR/*\"},{\"ua\":\"DROID RAZR\"}],\"dpi\":[368.1,256.7],\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"motorola/*/XT830C/*\"},{\"ua\":\"XT830C\"}],\"dpi\":[254,255.9],\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"motorola/*/XT1021/*\"},{\"ua\":\"XT1021\"}],\"dpi\":[254,256.7],\"bw\":3,\"ac\":500},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"motorola/*/XT1023/*\"},{\"ua\":\"XT1023\"}],\"dpi\":[254,256.7],\"bw\":3,\"ac\":500},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"motorola/*/XT1028/*\"},{\"ua\":\"XT1028\"}],\"dpi\":[326.6,327.6],\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"motorola/*/XT1034/*\"},{\"ua\":\"XT1034\"}],\"dpi\":[326.6,328.4],\"bw\":3,\"ac\":500},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"motorola/*/XT1053/*\"},{\"ua\":\"XT1053\"}],\"dpi\":[315.3,316.1],\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"motorola/*/XT1562/*\"},{\"ua\":\"XT1562\"}],\"dpi\":[403.4,402.7],\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"motorola/*/Nexus 6/*\"},{\"ua\":\"Nexus 6 B\"}],\"dpi\":[494.3,489.7],\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"motorola/*/XT1063/*\"},{\"ua\":\"XT1063\"}],\"dpi\":[295,296.6],\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"motorola/*/XT1064/*\"},{\"ua\":\"XT1064\"}],\"dpi\":[295,295.6],\"bw\":3,\"ac\":500},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"motorola/*/XT1092/*\"},{\"ua\":\"XT1092\"}],\"dpi\":[422,424.1],\"bw\":3,\"ac\":500},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"motorola/*/XT1095/*\"},{\"ua\":\"XT1095\"}],\"dpi\":[422,423.4],\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"motorola/*/G4/*\"},{\"ua\":\"Moto G (4)\"}],\"dpi\":401,\"bw\":4,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"OnePlus/*/A0001/*\"},{\"ua\":\"A0001\"}],\"dpi\":[403.4,401],\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"OnePlus/*/ONE E1001/*\"},{\"ua\":\"ONE E1001\"}],\"dpi\":[442.4,441.4],\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"OnePlus/*/ONE E1003/*\"},{\"ua\":\"ONE E1003\"}],\"dpi\":[442.4,441.4],\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"OnePlus/*/ONE E1005/*\"},{\"ua\":\"ONE E1005\"}],\"dpi\":[442.4,441.4],\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"OnePlus/*/ONE A2001/*\"},{\"ua\":\"ONE A2001\"}],\"dpi\":[391.9,405.4],\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"OnePlus/*/ONE A2003/*\"},{\"ua\":\"ONE A2003\"}],\"dpi\":[391.9,405.4],\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"OnePlus/*/ONE A2005/*\"},{\"ua\":\"ONE A2005\"}],\"dpi\":[391.9,405.4],\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"OnePlus/*/ONEPLUS A3000/*\"},{\"ua\":\"ONEPLUS A3000\"}],\"dpi\":401,\"bw\":3,\"ac\":500},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"OnePlus/*/ONEPLUS A3003/*\"},{\"ua\":\"ONEPLUS A3003\"}],\"dpi\":401,\"bw\":3,\"ac\":500},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"OnePlus/*/ONEPLUS A3010/*\"},{\"ua\":\"ONEPLUS A3010\"}],\"dpi\":401,\"bw\":3,\"ac\":500},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"OnePlus/*/ONEPLUS A5000/*\"},{\"ua\":\"ONEPLUS A5000 \"}],\"dpi\":[403.411,399.737],\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"OnePlus/*/ONE A5010/*\"},{\"ua\":\"ONEPLUS A5010\"}],\"dpi\":[403,400],\"bw\":2,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"OnePlus/*/ONEPLUS A6000/*\"},{\"ua\":\"ONEPLUS A6000\"}],\"dpi\":401,\"bw\":3,\"ac\":500},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"OnePlus/*/ONEPLUS A6003/*\"},{\"ua\":\"ONEPLUS A6003\"}],\"dpi\":401,\"bw\":3,\"ac\":500},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"OnePlus/*/ONEPLUS A6010/*\"},{\"ua\":\"ONEPLUS A6010\"}],\"dpi\":401,\"bw\":2,\"ac\":500},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"OnePlus/*/ONEPLUS A6013/*\"},{\"ua\":\"ONEPLUS A6013\"}],\"dpi\":401,\"bw\":2,\"ac\":500},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"OPPO/*/X909/*\"},{\"ua\":\"X909\"}],\"dpi\":[442.4,444.1],\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"samsung/*/GT-I9082/*\"},{\"ua\":\"GT-I9082\"}],\"dpi\":[184.7,185.4],\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"samsung/*/SM-G360P/*\"},{\"ua\":\"SM-G360P\"}],\"dpi\":[196.7,205.4],\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"samsung/*/Nexus S/*\"},{\"ua\":\"Nexus S\"}],\"dpi\":[234.5,229.8],\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"samsung/*/GT-I9300/*\"},{\"ua\":\"GT-I9300\"}],\"dpi\":[304.8,303.9],\"bw\":5,\"ac\":500},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"samsung/*/SM-T230NU/*\"},{\"ua\":\"SM-T230NU\"}],\"dpi\":216,\"bw\":3,\"ac\":500},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"samsung/*/SGH-T399/*\"},{\"ua\":\"SGH-T399\"}],\"dpi\":[217.7,231.4],\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"samsung/*/SGH-M919/*\"},{\"ua\":\"SGH-M919\"}],\"dpi\":[440.8,437.7],\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"samsung/*/SM-N9005/*\"},{\"ua\":\"SM-N9005\"}],\"dpi\":[386.4,387],\"bw\":3,\"ac\":500},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"samsung/*/SAMSUNG-SM-N900A/*\"},{\"ua\":\"SAMSUNG-SM-N900A\"}],\"dpi\":[386.4,387.7],\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"samsung/*/GT-I9500/*\"},{\"ua\":\"GT-I9500\"}],\"dpi\":[442.5,443.3],\"bw\":3,\"ac\":500},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"samsung/*/GT-I9505/*\"},{\"ua\":\"GT-I9505\"}],\"dpi\":439.4,\"bw\":4,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"samsung/*/SM-G900F/*\"},{\"ua\":\"SM-G900F\"}],\"dpi\":[415.6,431.6],\"bw\":5,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"samsung/*/SM-G900M/*\"},{\"ua\":\"SM-G900M\"}],\"dpi\":[415.6,431.6],\"bw\":5,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"samsung/*/SM-G800F/*\"},{\"ua\":\"SM-G800F\"}],\"dpi\":326.8,\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"samsung/*/SM-G906S/*\"},{\"ua\":\"SM-G906S\"}],\"dpi\":[562.7,572.4],\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"samsung/*/GT-I9300/*\"},{\"ua\":\"GT-I9300\"}],\"dpi\":[306.7,304.8],\"bw\":5,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"samsung/*/SM-T535/*\"},{\"ua\":\"SM-T535\"}],\"dpi\":[142.6,136.4],\"bw\":3,\"ac\":500},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"samsung/*/SM-N920C/*\"},{\"ua\":\"SM-N920C\"}],\"dpi\":[515.1,518.4],\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"samsung/*/SM-N920P/*\"},{\"ua\":\"SM-N920P\"}],\"dpi\":[386.3655,390.144],\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"samsung/*/SM-N920W8/*\"},{\"ua\":\"SM-N920W8\"}],\"dpi\":[515.1,518.4],\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"samsung/*/GT-I9300I/*\"},{\"ua\":\"GT-I9300I\"}],\"dpi\":[304.8,305.8],\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"samsung/*/GT-I9195/*\"},{\"ua\":\"GT-I9195\"}],\"dpi\":[249.4,256.7],\"bw\":3,\"ac\":500},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"samsung/*/SPH-L520/*\"},{\"ua\":\"SPH-L520\"}],\"dpi\":[249.4,255.9],\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"samsung/*/SAMSUNG-SGH-I717/*\"},{\"ua\":\"SAMSUNG-SGH-I717\"}],\"dpi\":285.8,\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"samsung/*/SPH-D710/*\"},{\"ua\":\"SPH-D710\"}],\"dpi\":[217.7,204.2],\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"samsung/*/GT-N7100/*\"},{\"ua\":\"GT-N7100\"}],\"dpi\":265.1,\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"samsung/*/SCH-I605/*\"},{\"ua\":\"SCH-I605\"}],\"dpi\":265.1,\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"samsung/*/Galaxy Nexus/*\"},{\"ua\":\"Galaxy Nexus\"}],\"dpi\":[315.3,314.2],\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"samsung/*/SM-N910H/*\"},{\"ua\":\"SM-N910H\"}],\"dpi\":[515.1,518],\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"samsung/*/SM-N910C/*\"},{\"ua\":\"SM-N910C\"}],\"dpi\":[515.2,520.2],\"bw\":3,\"ac\":500},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"samsung/*/SM-G130M/*\"},{\"ua\":\"SM-G130M\"}],\"dpi\":[165.9,164.8],\"bw\":3,\"ac\":500},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"samsung/*/SM-G928I/*\"},{\"ua\":\"SM-G928I\"}],\"dpi\":[515.1,518.4],\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"samsung/*/SM-G920F/*\"},{\"ua\":\"SM-G920F\"}],\"dpi\":580.6,\"bw\":3,\"ac\":500},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"samsung/*/SM-G920P/*\"},{\"ua\":\"SM-G920P\"}],\"dpi\":[522.5,577],\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"samsung/*/SM-G925F/*\"},{\"ua\":\"SM-G925F\"}],\"dpi\":580.6,\"bw\":3,\"ac\":500},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"samsung/*/SM-G925V/*\"},{\"ua\":\"SM-G925V\"}],\"dpi\":[522.5,576.6],\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"samsung/*/SM-G930F/*\"},{\"ua\":\"SM-G930F\"}],\"dpi\":576.6,\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"samsung/*/SM-G935F/*\"},{\"ua\":\"SM-G935F\"}],\"dpi\":533,\"bw\":3,\"ac\":500},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"samsung/*/SM-G950F/*\"},{\"ua\":\"SM-G950F\"}],\"dpi\":[562.707,565.293],\"bw\":3,\"ac\":500},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"samsung/*/SM-G955U/*\"},{\"ua\":\"SM-G955U\"}],\"dpi\":[522.514,525.762],\"bw\":3,\"ac\":500},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"samsung/*/SM-G955F/*\"},{\"ua\":\"SM-G955F\"}],\"dpi\":[522.514,525.762],\"bw\":3,\"ac\":500},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"samsung/*/SM-G960F/*\"},{\"ua\":\"SM-G960F\"}],\"dpi\":[569.575,571.5],\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"samsung/*/SM-G9600/*\"},{\"ua\":\"SM-G9600\"}],\"dpi\":[569.575,571.5],\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"samsung/*/SM-G960T/*\"},{\"ua\":\"SM-G960T\"}],\"dpi\":[569.575,571.5],\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"samsung/*/SM-G960N/*\"},{\"ua\":\"SM-G960N\"}],\"dpi\":[569.575,571.5],\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"samsung/*/SM-G960U/*\"},{\"ua\":\"SM-G960U\"}],\"dpi\":[569.575,571.5],\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"samsung/*/SM-G9608/*\"},{\"ua\":\"SM-G9608\"}],\"dpi\":[569.575,571.5],\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"samsung/*/SM-G960FD/*\"},{\"ua\":\"SM-G960FD\"}],\"dpi\":[569.575,571.5],\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"samsung/*/SM-G960W/*\"},{\"ua\":\"SM-G960W\"}],\"dpi\":[569.575,571.5],\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"samsung/*/SM-G965F/*\"},{\"ua\":\"SM-G965F\"}],\"dpi\":529,\"bw\":2,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"Sony/*/C6903/*\"},{\"ua\":\"C6903\"}],\"dpi\":[442.5,443.3],\"bw\":3,\"ac\":500},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"Sony/*/D6653/*\"},{\"ua\":\"D6653\"}],\"dpi\":[428.6,427.6],\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"Sony/*/E6653/*\"},{\"ua\":\"E6653\"}],\"dpi\":[428.6,425.7],\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"Sony/*/E6853/*\"},{\"ua\":\"E6853\"}],\"dpi\":[403.4,401.9],\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"Sony/*/SGP321/*\"},{\"ua\":\"SGP321\"}],\"dpi\":[224.7,224.1],\"bw\":3,\"ac\":500},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"TCT/*/ALCATEL ONE TOUCH Fierce/*\"},{\"ua\":\"ALCATEL ONE TOUCH Fierce\"}],\"dpi\":[240,247.5],\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"THL/*/thl 5000/*\"},{\"ua\":\"thl 5000\"}],\"dpi\":[480,443.3],\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"Fly/*/IQ4412/*\"},{\"ua\":\"IQ4412\"}],\"dpi\":307.9,\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"ZTE/*/ZTE Blade L2/*\"},{\"ua\":\"ZTE Blade L2\"}],\"dpi\":240,\"bw\":3,\"ac\":500},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"BENEVE/*/VR518/*\"},{\"ua\":\"VR518\"}],\"dpi\":480,\"bw\":3,\"ac\":500},{\"type\":\"ios\",\"rules\":[{\"res\":[640,960]}],\"dpi\":[325.1,328.4],\"bw\":4,\"ac\":1000},{\"type\":\"ios\",\"rules\":[{\"res\":[640,1136]}],\"dpi\":[317.1,320.2],\"bw\":3,\"ac\":1000},{\"type\":\"ios\",\"rules\":[{\"res\":[750,1334]}],\"dpi\":326.4,\"bw\":4,\"ac\":1000},{\"type\":\"ios\",\"rules\":[{\"res\":[1242,2208]}],\"dpi\":[453.6,458.4],\"bw\":4,\"ac\":1000},{\"type\":\"ios\",\"rules\":[{\"res\":[1125,2001]}],\"dpi\":[410.9,415.4],\"bw\":4,\"ac\":1000},{\"type\":\"ios\",\"rules\":[{\"res\":[1125,2436]}],\"dpi\":458,\"bw\":4,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"Huawei/*/EML-L29/*\"},{\"ua\":\"EML-L29\"}],\"dpi\":428,\"bw\":3.45,\"ac\":500},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"Nokia/*/Nokia 7.1/*\"},{\"ua\":\"Nokia 7.1\"}],\"dpi\":[432,431.9],\"bw\":3,\"ac\":500},{\"type\":\"ios\",\"rules\":[{\"res\":[1242,2688]}],\"dpi\":458,\"bw\":4,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"samsung/*/SM-G570M/*\"},{\"ua\":\"SM-G570M\"}],\"dpi\":320,\"bw\":3.684,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"samsung/*/SM-G970F/*\"},{\"ua\":\"SM-G970F\"}],\"dpi\":438,\"bw\":2.281,\"ac\":500},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"samsung/*/SM-G973F/*\"},{\"ua\":\"SM-G973F\"}],\"dpi\":550,\"bw\":2.002,\"ac\":500},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"samsung/*/SM-G975F/*\"},{\"ua\":\"SM-G975F\"}],\"dpi\":522,\"bw\":2.054,\"ac\":500},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"samsung/*/SM-G977F/*\"},{\"ua\":\"SM-G977F\"}],\"dpi\":505,\"bw\":2.334,\"ac\":500},{\"type\":\"ios\",\"rules\":[{\"res\":[828,1792]}],\"dpi\":326,\"bw\":5,\"ac\":500}];\nvar DPDB_CACHE = {\n\tformat: format,\n\tlast_updated: last_updated,\n\tdevices: devices\n};\nfunction Dpdb(url, onDeviceParamsUpdated) {\n  this.dpdb = DPDB_CACHE;\n  this.recalculateDeviceParams_();\n  if (url) {\n    this.onDeviceParamsUpdated = onDeviceParamsUpdated;\n    var xhr = new XMLHttpRequest();\n    var obj = this;\n    xhr.open('GET', url, true);\n    xhr.addEventListener('load', function () {\n      obj.loading = false;\n      if (xhr.status >= 200 && xhr.status <= 299) {\n        obj.dpdb = JSON.parse(xhr.response);\n        obj.recalculateDeviceParams_();\n      } else {\n        console.error('Error loading online DPDB!');\n      }\n    });\n    xhr.send();\n  }\n}\nDpdb.prototype.getDeviceParams = function () {\n  return this.deviceParams;\n};\nDpdb.prototype.recalculateDeviceParams_ = function () {\n  var newDeviceParams = this.calcDeviceParams_();\n  if (newDeviceParams) {\n    this.deviceParams = newDeviceParams;\n    if (this.onDeviceParamsUpdated) {\n      this.onDeviceParamsUpdated(this.deviceParams);\n    }\n  } else {\n    console.error('Failed to recalculate device parameters.');\n  }\n};\nDpdb.prototype.calcDeviceParams_ = function () {\n  var db = this.dpdb;\n  if (!db) {\n    console.error('DPDB not available.');\n    return null;\n  }\n  if (db.format != 1) {\n    console.error('DPDB has unexpected format version.');\n    return null;\n  }\n  if (!db.devices || !db.devices.length) {\n    console.error('DPDB does not have a devices section.');\n    return null;\n  }\n  var userAgent = navigator.userAgent || navigator.vendor || window.opera;\n  var width = getScreenWidth();\n  var height = getScreenHeight();\n  if (!db.devices) {\n    console.error('DPDB has no devices section.');\n    return null;\n  }\n  for (var i = 0; i < db.devices.length; i++) {\n    var device = db.devices[i];\n    if (!device.rules) {\n      console.warn('Device[' + i + '] has no rules section.');\n      continue;\n    }\n    if (device.type != 'ios' && device.type != 'android') {\n      console.warn('Device[' + i + '] has invalid type.');\n      continue;\n    }\n    if (isIOS() != (device.type == 'ios')) continue;\n    var matched = false;\n    for (var j = 0; j < device.rules.length; j++) {\n      var rule = device.rules[j];\n      if (this.ruleMatches_(rule, userAgent, width, height)) {\n        matched = true;\n        break;\n      }\n    }\n    if (!matched) continue;\n    var xdpi = device.dpi[0] || device.dpi;\n    var ydpi = device.dpi[1] || device.dpi;\n    return new DeviceParams({ xdpi: xdpi, ydpi: ydpi, bevelMm: device.bw });\n  }\n  console.warn('No DPDB device match.');\n  return null;\n};\nDpdb.prototype.ruleMatches_ = function (rule, ua, screenWidth, screenHeight) {\n  if (!rule.ua && !rule.res) return false;\n  if (rule.ua && rule.ua.substring(0, 2) === 'SM') rule.ua = rule.ua.substring(0, 7);\n  if (rule.ua && ua.indexOf(rule.ua) < 0) return false;\n  if (rule.res) {\n    if (!rule.res[0] || !rule.res[1]) return false;\n    var resX = rule.res[0];\n    var resY = rule.res[1];\n    if (Math.min(screenWidth, screenHeight) != Math.min(resX, resY) || Math.max(screenWidth, screenHeight) != Math.max(resX, resY)) {\n      return false;\n    }\n  }\n  return true;\n};\nfunction DeviceParams(params) {\n  this.xdpi = params.xdpi;\n  this.ydpi = params.ydpi;\n  this.bevelMm = params.bevelMm;\n}\nfunction SensorSample(sample, timestampS) {\n  this.set(sample, timestampS);\n}\nSensorSample.prototype.set = function (sample, timestampS) {\n  this.sample = sample;\n  this.timestampS = timestampS;\n};\nSensorSample.prototype.copy = function (sensorSample) {\n  this.set(sensorSample.sample, sensorSample.timestampS);\n};\nfunction ComplementaryFilter(kFilter, isDebug) {\n  this.kFilter = kFilter;\n  this.isDebug = isDebug;\n  this.currentAccelMeasurement = new SensorSample();\n  this.currentGyroMeasurement = new SensorSample();\n  this.previousGyroMeasurement = new SensorSample();\n  if (isIOS()) {\n    this.filterQ = new Quaternion(-1, 0, 0, 1);\n  } else {\n    this.filterQ = new Quaternion(1, 0, 0, 1);\n  }\n  this.previousFilterQ = new Quaternion();\n  this.previousFilterQ.copy(this.filterQ);\n  this.accelQ = new Quaternion();\n  this.isOrientationInitialized = false;\n  this.estimatedGravity = new Vector3();\n  this.measuredGravity = new Vector3();\n  this.gyroIntegralQ = new Quaternion();\n}\nComplementaryFilter.prototype.addAccelMeasurement = function (vector, timestampS) {\n  this.currentAccelMeasurement.set(vector, timestampS);\n};\nComplementaryFilter.prototype.addGyroMeasurement = function (vector, timestampS) {\n  this.currentGyroMeasurement.set(vector, timestampS);\n  var deltaT = timestampS - this.previousGyroMeasurement.timestampS;\n  if (isTimestampDeltaValid(deltaT)) {\n    this.run_();\n  }\n  this.previousGyroMeasurement.copy(this.currentGyroMeasurement);\n};\nComplementaryFilter.prototype.run_ = function () {\n  if (!this.isOrientationInitialized) {\n    this.accelQ = this.accelToQuaternion_(this.currentAccelMeasurement.sample);\n    this.previousFilterQ.copy(this.accelQ);\n    this.isOrientationInitialized = true;\n    return;\n  }\n  var deltaT = this.currentGyroMeasurement.timestampS - this.previousGyroMeasurement.timestampS;\n  var gyroDeltaQ = this.gyroToQuaternionDelta_(this.currentGyroMeasurement.sample, deltaT);\n  this.gyroIntegralQ.multiply(gyroDeltaQ);\n  this.filterQ.copy(this.previousFilterQ);\n  this.filterQ.multiply(gyroDeltaQ);\n  var invFilterQ = new Quaternion();\n  invFilterQ.copy(this.filterQ);\n  invFilterQ.inverse();\n  this.estimatedGravity.set(0, 0, -1);\n  this.estimatedGravity.applyQuaternion(invFilterQ);\n  this.estimatedGravity.normalize();\n  this.measuredGravity.copy(this.currentAccelMeasurement.sample);\n  this.measuredGravity.normalize();\n  var deltaQ = new Quaternion();\n  deltaQ.setFromUnitVectors(this.estimatedGravity, this.measuredGravity);\n  deltaQ.inverse();\n  if (this.isDebug) {\n    console.log('Delta: %d deg, G_est: (%s, %s, %s), G_meas: (%s, %s, %s)', radToDeg * getQuaternionAngle(deltaQ), this.estimatedGravity.x.toFixed(1), this.estimatedGravity.y.toFixed(1), this.estimatedGravity.z.toFixed(1), this.measuredGravity.x.toFixed(1), this.measuredGravity.y.toFixed(1), this.measuredGravity.z.toFixed(1));\n  }\n  var targetQ = new Quaternion();\n  targetQ.copy(this.filterQ);\n  targetQ.multiply(deltaQ);\n  this.filterQ.slerp(targetQ, 1 - this.kFilter);\n  this.previousFilterQ.copy(this.filterQ);\n};\nComplementaryFilter.prototype.getOrientation = function () {\n  return this.filterQ;\n};\nComplementaryFilter.prototype.accelToQuaternion_ = function (accel) {\n  var normAccel = new Vector3();\n  normAccel.copy(accel);\n  normAccel.normalize();\n  var quat = new Quaternion();\n  quat.setFromUnitVectors(new Vector3(0, 0, -1), normAccel);\n  quat.inverse();\n  return quat;\n};\nComplementaryFilter.prototype.gyroToQuaternionDelta_ = function (gyro, dt) {\n  var quat = new Quaternion();\n  var axis = new Vector3();\n  axis.copy(gyro);\n  axis.normalize();\n  quat.setFromAxisAngle(axis, gyro.length() * dt);\n  return quat;\n};\nfunction PosePredictor(predictionTimeS, isDebug) {\n  this.predictionTimeS = predictionTimeS;\n  this.isDebug = isDebug;\n  this.previousQ = new Quaternion();\n  this.previousTimestampS = null;\n  this.deltaQ = new Quaternion();\n  this.outQ = new Quaternion();\n}\nPosePredictor.prototype.getPrediction = function (currentQ, gyro, timestampS) {\n  if (!this.previousTimestampS) {\n    this.previousQ.copy(currentQ);\n    this.previousTimestampS = timestampS;\n    return currentQ;\n  }\n  var axis = new Vector3();\n  axis.copy(gyro);\n  axis.normalize();\n  var angularSpeed = gyro.length();\n  if (angularSpeed < degToRad * 20) {\n    if (this.isDebug) {\n      console.log('Moving slowly, at %s deg/s: no prediction', (radToDeg * angularSpeed).toFixed(1));\n    }\n    this.outQ.copy(currentQ);\n    this.previousQ.copy(currentQ);\n    return this.outQ;\n  }\n  var predictAngle = angularSpeed * this.predictionTimeS;\n  this.deltaQ.setFromAxisAngle(axis, predictAngle);\n  this.outQ.copy(this.previousQ);\n  this.outQ.multiply(this.deltaQ);\n  this.previousQ.copy(currentQ);\n  this.previousTimestampS = timestampS;\n  return this.outQ;\n};\nfunction FusionPoseSensor(kFilter, predictionTime, yawOnly, isDebug) {\n  this.yawOnly = yawOnly;\n  this.accelerometer = new Vector3();\n  this.gyroscope = new Vector3();\n  this.filter = new ComplementaryFilter(kFilter, isDebug);\n  this.posePredictor = new PosePredictor(predictionTime, isDebug);\n  this.isFirefoxAndroid = isFirefoxAndroid();\n  this.isIOS = isIOS();\n  var chromeVersion = getChromeVersion();\n  this.isDeviceMotionInRadians = !this.isIOS && chromeVersion && chromeVersion < 66;\n  this.isWithoutDeviceMotion = isChromeWithoutDeviceMotion();\n  this.filterToWorldQ = new Quaternion();\n  if (isIOS()) {\n    this.filterToWorldQ.setFromAxisAngle(new Vector3(1, 0, 0), Math.PI / 2);\n  } else {\n    this.filterToWorldQ.setFromAxisAngle(new Vector3(1, 0, 0), -Math.PI / 2);\n  }\n  this.inverseWorldToScreenQ = new Quaternion();\n  this.worldToScreenQ = new Quaternion();\n  this.originalPoseAdjustQ = new Quaternion();\n  this.originalPoseAdjustQ.setFromAxisAngle(new Vector3(0, 0, 1), -window.orientation * Math.PI / 180);\n  this.setScreenTransform_();\n  if (isLandscapeMode()) {\n    this.filterToWorldQ.multiply(this.inverseWorldToScreenQ);\n  }\n  this.resetQ = new Quaternion();\n  this.orientationOut_ = new Float32Array(4);\n  this.start();\n}\nFusionPoseSensor.prototype.getPosition = function () {\n  return null;\n};\nFusionPoseSensor.prototype.getOrientation = function () {\n  var orientation = void 0;\n  if (this.isWithoutDeviceMotion && this._deviceOrientationQ) {\n    this.deviceOrientationFixQ = this.deviceOrientationFixQ || function () {\n      var z = new Quaternion().setFromAxisAngle(new Vector3(0, 0, -1), 0);\n      var y = new Quaternion();\n      if (window.orientation === -90) {\n        y.setFromAxisAngle(new Vector3(0, 1, 0), Math.PI / -2);\n      } else {\n        y.setFromAxisAngle(new Vector3(0, 1, 0), Math.PI / 2);\n      }\n      return z.multiply(y);\n    }();\n    this.deviceOrientationFilterToWorldQ = this.deviceOrientationFilterToWorldQ || function () {\n      var q = new Quaternion();\n      q.setFromAxisAngle(new Vector3(1, 0, 0), -Math.PI / 2);\n      return q;\n    }();\n    orientation = this._deviceOrientationQ;\n    var out = new Quaternion();\n    out.copy(orientation);\n    out.multiply(this.deviceOrientationFilterToWorldQ);\n    out.multiply(this.resetQ);\n    out.multiply(this.worldToScreenQ);\n    out.multiplyQuaternions(this.deviceOrientationFixQ, out);\n    if (this.yawOnly) {\n      out.x = 0;\n      out.z = 0;\n      out.normalize();\n    }\n    this.orientationOut_[0] = out.x;\n    this.orientationOut_[1] = out.y;\n    this.orientationOut_[2] = out.z;\n    this.orientationOut_[3] = out.w;\n    return this.orientationOut_;\n  } else {\n    var filterOrientation = this.filter.getOrientation();\n    orientation = this.posePredictor.getPrediction(filterOrientation, this.gyroscope, this.previousTimestampS);\n  }\n  var out = new Quaternion();\n  out.copy(this.filterToWorldQ);\n  out.multiply(this.resetQ);\n  out.multiply(orientation);\n  out.multiply(this.worldToScreenQ);\n  if (this.yawOnly) {\n    out.x = 0;\n    out.z = 0;\n    out.normalize();\n  }\n  this.orientationOut_[0] = out.x;\n  this.orientationOut_[1] = out.y;\n  this.orientationOut_[2] = out.z;\n  this.orientationOut_[3] = out.w;\n  return this.orientationOut_;\n};\nFusionPoseSensor.prototype.resetPose = function () {\n  this.resetQ.copy(this.filter.getOrientation());\n  this.resetQ.x = 0;\n  this.resetQ.y = 0;\n  this.resetQ.z *= -1;\n  this.resetQ.normalize();\n  if (isLandscapeMode()) {\n    this.resetQ.multiply(this.inverseWorldToScreenQ);\n  }\n  this.resetQ.multiply(this.originalPoseAdjustQ);\n};\nFusionPoseSensor.prototype.onDeviceOrientation_ = function (e) {\n  this._deviceOrientationQ = this._deviceOrientationQ || new Quaternion();\n  var alpha = e.alpha,\n      beta = e.beta,\n      gamma = e.gamma;\n  alpha = (alpha || 0) * Math.PI / 180;\n  beta = (beta || 0) * Math.PI / 180;\n  gamma = (gamma || 0) * Math.PI / 180;\n  this._deviceOrientationQ.setFromEulerYXZ(beta, alpha, -gamma);\n};\nFusionPoseSensor.prototype.onDeviceMotion_ = function (deviceMotion) {\n  this.updateDeviceMotion_(deviceMotion);\n};\nFusionPoseSensor.prototype.updateDeviceMotion_ = function (deviceMotion) {\n  var accGravity = deviceMotion.accelerationIncludingGravity;\n  var rotRate = deviceMotion.rotationRate;\n  var timestampS = deviceMotion.timeStamp / 1000;\n  var deltaS = timestampS - this.previousTimestampS;\n  if (deltaS < 0) {\n    warnOnce('fusion-pose-sensor:invalid:non-monotonic', 'Invalid timestamps detected: non-monotonic timestamp from devicemotion');\n    this.previousTimestampS = timestampS;\n    return;\n  } else if (deltaS <= MIN_TIMESTEP || deltaS > MAX_TIMESTEP) {\n    warnOnce('fusion-pose-sensor:invalid:outside-threshold', 'Invalid timestamps detected: Timestamp from devicemotion outside expected range.');\n    this.previousTimestampS = timestampS;\n    return;\n  }\n  this.accelerometer.set(-accGravity.x, -accGravity.y, -accGravity.z);\n  if (isR7()) {\n    this.gyroscope.set(-rotRate.beta, rotRate.alpha, rotRate.gamma);\n  } else {\n    this.gyroscope.set(rotRate.alpha, rotRate.beta, rotRate.gamma);\n  }\n  if (!this.isDeviceMotionInRadians) {\n    this.gyroscope.multiplyScalar(Math.PI / 180);\n  }\n  this.filter.addAccelMeasurement(this.accelerometer, timestampS);\n  this.filter.addGyroMeasurement(this.gyroscope, timestampS);\n  this.previousTimestampS = timestampS;\n};\nFusionPoseSensor.prototype.onOrientationChange_ = function (screenOrientation) {\n  this.setScreenTransform_();\n};\nFusionPoseSensor.prototype.onMessage_ = function (event) {\n  var message = event.data;\n  if (!message || !message.type) {\n    return;\n  }\n  var type = message.type.toLowerCase();\n  if (type !== 'devicemotion') {\n    return;\n  }\n  this.updateDeviceMotion_(message.deviceMotionEvent);\n};\nFusionPoseSensor.prototype.setScreenTransform_ = function () {\n  this.worldToScreenQ.set(0, 0, 0, 1);\n  switch (window.orientation) {\n    case 0:\n      break;\n    case 90:\n      this.worldToScreenQ.setFromAxisAngle(new Vector3(0, 0, 1), -Math.PI / 2);\n      break;\n    case -90:\n      this.worldToScreenQ.setFromAxisAngle(new Vector3(0, 0, 1), Math.PI / 2);\n      break;\n    case 180:\n      break;\n  }\n  this.inverseWorldToScreenQ.copy(this.worldToScreenQ);\n  this.inverseWorldToScreenQ.inverse();\n};\nFusionPoseSensor.prototype.start = function () {\n  this.onDeviceMotionCallback_ = this.onDeviceMotion_.bind(this);\n  this.onOrientationChangeCallback_ = this.onOrientationChange_.bind(this);\n  this.onMessageCallback_ = this.onMessage_.bind(this);\n  this.onDeviceOrientationCallback_ = this.onDeviceOrientation_.bind(this);\n  if (isIOS() && isInsideCrossOriginIFrame()) {\n    window.addEventListener('message', this.onMessageCallback_);\n  }\n  window.addEventListener('orientationchange', this.onOrientationChangeCallback_);\n  if (this.isWithoutDeviceMotion) {\n    window.addEventListener('deviceorientation', this.onDeviceOrientationCallback_);\n  } else {\n    window.addEventListener('devicemotion', this.onDeviceMotionCallback_);\n  }\n};\nFusionPoseSensor.prototype.stop = function () {\n  window.removeEventListener('devicemotion', this.onDeviceMotionCallback_);\n  window.removeEventListener('deviceorientation', this.onDeviceOrientationCallback_);\n  window.removeEventListener('orientationchange', this.onOrientationChangeCallback_);\n  window.removeEventListener('message', this.onMessageCallback_);\n};\nvar SENSOR_FREQUENCY = 60;\nvar X_AXIS = new Vector3(1, 0, 0);\nvar Z_AXIS = new Vector3(0, 0, 1);\nvar SENSOR_TO_VR = new Quaternion();\nSENSOR_TO_VR.setFromAxisAngle(X_AXIS, -Math.PI / 2);\nSENSOR_TO_VR.multiply(new Quaternion().setFromAxisAngle(Z_AXIS, Math.PI / 2));\nvar PoseSensor = function () {\n  function PoseSensor(config) {\n    classCallCheck(this, PoseSensor);\n    this.config = config;\n    this.sensor = null;\n    this.fusionSensor = null;\n    this._out = new Float32Array(4);\n    this.api = null;\n    this.errors = [];\n    this._sensorQ = new Quaternion();\n    this._outQ = new Quaternion();\n    this._onSensorRead = this._onSensorRead.bind(this);\n    this._onSensorError = this._onSensorError.bind(this);\n    this.init();\n  }\n  createClass(PoseSensor, [{\n    key: 'init',\n    value: function init() {\n      var sensor = null;\n      try {\n        sensor = new RelativeOrientationSensor({\n          frequency: SENSOR_FREQUENCY,\n          referenceFrame: 'screen'\n        });\n        sensor.addEventListener('error', this._onSensorError);\n      } catch (error) {\n        this.errors.push(error);\n        if (error.name === 'SecurityError') {\n          console.error('Cannot construct sensors due to the Feature Policy');\n          console.warn('Attempting to fall back using \"devicemotion\"; however this will ' + 'fail in the future without correct permissions.');\n          this.useDeviceMotion();\n        } else if (error.name === 'ReferenceError') {\n          this.useDeviceMotion();\n        } else {\n          console.error(error);\n        }\n      }\n      if (sensor) {\n        this.api = 'sensor';\n        this.sensor = sensor;\n        this.sensor.addEventListener('reading', this._onSensorRead);\n        this.sensor.start();\n      }\n    }\n  }, {\n    key: 'useDeviceMotion',\n    value: function useDeviceMotion() {\n      this.api = 'devicemotion';\n      this.fusionSensor = new FusionPoseSensor(this.config.K_FILTER, this.config.PREDICTION_TIME_S, this.config.YAW_ONLY, this.config.DEBUG);\n      if (this.sensor) {\n        this.sensor.removeEventListener('reading', this._onSensorRead);\n        this.sensor.removeEventListener('error', this._onSensorError);\n        this.sensor = null;\n      }\n    }\n  }, {\n    key: 'getOrientation',\n    value: function getOrientation() {\n      if (this.fusionSensor) {\n        return this.fusionSensor.getOrientation();\n      }\n      if (!this.sensor || !this.sensor.quaternion) {\n        this._out[0] = this._out[1] = this._out[2] = 0;\n        this._out[3] = 1;\n        return this._out;\n      }\n      var q = this.sensor.quaternion;\n      this._sensorQ.set(q[0], q[1], q[2], q[3]);\n      var out = this._outQ;\n      out.copy(SENSOR_TO_VR);\n      out.multiply(this._sensorQ);\n      if (this.config.YAW_ONLY) {\n        out.x = out.z = 0;\n        out.normalize();\n      }\n      this._out[0] = out.x;\n      this._out[1] = out.y;\n      this._out[2] = out.z;\n      this._out[3] = out.w;\n      return this._out;\n    }\n  }, {\n    key: '_onSensorError',\n    value: function _onSensorError(event) {\n      this.errors.push(event.error);\n      if (event.error.name === 'NotAllowedError') {\n        console.error('Permission to access sensor was denied');\n      } else if (event.error.name === 'NotReadableError') {\n        console.error('Sensor could not be read');\n      } else {\n        console.error(event.error);\n      }\n      this.useDeviceMotion();\n    }\n  }, {\n    key: '_onSensorRead',\n    value: function _onSensorRead() {}\n  }]);\n  return PoseSensor;\n}();\nvar rotateInstructionsAsset = \"<svg width='198' height='240' viewBox='0 0 198 240' xmlns='http://www.w3.org/2000/svg'><g fill='none' fill-rule='evenodd'><path d='M149.625 109.527l6.737 3.891v.886c0 .177.013.36.038.549.01.081.02.162.027.242.14 1.415.974 2.998 2.105 3.999l5.72 5.062.081-.09s4.382-2.53 5.235-3.024l25.97 14.993v54.001c0 .771-.386 1.217-.948 1.217-.233 0-.495-.076-.772-.236l-23.967-13.838-.014.024-27.322 15.775-.85-1.323c-4.731-1.529-9.748-2.74-14.951-3.61a.27.27 0 0 0-.007.024l-5.067 16.961-7.891 4.556-.037-.063v27.59c0 .772-.386 1.217-.948 1.217-.232 0-.495-.076-.772-.236l-42.473-24.522c-.95-.549-1.72-1.877-1.72-2.967v-1.035l-.021.047a5.111 5.111 0 0 0-1.816-.399 5.682 5.682 0 0 0-.546.001 13.724 13.724 0 0 1-1.918-.041c-1.655-.153-3.2-.6-4.404-1.296l-46.576-26.89.005.012-10.278-18.75c-1.001-1.827-.241-4.216 1.698-5.336l56.011-32.345a4.194 4.194 0 0 1 2.099-.572c1.326 0 2.572.659 3.227 1.853l.005-.003.227.413-.006.004a9.63 9.63 0 0 0 1.477 2.018l.277.27c1.914 1.85 4.468 2.801 7.113 2.801 1.949 0 3.948-.517 5.775-1.572.013 0 7.319-4.219 7.319-4.219a4.194 4.194 0 0 1 2.099-.572c1.326 0 2.572.658 3.226 1.853l3.25 5.928.022-.018 6.785 3.917-.105-.182 46.881-26.965m0-1.635c-.282 0-.563.073-.815.218l-46.169 26.556-5.41-3.124-3.005-5.481c-.913-1.667-2.699-2.702-4.66-2.703-1.011 0-2.02.274-2.917.792a3825 3825 0 0 1-7.275 4.195l-.044.024a9.937 9.937 0 0 1-4.957 1.353c-2.292 0-4.414-.832-5.976-2.342l-.252-.245a7.992 7.992 0 0 1-1.139-1.534 1.379 1.379 0 0 0-.06-.122l-.227-.414a1.718 1.718 0 0 0-.095-.154c-.938-1.574-2.673-2.545-4.571-2.545-1.011 0-2.02.274-2.917.792L3.125 155.502c-2.699 1.559-3.738 4.94-2.314 7.538l10.278 18.75c.177.323.448.563.761.704l46.426 26.804c1.403.81 3.157 1.332 5.072 1.508a15.661 15.661 0 0 0 2.146.046 4.766 4.766 0 0 1 .396 0c.096.004.19.011.283.022.109 1.593 1.159 3.323 2.529 4.114l42.472 24.522c.524.302 1.058.455 1.59.455 1.497 0 2.583-1.2 2.583-2.852v-26.562l7.111-4.105a1.64 1.64 0 0 0 .749-.948l4.658-15.593c4.414.797 8.692 1.848 12.742 3.128l.533.829a1.634 1.634 0 0 0 2.193.531l26.532-15.317L193 192.433c.523.302 1.058.455 1.59.455 1.497 0 2.583-1.199 2.583-2.852v-54.001c0-.584-.312-1.124-.818-1.416l-25.97-14.993a1.633 1.633 0 0 0-1.636.001c-.606.351-2.993 1.73-4.325 2.498l-4.809-4.255c-.819-.725-1.461-1.933-1.561-2.936a7.776 7.776 0 0 0-.033-.294 2.487 2.487 0 0 1-.023-.336v-.886c0-.584-.312-1.123-.817-1.416l-6.739-3.891a1.633 1.633 0 0 0-.817-.219' fill='#455A64'/><path d='M96.027 132.636l46.576 26.891c1.204.695 1.979 1.587 2.242 2.541l-.01.007-81.374 46.982h-.001c-1.654-.152-3.199-.6-4.403-1.295l-46.576-26.891 83.546-48.235' fill='#FAFAFA'/><path d='M63.461 209.174c-.008 0-.015 0-.022-.002-1.693-.156-3.228-.609-4.441-1.309l-46.576-26.89a.118.118 0 0 1 0-.203l83.546-48.235a.117.117 0 0 1 .117 0l46.576 26.891c1.227.708 2.021 1.612 2.296 2.611a.116.116 0 0 1-.042.124l-.021.016-81.375 46.981a.11.11 0 0 1-.058.016zm-50.747-28.303l46.401 26.79c1.178.68 2.671 1.121 4.32 1.276l81.272-46.922c-.279-.907-1.025-1.73-2.163-2.387l-46.517-26.857-83.313 48.1z' fill='#607D8B'/><path d='M148.327 165.471a5.85 5.85 0 0 1-.546.001c-1.894-.083-3.302-1.038-3.145-2.132a2.693 2.693 0 0 0-.072-1.105l-81.103 46.822c.628.058 1.272.073 1.918.042.182-.009.364-.009.546-.001 1.894.083 3.302 1.038 3.145 2.132l79.257-45.759' fill='#FFF'/><path d='M69.07 211.347a.118.118 0 0 1-.115-.134c.045-.317-.057-.637-.297-.925-.505-.61-1.555-1.022-2.738-1.074a5.966 5.966 0 0 0-.535.001 14.03 14.03 0 0 1-1.935-.041.117.117 0 0 1-.103-.092.116.116 0 0 1 .055-.126l81.104-46.822a.117.117 0 0 1 .171.07c.104.381.129.768.074 1.153-.045.316.057.637.296.925.506.61 1.555 1.021 2.739 1.073.178.008.357.008.535-.001a.117.117 0 0 1 .064.218l-79.256 45.759a.114.114 0 0 1-.059.016zm-3.405-2.372c.089 0 .177.002.265.006 1.266.056 2.353.488 2.908 1.158.227.274.35.575.36.882l78.685-45.429c-.036 0-.072-.001-.107-.003-1.267-.056-2.354-.489-2.909-1.158-.282-.34-.402-.724-.347-1.107a2.604 2.604 0 0 0-.032-.91L63.846 208.97a13.91 13.91 0 0 0 1.528.012c.097-.005.194-.007.291-.007z' fill='#607D8B'/><path d='M2.208 162.134c-1.001-1.827-.241-4.217 1.698-5.337l56.011-32.344c1.939-1.12 4.324-.546 5.326 1.281l.232.41a9.344 9.344 0 0 0 1.47 2.021l.278.27c3.325 3.214 8.583 3.716 12.888 1.23l7.319-4.22c1.94-1.119 4.324-.546 5.325 1.282l3.25 5.928-83.519 48.229-10.278-18.75z' fill='#FAFAFA'/><path d='M12.486 181.001a.112.112 0 0 1-.031-.005.114.114 0 0 1-.071-.056L2.106 162.19c-1.031-1.88-.249-4.345 1.742-5.494l56.01-32.344a4.328 4.328 0 0 1 2.158-.588c1.415 0 2.65.702 3.311 1.882.01.008.018.017.024.028l.227.414a.122.122 0 0 1 .013.038 9.508 9.508 0 0 0 1.439 1.959l.275.266c1.846 1.786 4.344 2.769 7.031 2.769 1.977 0 3.954-.538 5.717-1.557a.148.148 0 0 1 .035-.013l7.284-4.206a4.321 4.321 0 0 1 2.157-.588c1.427 0 2.672.716 3.329 1.914l3.249 5.929a.116.116 0 0 1-.044.157l-83.518 48.229a.116.116 0 0 1-.059.016zm49.53-57.004c-.704 0-1.41.193-2.041.557l-56.01 32.345c-1.882 1.086-2.624 3.409-1.655 5.179l10.221 18.645 83.317-48.112-3.195-5.829c-.615-1.122-1.783-1.792-3.124-1.792a4.08 4.08 0 0 0-2.04.557l-7.317 4.225a.148.148 0 0 1-.035.013 11.7 11.7 0 0 1-5.801 1.569c-2.748 0-5.303-1.007-7.194-2.835l-.278-.27a9.716 9.716 0 0 1-1.497-2.046.096.096 0 0 1-.013-.037l-.191-.347a.11.11 0 0 1-.023-.029c-.615-1.123-1.783-1.793-3.124-1.793z' fill='#607D8B'/><path d='M42.434 155.808c-2.51-.001-4.697-1.258-5.852-3.365-1.811-3.304-.438-7.634 3.059-9.654l12.291-7.098a7.599 7.599 0 0 1 3.789-1.033c2.51 0 4.697 1.258 5.852 3.365 1.811 3.304.439 7.634-3.059 9.654l-12.291 7.098a7.606 7.606 0 0 1-3.789 1.033zm13.287-20.683a7.128 7.128 0 0 0-3.555.971l-12.291 7.098c-3.279 1.893-4.573 5.942-2.883 9.024 1.071 1.955 3.106 3.122 5.442 3.122a7.13 7.13 0 0 0 3.556-.97l12.291-7.098c3.279-1.893 4.572-5.942 2.883-9.024-1.072-1.955-3.106-3.123-5.443-3.123z' fill='#607D8B'/><path d='M149.588 109.407l6.737 3.89v.887c0 .176.013.36.037.549.011.081.02.161.028.242.14 1.415.973 2.998 2.105 3.999l7.396 6.545c.177.156.358.295.541.415 1.579 1.04 2.95.466 3.062-1.282.049-.784.057-1.595.023-2.429l-.003-.16v-1.151l25.987 15.003v54c0 1.09-.77 1.53-1.72.982l-42.473-24.523c-.95-.548-1.72-1.877-1.72-2.966v-34.033' fill='#FAFAFA'/><path d='M194.553 191.25c-.257 0-.54-.085-.831-.253l-42.472-24.521c-.981-.567-1.779-1.943-1.779-3.068v-34.033h.234v34.033c0 1.051.745 2.336 1.661 2.866l42.473 24.521c.424.245.816.288 1.103.122.285-.164.442-.52.442-1.002v-53.933l-25.753-14.868.003 1.106c.034.832.026 1.654-.024 2.439-.054.844-.396 1.464-.963 1.746-.619.309-1.45.173-2.28-.373a5.023 5.023 0 0 1-.553-.426l-7.397-6.544c-1.158-1.026-1.999-2.625-2.143-4.076a9.624 9.624 0 0 0-.027-.238 4.241 4.241 0 0 1-.038-.564v-.82l-6.68-3.856.117-.202 6.738 3.89.058.034v.954c0 .171.012.351.036.533.011.083.021.165.029.246.138 1.395.948 2.935 2.065 3.923l7.397 6.545c.173.153.35.289.527.406.758.499 1.504.63 2.047.359.49-.243.786-.795.834-1.551.05-.778.057-1.591.024-2.417l-.004-.163v-1.355l.175.1 25.987 15.004.059.033v54.068c0 .569-.198.996-.559 1.204a1.002 1.002 0 0 1-.506.131' fill='#607D8B'/><path d='M145.685 163.161l24.115 13.922-25.978 14.998-1.462-.307c-6.534-2.17-13.628-3.728-21.019-4.616-4.365-.524-8.663 1.096-9.598 3.62a2.746 2.746 0 0 0-.011 1.928c1.538 4.267 4.236 8.363 7.995 12.135l.532.845-25.977 14.997-24.115-13.922 75.518-43.6' fill='#FFF'/><path d='M94.282 220.818l-.059-.033-24.29-14.024.175-.101 75.577-43.634.058.033 24.29 14.024-26.191 15.122-.045-.01-1.461-.307c-6.549-2.174-13.613-3.725-21.009-4.614a13.744 13.744 0 0 0-1.638-.097c-3.758 0-7.054 1.531-7.837 3.642a2.62 2.62 0 0 0-.01 1.848c1.535 4.258 4.216 8.326 7.968 12.091l.016.021.526.835.006.01.064.102-.105.061-25.977 14.998-.058.033zm-23.881-14.057l23.881 13.788 24.802-14.32c.546-.315.846-.489 1.017-.575l-.466-.74c-3.771-3.787-6.467-7.881-8.013-12.168a2.851 2.851 0 0 1 .011-2.008c.815-2.199 4.203-3.795 8.056-3.795.557 0 1.117.033 1.666.099 7.412.891 14.491 2.445 21.041 4.621.836.175 1.215.254 1.39.304l25.78-14.884-23.881-13.788-75.284 43.466z' fill='#607D8B'/><path d='M167.23 125.979v50.871l-27.321 15.773-6.461-14.167c-.91-1.996-3.428-1.738-5.624.574a10.238 10.238 0 0 0-2.33 4.018l-6.46 21.628-27.322 15.774v-50.871l75.518-43.6' fill='#FFF'/><path d='M91.712 220.567a.127.127 0 0 1-.059-.016.118.118 0 0 1-.058-.101v-50.871c0-.042.023-.08.058-.101l75.519-43.6a.117.117 0 0 1 .175.101v50.871c0 .041-.023.08-.059.1l-27.321 15.775a.118.118 0 0 1-.094.01.12.12 0 0 1-.071-.063l-6.46-14.168c-.375-.822-1.062-1.275-1.934-1.275-1.089 0-2.364.686-3.5 1.881a10.206 10.206 0 0 0-2.302 3.972l-6.46 21.627a.118.118 0 0 1-.054.068L91.77 220.551a.12.12 0 0 1-.058.016zm.117-50.92v50.601l27.106-15.65 6.447-21.583a10.286 10.286 0 0 1 2.357-4.065c1.18-1.242 2.517-1.954 3.669-1.954.969 0 1.731.501 2.146 1.411l6.407 14.051 27.152-15.676v-50.601l-75.284 43.466z' fill='#607D8B'/><path d='M168.543 126.213v50.87l-27.322 15.774-6.46-14.168c-.91-1.995-3.428-1.738-5.624.574a10.248 10.248 0 0 0-2.33 4.019l-6.461 21.627-27.321 15.774v-50.87l75.518-43.6' fill='#FFF'/><path d='M93.025 220.8a.123.123 0 0 1-.059-.015.12.12 0 0 1-.058-.101v-50.871c0-.042.023-.08.058-.101l75.518-43.6a.112.112 0 0 1 .117 0c.036.02.059.059.059.1v50.871a.116.116 0 0 1-.059.101l-27.321 15.774a.111.111 0 0 1-.094.01.115.115 0 0 1-.071-.062l-6.46-14.168c-.375-.823-1.062-1.275-1.935-1.275-1.088 0-2.363.685-3.499 1.881a10.19 10.19 0 0 0-2.302 3.971l-6.461 21.628a.108.108 0 0 1-.053.067l-27.322 15.775a.12.12 0 0 1-.058.015zm.117-50.919v50.6l27.106-15.649 6.447-21.584a10.293 10.293 0 0 1 2.357-4.065c1.179-1.241 2.516-1.954 3.668-1.954.969 0 1.732.502 2.147 1.412l6.407 14.051 27.152-15.676v-50.601l-75.284 43.466z' fill='#607D8B'/><path d='M169.8 177.083l-27.322 15.774-6.46-14.168c-.91-1.995-3.428-1.738-5.625.574a10.246 10.246 0 0 0-2.329 4.019l-6.461 21.627-27.321 15.774v-50.87l75.518-43.6v50.87z' fill='#FAFAFA'/><path d='M94.282 220.917a.234.234 0 0 1-.234-.233v-50.871c0-.083.045-.161.117-.202l75.518-43.601a.234.234 0 1 1 .35.202v50.871a.233.233 0 0 1-.116.202l-27.322 15.775a.232.232 0 0 1-.329-.106l-6.461-14.168c-.36-.789-.992-1.206-1.828-1.206-1.056 0-2.301.672-3.415 1.844a10.099 10.099 0 0 0-2.275 3.924l-6.46 21.628a.235.235 0 0 1-.107.136l-27.322 15.774a.23.23 0 0 1-.116.031zm.233-50.969v50.331l26.891-15.525 6.434-21.539a10.41 10.41 0 0 1 2.384-4.112c1.201-1.265 2.569-1.991 3.753-1.991 1.018 0 1.818.526 2.253 1.48l6.354 13.934 26.982-15.578v-50.331l-75.051 43.331z' fill='#607D8B'/><path d='M109.894 199.943c-1.774 0-3.241-.725-4.244-2.12a.224.224 0 0 1 .023-.294.233.233 0 0 1 .301-.023c.78.547 1.705.827 2.75.827 1.323 0 2.754-.439 4.256-1.306 5.311-3.067 9.631-10.518 9.631-16.611 0-1.927-.442-3.56-1.278-4.724a.232.232 0 0 1 .323-.327c1.671 1.172 2.591 3.381 2.591 6.219 0 6.242-4.426 13.863-9.865 17.003-1.574.908-3.084 1.356-4.488 1.356zm-2.969-1.542c.813.651 1.82.877 2.968.877h.001c1.321 0 2.753-.327 4.254-1.194 5.311-3.067 9.632-10.463 9.632-16.556 0-1.979-.463-3.599-1.326-4.761.411 1.035.625 2.275.625 3.635 0 6.243-4.426 13.883-9.865 17.023-1.574.909-3.084 1.317-4.49 1.317-.641 0-1.243-.149-1.799-.341z' fill='#607D8B'/><path d='M113.097 197.23c5.384-3.108 9.748-10.636 9.748-16.814 0-2.051-.483-3.692-1.323-4.86-1.784-1.252-4.374-1.194-7.257.47-5.384 3.108-9.748 10.636-9.748 16.814 0 2.051.483 3.692 1.323 4.86 1.784 1.252 4.374 1.194 7.257-.47' fill='#FAFAFA'/><path d='M108.724 198.614c-1.142 0-2.158-.213-3.019-.817-.021-.014-.04.014-.055-.007-.894-1.244-1.367-2.948-1.367-4.973 0-6.242 4.426-13.864 9.865-17.005 1.574-.908 3.084-1.363 4.49-1.363 1.142 0 2.158.309 3.018.913a.23.23 0 0 1 .056.056c.894 1.244 1.367 2.972 1.367 4.997 0 6.243-4.426 13.783-9.865 16.923-1.574.909-3.084 1.276-4.49 1.276zm-2.718-1.109c.774.532 1.688.776 2.718.776 1.323 0 2.754-.413 4.256-1.28 5.311-3.066 9.631-10.505 9.631-16.598 0-1.909-.434-3.523-1.255-4.685-.774-.533-1.688-.799-2.718-.799-1.323 0-2.755.441-4.256 1.308-5.311 3.066-9.631 10.506-9.631 16.599 0 1.909.434 3.517 1.255 4.679z' fill='#607D8B'/><path d='M149.318 114.262l-9.984 8.878 15.893 11.031 5.589-6.112-11.498-13.797' fill='#FAFAFA'/><path d='M169.676 120.84l-9.748 5.627c-3.642 2.103-9.528 2.113-13.147.024-3.62-2.089-3.601-5.488.041-7.591l9.495-5.608-6.729-3.885-81.836 47.071 45.923 26.514 3.081-1.779c.631-.365.869-.898.618-1.39-2.357-4.632-2.593-9.546-.683-14.262 5.638-13.92 24.509-24.815 48.618-28.07 8.169-1.103 16.68-.967 24.704.394.852.145 1.776.008 2.407-.357l3.081-1.778-25.825-14.91' fill='#FAFAFA'/><path d='M113.675 183.459a.47.47 0 0 1-.233-.062l-45.924-26.515a.468.468 0 0 1 .001-.809l81.836-47.071a.467.467 0 0 1 .466 0l6.729 3.885a.467.467 0 0 1-.467.809l-6.496-3.75-80.9 46.533 44.988 25.973 2.848-1.644c.192-.111.62-.409.435-.773-2.416-4.748-2.658-9.814-.7-14.65 2.806-6.927 8.885-13.242 17.582-18.263 8.657-4.998 19.518-8.489 31.407-10.094 8.198-1.107 16.79-.97 24.844.397.739.125 1.561.007 2.095-.301l2.381-1.374-25.125-14.506a.467.467 0 0 1 .467-.809l25.825 14.91a.467.467 0 0 1 0 .809l-3.081 1.779c-.721.417-1.763.575-2.718.413-7.963-1.351-16.457-1.486-24.563-.392-11.77 1.589-22.512 5.039-31.065 9.977-8.514 4.916-14.456 11.073-17.183 17.805-1.854 4.578-1.623 9.376.666 13.875.37.725.055 1.513-.8 2.006l-3.081 1.78a.476.476 0 0 1-.234.062' fill='#455A64'/><path d='M153.316 128.279c-2.413 0-4.821-.528-6.652-1.586-1.818-1.049-2.82-2.461-2.82-3.975 0-1.527 1.016-2.955 2.861-4.02l9.493-5.607a.233.233 0 1 1 .238.402l-9.496 5.609c-1.696.979-2.628 2.263-2.628 3.616 0 1.34.918 2.608 2.585 3.571 3.549 2.049 9.343 2.038 12.914-.024l9.748-5.628a.234.234 0 0 1 .234.405l-9.748 5.628c-1.858 1.072-4.296 1.609-6.729 1.609' fill='#607D8B'/><path d='M113.675 182.992l-45.913-26.508M113.675 183.342a.346.346 0 0 1-.175-.047l-45.913-26.508a.35.35 0 1 1 .35-.607l45.913 26.508a.35.35 0 0 1-.175.654' fill='#455A64'/><path d='M67.762 156.484v54.001c0 1.09.77 2.418 1.72 2.967l42.473 24.521c.95.549 1.72.11 1.72-.98v-54.001' fill='#FAFAFA'/><path d='M112.727 238.561c-.297 0-.62-.095-.947-.285l-42.473-24.521c-1.063-.613-1.895-2.05-1.895-3.27v-54.001a.35.35 0 1 1 .701 0v54.001c0 .96.707 2.18 1.544 2.663l42.473 24.522c.344.198.661.243.87.122.206-.119.325-.411.325-.799v-54.001a.35.35 0 1 1 .7 0v54.001c0 .655-.239 1.154-.675 1.406a1.235 1.235 0 0 1-.623.162' fill='#455A64'/><path d='M112.86 147.512h-.001c-2.318 0-4.499-.522-6.142-1.471-1.705-.984-2.643-2.315-2.643-3.749 0-1.445.952-2.791 2.68-3.788l12.041-6.953c1.668-.962 3.874-1.493 6.212-1.493 2.318 0 4.499.523 6.143 1.472 1.704.984 2.643 2.315 2.643 3.748 0 1.446-.952 2.791-2.68 3.789l-12.042 6.952c-1.668.963-3.874 1.493-6.211 1.493zm12.147-16.753c-2.217 0-4.298.497-5.861 1.399l-12.042 6.952c-1.502.868-2.33 1.998-2.33 3.182 0 1.173.815 2.289 2.293 3.142 1.538.889 3.596 1.378 5.792 1.378h.001c2.216 0 4.298-.497 5.861-1.399l12.041-6.953c1.502-.867 2.33-1.997 2.33-3.182 0-1.172-.814-2.288-2.292-3.142-1.539-.888-3.596-1.377-5.793-1.377z' fill='#607D8B'/><path d='M165.63 123.219l-5.734 3.311c-3.167 1.828-8.286 1.837-11.433.02-3.147-1.817-3.131-4.772.036-6.601l5.734-3.31 11.397 6.58' fill='#FAFAFA'/><path d='M154.233 117.448l9.995 5.771-4.682 2.704c-1.434.827-3.352 1.283-5.399 1.283-2.029 0-3.923-.449-5.333-1.263-1.29-.744-2-1.694-2-2.674 0-.991.723-1.955 2.036-2.713l5.383-3.108m0-.809l-5.734 3.31c-3.167 1.829-3.183 4.784-.036 6.601 1.568.905 3.623 1.357 5.684 1.357 2.077 0 4.159-.46 5.749-1.377l5.734-3.311-11.397-6.58M145.445 179.667c-1.773 0-3.241-.85-4.243-2.245-.067-.092-.057-.275.023-.356.08-.081.207-.12.3-.055.781.548 1.706.812 2.751.811 1.322 0 2.754-.446 4.256-1.313 5.31-3.066 9.631-10.522 9.631-16.615 0-1.927-.442-3.562-1.279-4.726a.235.235 0 0 1 .024-.301.232.232 0 0 1 .3-.027c1.67 1.172 2.59 3.38 2.59 6.219 0 6.242-4.425 13.987-9.865 17.127-1.573.908-3.083 1.481-4.488 1.481zM142.476 178c.814.651 1.82 1.002 2.969 1.002 1.322 0 2.753-.452 4.255-1.32 5.31-3.065 9.631-10.523 9.631-16.617 0-1.98-.463-3.63-1.325-4.793.411 1.035.624 2.26.624 3.62 0 6.242-4.425 13.875-9.865 17.015-1.573.909-3.084 1.376-4.489 1.376a5.49 5.49 0 0 1-1.8-.283z' fill='#607D8B'/><path d='M148.648 176.704c5.384-3.108 9.748-10.636 9.748-16.813 0-2.052-.483-3.693-1.322-4.861-1.785-1.252-4.375-1.194-7.258.471-5.383 3.108-9.748 10.636-9.748 16.813 0 2.051.484 3.692 1.323 4.86 1.785 1.253 4.374 1.195 7.257-.47' fill='#FAFAFA'/><path d='M144.276 178.276c-1.143 0-2.158-.307-3.019-.911a.217.217 0 0 1-.055-.054c-.895-1.244-1.367-2.972-1.367-4.997 0-6.241 4.425-13.875 9.865-17.016 1.573-.908 3.084-1.369 4.489-1.369 1.143 0 2.158.307 3.019.91a.24.24 0 0 1 .055.055c.894 1.244 1.367 2.971 1.367 4.997 0 6.241-4.425 13.875-9.865 17.016-1.573.908-3.084 1.369-4.489 1.369zm-2.718-1.172c.773.533 1.687.901 2.718.901 1.322 0 2.754-.538 4.256-1.405 5.31-3.066 9.631-10.567 9.631-16.661 0-1.908-.434-3.554-1.256-4.716-.774-.532-1.688-.814-2.718-.814-1.322 0-2.754.433-4.256 1.3-5.31 3.066-9.631 10.564-9.631 16.657 0 1.91.434 3.576 1.256 4.738z' fill='#607D8B'/><path d='M150.72 172.361l-.363-.295a24.105 24.105 0 0 0 2.148-3.128 24.05 24.05 0 0 0 1.977-4.375l.443.149a24.54 24.54 0 0 1-2.015 4.46 24.61 24.61 0 0 1-2.19 3.189M115.917 191.514l-.363-.294a24.174 24.174 0 0 0 2.148-3.128 24.038 24.038 0 0 0 1.976-4.375l.443.148a24.48 24.48 0 0 1-2.015 4.461 24.662 24.662 0 0 1-2.189 3.188M114 237.476V182.584 237.476' fill='#607D8B'/><g><path d='M81.822 37.474c.017-.135-.075-.28-.267-.392-.327-.188-.826-.21-1.109-.045l-6.012 3.471c-.131.076-.194.178-.191.285.002.132.002.461.002.578v.043l-.007.128-6.591 3.779c-.001 0-2.077 1.046-2.787 5.192 0 0-.912 6.961-.898 19.745.015 12.57.606 17.07 1.167 21.351.22 1.684 3.001 2.125 3.001 2.125.331.04.698-.027 1.08-.248l75.273-43.551c1.808-1.069 2.667-3.719 3.056-6.284 1.213-7.99 1.675-32.978-.275-39.878-.196-.693-.51-1.083-.868-1.282l-2.086-.79c-.727.028-1.416.467-1.534.535L82.032 37.072l-.21.402' fill='#FFF'/><path d='M144.311 1.701l2.085.79c.358.199.672.589.868 1.282 1.949 6.9 1.487 31.887.275 39.878-.39 2.565-1.249 5.215-3.056 6.284L69.21 93.486a1.78 1.78 0 0 1-.896.258l-.183-.011c0 .001-2.782-.44-3.003-2.124-.56-4.282-1.151-8.781-1.165-21.351-.015-12.784.897-19.745.897-19.745.71-4.146 2.787-5.192 2.787-5.192l6.591-3.779.007-.128v-.043c0-.117 0-.446-.002-.578-.003-.107.059-.21.191-.285l6.012-3.472a.98.98 0 0 1 .481-.11c.218 0 .449.053.627.156.193.112.285.258.268.392l.211-.402 60.744-34.836c.117-.068.806-.507 1.534-.535m0-.997l-.039.001c-.618.023-1.283.244-1.974.656l-.021.012-60.519 34.706a2.358 2.358 0 0 0-.831-.15c-.365 0-.704.084-.98.244l-6.012 3.471c-.442.255-.699.69-.689 1.166l.001.15-6.08 3.487c-.373.199-2.542 1.531-3.29 5.898l-.006.039c-.009.07-.92 7.173-.906 19.875.014 12.62.603 17.116 1.172 21.465l.002.015c.308 2.355 3.475 2.923 3.836 2.98l.034.004c.101.013.204.019.305.019a2.77 2.77 0 0 0 1.396-.392l75.273-43.552c1.811-1.071 2.999-3.423 3.542-6.997 1.186-7.814 1.734-33.096-.301-40.299-.253-.893-.704-1.527-1.343-1.882l-.132-.062-2.085-.789a.973.973 0 0 0-.353-.065' fill='#455A64'/><path d='M128.267 11.565l1.495.434-56.339 32.326' fill='#FFF'/><path d='M74.202 90.545a.5.5 0 0 1-.25-.931l18.437-10.645a.499.499 0 1 1 .499.864L74.451 90.478l-.249.067M75.764 42.654l-.108-.062.046-.171 5.135-2.964.17.045-.045.171-5.135 2.964-.063.017M70.52 90.375V46.421l.063-.036L137.84 7.554v43.954l-.062.036L70.52 90.375zm.25-43.811v43.38l66.821-38.579V7.985L70.77 46.564z' fill='#607D8B'/><path d='M86.986 83.182c-.23.149-.612.384-.849.523l-11.505 6.701c-.237.139-.206.252.068.252h.565c.275 0 .693-.113.93-.252L87.7 83.705c.237-.139.428-.253.425-.256a11.29 11.29 0 0 1-.006-.503c0-.274-.188-.377-.418-.227l-.715.463' fill='#607D8B'/><path d='M75.266 90.782H74.7c-.2 0-.316-.056-.346-.166-.03-.11.043-.217.215-.317l11.505-6.702c.236-.138.615-.371.844-.519l.715-.464a.488.488 0 0 1 .266-.089c.172 0 .345.13.345.421 0 .214.001.363.003.437l.006.004-.004.069c-.003.075-.003.075-.486.356l-11.505 6.702a2.282 2.282 0 0 1-.992.268zm-.6-.25l.034.001h.566c.252 0 .649-.108.866-.234l11.505-6.702c.168-.098.294-.173.361-.214-.004-.084-.004-.218-.004-.437l-.095-.171-.131.049-.714.463c-.232.15-.616.386-.854.525l-11.505 6.702-.029.018z' fill='#607D8B'/><path d='M75.266 89.871H74.7c-.2 0-.316-.056-.346-.166-.03-.11.043-.217.215-.317l11.505-6.702c.258-.151.694-.268.993-.268h.565c.2 0 .316.056.346.166.03.11-.043.217-.215.317l-11.505 6.702a2.282 2.282 0 0 1-.992.268zm-.6-.25l.034.001h.566c.252 0 .649-.107.866-.234l11.505-6.702.03-.018-.035-.001h-.565c-.252 0-.649.108-.867.234l-11.505 6.702-.029.018zM74.37 90.801v-1.247 1.247' fill='#607D8B'/><path d='M68.13 93.901c-.751-.093-1.314-.737-1.439-1.376-.831-4.238-1.151-8.782-1.165-21.352-.015-12.784.897-19.745.897-19.745.711-4.146 2.787-5.192 2.787-5.192l74.859-43.219c.223-.129 2.487-1.584 3.195.923 1.95 6.9 1.488 31.887.275 39.878-.389 2.565-1.248 5.215-3.056 6.283L69.21 93.653c-.382.221-.749.288-1.08.248 0 0-2.781-.441-3.001-2.125-.561-4.281-1.152-8.781-1.167-21.351-.014-12.784.898-19.745.898-19.745.71-4.146 2.787-5.191 2.787-5.191l6.598-3.81.871-.119 6.599-3.83.046-.461L68.13 93.901' fill='#FAFAFA'/><path d='M68.317 94.161l-.215-.013h-.001l-.244-.047c-.719-.156-2.772-.736-2.976-2.292-.568-4.34-1.154-8.813-1.168-21.384-.014-12.654.891-19.707.9-19.777.725-4.231 2.832-5.338 2.922-5.382l6.628-3.827.87-.119 6.446-3.742.034-.334a.248.248 0 0 1 .273-.223.248.248 0 0 1 .223.272l-.059.589-6.752 3.919-.87.118-6.556 3.785c-.031.016-1.99 1.068-2.666 5.018-.007.06-.908 7.086-.894 19.702.014 12.539.597 16.996 1.161 21.305.091.691.689 1.154 1.309 1.452a1.95 1.95 0 0 1-.236-.609c-.781-3.984-1.155-8.202-1.17-21.399-.014-12.653.891-19.707.9-19.777.725-4.231 2.832-5.337 2.922-5.382-.004.001 74.444-42.98 74.846-43.212l.028-.017c.904-.538 1.72-.688 2.36-.433.555.221.949.733 1.172 1.52 2.014 7.128 1.46 32.219.281 39.983-.507 3.341-1.575 5.515-3.175 6.462L69.335 93.869a2.023 2.023 0 0 1-1.018.292zm-.147-.507c.293.036.604-.037.915-.217l75.273-43.551c1.823-1.078 2.602-3.915 2.934-6.106 1.174-7.731 1.731-32.695-.268-39.772-.178-.631-.473-1.032-.876-1.192-.484-.193-1.166-.052-1.921.397l-.034.021-74.858 43.218c-.031.017-1.989 1.069-2.666 5.019-.007.059-.908 7.085-.894 19.702.015 13.155.386 17.351 1.161 21.303.09.461.476.983 1.037 1.139.114.025.185.037.196.039h.001z' fill='#455A64'/><path d='M69.317 68.982c.489-.281.885-.056.885.505 0 .56-.396 1.243-.885 1.525-.488.282-.884.057-.884-.504 0-.56.396-1.243.884-1.526' fill='#FFF'/><path d='M68.92 71.133c-.289 0-.487-.228-.487-.625 0-.56.396-1.243.884-1.526a.812.812 0 0 1 .397-.121c.289 0 .488.229.488.626 0 .56-.396 1.243-.885 1.525a.812.812 0 0 1-.397.121m.794-2.459a.976.976 0 0 0-.49.147c-.548.317-.978 1.058-.978 1.687 0 .486.271.812.674.812a.985.985 0 0 0 .491-.146c.548-.317.978-1.057.978-1.687 0-.486-.272-.813-.675-.813' fill='#8097A2'/><path d='M68.92 70.947c-.271 0-.299-.307-.299-.439 0-.491.361-1.116.79-1.363a.632.632 0 0 1 .303-.096c.272 0 .301.306.301.438 0 .491-.363 1.116-.791 1.364a.629.629 0 0 1-.304.096m.794-2.086a.812.812 0 0 0-.397.121c-.488.283-.884.966-.884 1.526 0 .397.198.625.487.625a.812.812 0 0 0 .397-.121c.489-.282.885-.965.885-1.525 0-.397-.199-.626-.488-.626' fill='#8097A2'/><path d='M69.444 85.35c.264-.152.477-.031.477.272 0 .303-.213.67-.477.822-.263.153-.477.031-.477-.271 0-.302.214-.671.477-.823' fill='#FFF'/><path d='M69.23 86.51c-.156 0-.263-.123-.263-.337 0-.302.214-.671.477-.823a.431.431 0 0 1 .214-.066c.156 0 .263.124.263.338 0 .303-.213.67-.477.822a.431.431 0 0 1-.214.066m.428-1.412c-.1 0-.203.029-.307.09-.32.185-.57.618-.57.985 0 .309.185.524.449.524a.63.63 0 0 0 .308-.09c.32-.185.57-.618.57-.985 0-.309-.185-.524-.45-.524' fill='#8097A2'/><path d='M69.23 86.322l-.076-.149c0-.235.179-.544.384-.661l.12-.041.076.151c0 .234-.179.542-.383.66l-.121.04m.428-1.038a.431.431 0 0 0-.214.066c-.263.152-.477.521-.477.823 0 .214.107.337.263.337a.431.431 0 0 0 .214-.066c.264-.152.477-.519.477-.822 0-.214-.107-.338-.263-.338' fill='#8097A2'/><path d='M139.278 7.769v43.667L72.208 90.16V46.493l67.07-38.724' fill='#455A64'/><path d='M72.083 90.375V46.421l.063-.036 67.257-38.831v43.954l-.062.036-67.258 38.831zm.25-43.811v43.38l66.821-38.579V7.985L72.333 46.564z' fill='#607D8B'/></g><path d='M125.737 88.647l-7.639 3.334V84l-11.459 4.713v8.269L99 100.315l13.369 3.646 13.368-15.314' fill='#455A64'/></g></svg>\";\nfunction RotateInstructions() {\n  this.loadIcon_();\n  var overlay = document.createElement('div');\n  var s = overlay.style;\n  s.position = 'fixed';\n  s.top = 0;\n  s.right = 0;\n  s.bottom = 0;\n  s.left = 0;\n  s.backgroundColor = 'gray';\n  s.fontFamily = 'sans-serif';\n  s.zIndex = 1000000;\n  var img = document.createElement('img');\n  img.src = this.icon;\n  var s = img.style;\n  s.marginLeft = '25%';\n  s.marginTop = '25%';\n  s.width = '50%';\n  overlay.appendChild(img);\n  var text = document.createElement('div');\n  var s = text.style;\n  s.textAlign = 'center';\n  s.fontSize = '16px';\n  s.lineHeight = '24px';\n  s.margin = '24px 25%';\n  s.width = '50%';\n  text.innerHTML = 'Place your phone into your Cardboard viewer.';\n  overlay.appendChild(text);\n  var snackbar = document.createElement('div');\n  var s = snackbar.style;\n  s.backgroundColor = '#CFD8DC';\n  s.position = 'fixed';\n  s.bottom = 0;\n  s.width = '100%';\n  s.height = '48px';\n  s.padding = '14px 24px';\n  s.boxSizing = 'border-box';\n  s.color = '#656A6B';\n  overlay.appendChild(snackbar);\n  var snackbarText = document.createElement('div');\n  snackbarText.style.float = 'left';\n  snackbarText.innerHTML = 'No Cardboard viewer?';\n  var snackbarButton = document.createElement('a');\n  snackbarButton.href = 'https://www.google.com/get/cardboard/get-cardboard/';\n  snackbarButton.innerHTML = 'get one';\n  snackbarButton.target = '_blank';\n  var s = snackbarButton.style;\n  s.float = 'right';\n  s.fontWeight = 600;\n  s.textTransform = 'uppercase';\n  s.borderLeft = '1px solid gray';\n  s.paddingLeft = '24px';\n  s.textDecoration = 'none';\n  s.color = '#656A6B';\n  snackbar.appendChild(snackbarText);\n  snackbar.appendChild(snackbarButton);\n  this.overlay = overlay;\n  this.text = text;\n  this.hide();\n}\nRotateInstructions.prototype.show = function (parent) {\n  if (!parent && !this.overlay.parentElement) {\n    document.body.appendChild(this.overlay);\n  } else if (parent) {\n    if (this.overlay.parentElement && this.overlay.parentElement != parent) this.overlay.parentElement.removeChild(this.overlay);\n    parent.appendChild(this.overlay);\n  }\n  this.overlay.style.display = 'block';\n  var img = this.overlay.querySelector('img');\n  var s = img.style;\n  if (isLandscapeMode()) {\n    s.width = '20%';\n    s.marginLeft = '40%';\n    s.marginTop = '3%';\n  } else {\n    s.width = '50%';\n    s.marginLeft = '25%';\n    s.marginTop = '25%';\n  }\n};\nRotateInstructions.prototype.hide = function () {\n  this.overlay.style.display = 'none';\n};\nRotateInstructions.prototype.showTemporarily = function (ms, parent) {\n  this.show(parent);\n  this.timer = setTimeout(this.hide.bind(this), ms);\n};\nRotateInstructions.prototype.disableShowTemporarily = function () {\n  clearTimeout(this.timer);\n};\nRotateInstructions.prototype.update = function () {\n  this.disableShowTemporarily();\n  if (!isLandscapeMode() && isMobile()) {\n    this.show();\n  } else {\n    this.hide();\n  }\n};\nRotateInstructions.prototype.loadIcon_ = function () {\n  this.icon = dataUri('image/svg+xml', rotateInstructionsAsset);\n};\nvar DEFAULT_VIEWER = 'CardboardV1';\nvar VIEWER_KEY = 'WEBVR_CARDBOARD_VIEWER';\nvar CLASS_NAME = 'webvr-polyfill-viewer-selector';\nfunction ViewerSelector(defaultViewer) {\n  try {\n    this.selectedKey = localStorage.getItem(VIEWER_KEY);\n  } catch (error) {\n    console.error('Failed to load viewer profile: %s', error);\n  }\n  if (!this.selectedKey) {\n    this.selectedKey = defaultViewer || DEFAULT_VIEWER;\n  }\n  this.dialog = this.createDialog_(DeviceInfo.Viewers);\n  this.root = null;\n  this.onChangeCallbacks_ = [];\n}\nViewerSelector.prototype.show = function (root) {\n  this.root = root;\n  root.appendChild(this.dialog);\n  var selected = this.dialog.querySelector('#' + this.selectedKey);\n  selected.checked = true;\n  this.dialog.style.display = 'block';\n};\nViewerSelector.prototype.hide = function () {\n  if (this.root && this.root.contains(this.dialog)) {\n    this.root.removeChild(this.dialog);\n  }\n  this.dialog.style.display = 'none';\n};\nViewerSelector.prototype.getCurrentViewer = function () {\n  return DeviceInfo.Viewers[this.selectedKey];\n};\nViewerSelector.prototype.getSelectedKey_ = function () {\n  var input = this.dialog.querySelector('input[name=field]:checked');\n  if (input) {\n    return input.id;\n  }\n  return null;\n};\nViewerSelector.prototype.onChange = function (cb) {\n  this.onChangeCallbacks_.push(cb);\n};\nViewerSelector.prototype.fireOnChange_ = function (viewer) {\n  for (var i = 0; i < this.onChangeCallbacks_.length; i++) {\n    this.onChangeCallbacks_[i](viewer);\n  }\n};\nViewerSelector.prototype.onSave_ = function () {\n  this.selectedKey = this.getSelectedKey_();\n  if (!this.selectedKey || !DeviceInfo.Viewers[this.selectedKey]) {\n    console.error('ViewerSelector.onSave_: this should never happen!');\n    return;\n  }\n  this.fireOnChange_(DeviceInfo.Viewers[this.selectedKey]);\n  try {\n    localStorage.setItem(VIEWER_KEY, this.selectedKey);\n  } catch (error) {\n    console.error('Failed to save viewer profile: %s', error);\n  }\n  this.hide();\n};\nViewerSelector.prototype.createDialog_ = function (options) {\n  var container = document.createElement('div');\n  container.classList.add(CLASS_NAME);\n  container.style.display = 'none';\n  var overlay = document.createElement('div');\n  var s = overlay.style;\n  s.position = 'fixed';\n  s.left = 0;\n  s.top = 0;\n  s.width = '100%';\n  s.height = '100%';\n  s.background = 'rgba(0, 0, 0, 0.3)';\n  overlay.addEventListener('click', this.hide.bind(this));\n  var width = 280;\n  var dialog = document.createElement('div');\n  var s = dialog.style;\n  s.boxSizing = 'border-box';\n  s.position = 'fixed';\n  s.top = '24px';\n  s.left = '50%';\n  s.marginLeft = -width / 2 + 'px';\n  s.width = width + 'px';\n  s.padding = '24px';\n  s.overflow = 'hidden';\n  s.background = '#fafafa';\n  s.fontFamily = \"'Roboto', sans-serif\";\n  s.boxShadow = '0px 5px 20px #666';\n  dialog.appendChild(this.createH1_('Select your viewer'));\n  for (var id in options) {\n    dialog.appendChild(this.createChoice_(id, options[id].label));\n  }\n  dialog.appendChild(this.createButton_('Save', this.onSave_.bind(this)));\n  container.appendChild(overlay);\n  container.appendChild(dialog);\n  return container;\n};\nViewerSelector.prototype.createH1_ = function (name) {\n  var h1 = document.createElement('h1');\n  var s = h1.style;\n  s.color = 'black';\n  s.fontSize = '20px';\n  s.fontWeight = 'bold';\n  s.marginTop = 0;\n  s.marginBottom = '24px';\n  h1.innerHTML = name;\n  return h1;\n};\nViewerSelector.prototype.createChoice_ = function (id, name) {\n  var div = document.createElement('div');\n  div.style.marginTop = '8px';\n  div.style.color = 'black';\n  var input = document.createElement('input');\n  input.style.fontSize = '30px';\n  input.setAttribute('id', id);\n  input.setAttribute('type', 'radio');\n  input.setAttribute('value', id);\n  input.setAttribute('name', 'field');\n  var label = document.createElement('label');\n  label.style.marginLeft = '4px';\n  label.setAttribute('for', id);\n  label.innerHTML = name;\n  div.appendChild(input);\n  div.appendChild(label);\n  return div;\n};\nViewerSelector.prototype.createButton_ = function (label, onclick) {\n  var button = document.createElement('button');\n  button.innerHTML = label;\n  var s = button.style;\n  s.float = 'right';\n  s.textTransform = 'uppercase';\n  s.color = '#1094f7';\n  s.fontSize = '14px';\n  s.letterSpacing = 0;\n  s.border = 0;\n  s.background = 'none';\n  s.marginTop = '16px';\n  button.addEventListener('click', onclick);\n  return button;\n};\nvar commonjsGlobal$$1 = typeof window !== 'undefined' ? window : typeof commonjsGlobal !== 'undefined' ? commonjsGlobal : typeof self !== 'undefined' ? self : {};\nfunction unwrapExports$$1 (x) {\n\treturn x && x.__esModule && Object.prototype.hasOwnProperty.call(x, 'default') ? x['default'] : x;\n}\nfunction createCommonjsModule$$1(fn, module) {\n\treturn module = { exports: {} }, fn(module, module.exports), module.exports;\n}\nvar NoSleep = createCommonjsModule$$1(function (module, exports) {\n(function webpackUniversalModuleDefinition(root, factory) {\n\tmodule.exports = factory();\n})(commonjsGlobal$$1, function() {\nreturn          (function(modules) {\n         \tvar installedModules = {};\n         \tfunction __webpack_require__(moduleId) {\n         \t\tif(installedModules[moduleId]) {\n         \t\t\treturn installedModules[moduleId].exports;\n         \t\t}\n         \t\tvar module = installedModules[moduleId] = {\n         \t\t\ti: moduleId,\n         \t\t\tl: false,\n         \t\t\texports: {}\n         \t\t};\n         \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n         \t\tmodule.l = true;\n         \t\treturn module.exports;\n         \t}\n         \t__webpack_require__.m = modules;\n         \t__webpack_require__.c = installedModules;\n         \t__webpack_require__.d = function(exports, name, getter) {\n         \t\tif(!__webpack_require__.o(exports, name)) {\n         \t\t\tObject.defineProperty(exports, name, {\n         \t\t\t\tconfigurable: false,\n         \t\t\t\tenumerable: true,\n         \t\t\t\tget: getter\n         \t\t\t});\n         \t\t}\n         \t};\n         \t__webpack_require__.n = function(module) {\n         \t\tvar getter = module && module.__esModule ?\n         \t\t\tfunction getDefault() { return module['default']; } :\n         \t\t\tfunction getModuleExports() { return module; };\n         \t\t__webpack_require__.d(getter, 'a', getter);\n         \t\treturn getter;\n         \t};\n         \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n         \t__webpack_require__.p = \"\";\n         \treturn __webpack_require__(__webpack_require__.s = 0);\n         })\n         ([\n      (function(module, exports, __webpack_require__) {\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\nvar mediaFile = __webpack_require__(1);\nvar oldIOS = typeof navigator !== 'undefined' && parseFloat(('' + (/CPU.*OS ([0-9_]{3,4})[0-9_]{0,1}|(CPU like).*AppleWebKit.*Mobile/i.exec(navigator.userAgent) || [0, ''])[1]).replace('undefined', '3_2').replace('_', '.').replace('_', '')) < 10 && !window.MSStream;\nvar NoSleep = function () {\n  function NoSleep() {\n    _classCallCheck(this, NoSleep);\n    if (oldIOS) {\n      this.noSleepTimer = null;\n    } else {\n      this.noSleepVideo = document.createElement('video');\n      this.noSleepVideo.setAttribute('playsinline', '');\n      this.noSleepVideo.setAttribute('src', mediaFile);\n      this.noSleepVideo.addEventListener('timeupdate', function (e) {\n        if (this.noSleepVideo.currentTime > 0.5) {\n          this.noSleepVideo.currentTime = Math.random();\n        }\n      }.bind(this));\n    }\n  }\n  _createClass(NoSleep, [{\n    key: 'enable',\n    value: function enable() {\n      if (oldIOS) {\n        this.disable();\n        this.noSleepTimer = window.setInterval(function () {\n          window.location.href = '/';\n          window.setTimeout(window.stop, 0);\n        }, 15000);\n      } else {\n        this.noSleepVideo.play();\n      }\n    }\n  }, {\n    key: 'disable',\n    value: function disable() {\n      if (oldIOS) {\n        if (this.noSleepTimer) {\n          window.clearInterval(this.noSleepTimer);\n          this.noSleepTimer = null;\n        }\n      } else {\n        this.noSleepVideo.pause();\n      }\n    }\n  }]);\n  return NoSleep;\n}();\nmodule.exports = NoSleep;\n      }),\n      (function(module, exports, __webpack_require__) {\nmodule.exports = 'data:video/mp4;base64,AAAAIGZ0eXBtcDQyAAACAGlzb21pc28yYXZjMW1wNDEAAAAIZnJlZQAACKBtZGF0AAAC8wYF///v3EXpvebZSLeWLNgg2SPu73gyNjQgLSBjb3JlIDE0MiByMjQ3OSBkZDc5YTYxIC0gSC4yNjQvTVBFRy00IEFWQyBjb2RlYyAtIENvcHlsZWZ0IDIwMDMtMjAxNCAtIGh0dHA6Ly93d3cudmlkZW9sYW4ub3JnL3gyNjQuaHRtbCAtIG9wdGlvbnM6IGNhYmFjPTEgcmVmPTEgZGVibG9jaz0xOjA6MCBhbmFseXNlPTB4MToweDExMSBtZT1oZXggc3VibWU9MiBwc3k9MSBwc3lfcmQ9MS4wMDowLjAwIG1peGVkX3JlZj0wIG1lX3JhbmdlPTE2IGNocm9tYV9tZT0xIHRyZWxsaXM9MCA4eDhkY3Q9MCBjcW09MCBkZWFkem9uZT0yMSwxMSBmYXN0X3Bza2lwPTEgY2hyb21hX3FwX29mZnNldD0wIHRocmVhZHM9NiBsb29rYWhlYWRfdGhyZWFkcz0xIHNsaWNlZF90aHJlYWRzPTAgbnI9MCBkZWNpbWF0ZT0xIGludGVybGFjZWQ9MCBibHVyYXlfY29tcGF0PTAgY29uc3RyYWluZWRfaW50cmE9MCBiZnJhbWVzPTMgYl9weXJhbWlkPTIgYl9hZGFwdD0xIGJfYmlhcz0wIGRpcmVjdD0xIHdlaWdodGI9MSBvcGVuX2dvcD0wIHdlaWdodHA9MSBrZXlpbnQ9MzAwIGtleWludF9taW49MzAgc2NlbmVjdXQ9NDAgaW50cmFfcmVmcmVzaD0wIHJjX2xvb2thaGVhZD0xMCByYz1jcmYgbWJ0cmVlPTEgY3JmPTIwLjAgcWNvbXA9MC42MCBxcG1pbj0wIHFwbWF4PTY5IHFwc3RlcD00IHZidl9tYXhyYXRlPTIwMDAwIHZidl9idWZzaXplPTI1MDAwIGNyZl9tYXg9MC4wIG5hbF9ocmQ9bm9uZSBmaWxsZXI9MCBpcF9yYXRpbz0xLjQwIGFxPTE6MS4wMACAAAAAOWWIhAA3//p+C7v8tDDSTjf97w55i3SbRPO4ZY+hkjD5hbkAkL3zpJ6h/LR1CAABzgB1kqqzUorlhQAAAAxBmiQYhn/+qZYADLgAAAAJQZ5CQhX/AAj5IQAD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';\n      })\n         ]);\n});\n});\nvar NoSleep$1 = unwrapExports$$1(NoSleep);\nvar nextDisplayId = 1000;\nvar defaultLeftBounds = [0, 0, 0.5, 1];\nvar defaultRightBounds = [0.5, 0, 0.5, 1];\nvar raf = window.requestAnimationFrame;\nvar caf = window.cancelAnimationFrame;\nfunction VRFrameData() {\n  this.leftProjectionMatrix = new Float32Array(16);\n  this.leftViewMatrix = new Float32Array(16);\n  this.rightProjectionMatrix = new Float32Array(16);\n  this.rightViewMatrix = new Float32Array(16);\n  this.pose = null;\n}\nfunction VRDisplayCapabilities(config) {\n  Object.defineProperties(this, {\n    hasPosition: {\n      writable: false, enumerable: true, value: config.hasPosition\n    },\n    hasExternalDisplay: {\n      writable: false, enumerable: true, value: config.hasExternalDisplay\n    },\n    canPresent: {\n      writable: false, enumerable: true, value: config.canPresent\n    },\n    maxLayers: {\n      writable: false, enumerable: true, value: config.maxLayers\n    },\n    hasOrientation: {\n      enumerable: true, get: function get() {\n        deprecateWarning('VRDisplayCapabilities.prototype.hasOrientation', 'VRDisplay.prototype.getFrameData');\n        return config.hasOrientation;\n      }\n    }\n  });\n}\nfunction VRDisplay(config) {\n  config = config || {};\n  var USE_WAKELOCK = 'wakelock' in config ? config.wakelock : true;\n  this.isPolyfilled = true;\n  this.displayId = nextDisplayId++;\n  this.displayName = '';\n  this.depthNear = 0.01;\n  this.depthFar = 10000.0;\n  this.isPresenting = false;\n  Object.defineProperty(this, 'isConnected', {\n    get: function get() {\n      deprecateWarning('VRDisplay.prototype.isConnected', 'VRDisplayCapabilities.prototype.hasExternalDisplay');\n      return false;\n    }\n  });\n  this.capabilities = new VRDisplayCapabilities({\n    hasPosition: false,\n    hasOrientation: false,\n    hasExternalDisplay: false,\n    canPresent: false,\n    maxLayers: 1\n  });\n  this.stageParameters = null;\n  this.waitingForPresent_ = false;\n  this.layer_ = null;\n  this.originalParent_ = null;\n  this.fullscreenElement_ = null;\n  this.fullscreenWrapper_ = null;\n  this.fullscreenElementCachedStyle_ = null;\n  this.fullscreenEventTarget_ = null;\n  this.fullscreenChangeHandler_ = null;\n  this.fullscreenErrorHandler_ = null;\n  if (USE_WAKELOCK && isMobile()) {\n    this.wakelock_ = new NoSleep$1();\n  }\n}\nVRDisplay.prototype.getFrameData = function (frameData) {\n  return frameDataFromPose(frameData, this._getPose(), this);\n};\nVRDisplay.prototype.getPose = function () {\n  deprecateWarning('VRDisplay.prototype.getPose', 'VRDisplay.prototype.getFrameData');\n  return this._getPose();\n};\nVRDisplay.prototype.resetPose = function () {\n  deprecateWarning('VRDisplay.prototype.resetPose');\n  return this._resetPose();\n};\nVRDisplay.prototype.getImmediatePose = function () {\n  deprecateWarning('VRDisplay.prototype.getImmediatePose', 'VRDisplay.prototype.getFrameData');\n  return this._getPose();\n};\nVRDisplay.prototype.requestAnimationFrame = function (callback) {\n  return raf(callback);\n};\nVRDisplay.prototype.cancelAnimationFrame = function (id) {\n  return caf(id);\n};\nVRDisplay.prototype.wrapForFullscreen = function (element) {\n  if (isIOS()) {\n    return element;\n  }\n  if (!this.fullscreenWrapper_) {\n    this.fullscreenWrapper_ = document.createElement('div');\n    var cssProperties = ['height: ' + Math.min(screen.height, screen.width) + 'px !important', 'top: 0 !important', 'left: 0 !important', 'right: 0 !important', 'border: 0', 'margin: 0', 'padding: 0', 'z-index: 999999 !important', 'position: fixed'];\n    this.fullscreenWrapper_.setAttribute('style', cssProperties.join('; ') + ';');\n    this.fullscreenWrapper_.classList.add('webvr-polyfill-fullscreen-wrapper');\n  }\n  if (this.fullscreenElement_ == element) {\n    return this.fullscreenWrapper_;\n  }\n  if (this.fullscreenElement_) {\n    if (this.originalParent_) {\n      this.originalParent_.appendChild(this.fullscreenElement_);\n    } else {\n      this.fullscreenElement_.parentElement.removeChild(this.fullscreenElement_);\n    }\n  }\n  this.fullscreenElement_ = element;\n  this.originalParent_ = element.parentElement;\n  if (!this.originalParent_) {\n    document.body.appendChild(element);\n  }\n  if (!this.fullscreenWrapper_.parentElement) {\n    var parent = this.fullscreenElement_.parentElement;\n    parent.insertBefore(this.fullscreenWrapper_, this.fullscreenElement_);\n    parent.removeChild(this.fullscreenElement_);\n  }\n  this.fullscreenWrapper_.insertBefore(this.fullscreenElement_, this.fullscreenWrapper_.firstChild);\n  this.fullscreenElementCachedStyle_ = this.fullscreenElement_.getAttribute('style');\n  var self = this;\n  function applyFullscreenElementStyle() {\n    if (!self.fullscreenElement_) {\n      return;\n    }\n    var cssProperties = ['position: absolute', 'top: 0', 'left: 0', 'width: ' + Math.max(screen.width, screen.height) + 'px', 'height: ' + Math.min(screen.height, screen.width) + 'px', 'border: 0', 'margin: 0', 'padding: 0'];\n    self.fullscreenElement_.setAttribute('style', cssProperties.join('; ') + ';');\n  }\n  applyFullscreenElementStyle();\n  return this.fullscreenWrapper_;\n};\nVRDisplay.prototype.removeFullscreenWrapper = function () {\n  if (!this.fullscreenElement_) {\n    return;\n  }\n  var element = this.fullscreenElement_;\n  if (this.fullscreenElementCachedStyle_) {\n    element.setAttribute('style', this.fullscreenElementCachedStyle_);\n  } else {\n    element.removeAttribute('style');\n  }\n  this.fullscreenElement_ = null;\n  this.fullscreenElementCachedStyle_ = null;\n  var parent = this.fullscreenWrapper_.parentElement;\n  this.fullscreenWrapper_.removeChild(element);\n  if (this.originalParent_ === parent) {\n    parent.insertBefore(element, this.fullscreenWrapper_);\n  }\n  else if (this.originalParent_) {\n      this.originalParent_.appendChild(element);\n    }\n  parent.removeChild(this.fullscreenWrapper_);\n  return element;\n};\nVRDisplay.prototype.requestPresent = function (layers) {\n  var wasPresenting = this.isPresenting;\n  var self = this;\n  if (!(layers instanceof Array)) {\n    deprecateWarning('VRDisplay.prototype.requestPresent with non-array argument', 'an array of VRLayers as the first argument');\n    layers = [layers];\n  }\n  return new Promise(function (resolve, reject) {\n    if (!self.capabilities.canPresent) {\n      reject(new Error('VRDisplay is not capable of presenting.'));\n      return;\n    }\n    if (layers.length == 0 || layers.length > self.capabilities.maxLayers) {\n      reject(new Error('Invalid number of layers.'));\n      return;\n    }\n    var incomingLayer = layers[0];\n    if (!incomingLayer.source) {\n      resolve();\n      return;\n    }\n    var leftBounds = incomingLayer.leftBounds || defaultLeftBounds;\n    var rightBounds = incomingLayer.rightBounds || defaultRightBounds;\n    if (wasPresenting) {\n      var layer = self.layer_;\n      if (layer.source !== incomingLayer.source) {\n        layer.source = incomingLayer.source;\n      }\n      for (var i = 0; i < 4; i++) {\n        layer.leftBounds[i] = leftBounds[i];\n        layer.rightBounds[i] = rightBounds[i];\n      }\n      self.wrapForFullscreen(self.layer_.source);\n      self.updatePresent_();\n      resolve();\n      return;\n    }\n    self.layer_ = {\n      predistorted: incomingLayer.predistorted,\n      source: incomingLayer.source,\n      leftBounds: leftBounds.slice(0),\n      rightBounds: rightBounds.slice(0)\n    };\n    self.waitingForPresent_ = false;\n    if (self.layer_ && self.layer_.source) {\n      var fullscreenElement = self.wrapForFullscreen(self.layer_.source);\n      var onFullscreenChange = function onFullscreenChange() {\n        var actualFullscreenElement = getFullscreenElement();\n        self.isPresenting = fullscreenElement === actualFullscreenElement;\n        if (self.isPresenting) {\n          if (screen.orientation && screen.orientation.lock) {\n            screen.orientation.lock('landscape-primary').catch(function (error) {\n              console.error('screen.orientation.lock() failed due to', error.message);\n            });\n          }\n          self.waitingForPresent_ = false;\n          self.beginPresent_();\n          resolve();\n        } else {\n          if (screen.orientation && screen.orientation.unlock) {\n            screen.orientation.unlock();\n          }\n          self.removeFullscreenWrapper();\n          self.disableWakeLock();\n          self.endPresent_();\n          self.removeFullscreenListeners_();\n        }\n        self.fireVRDisplayPresentChange_();\n      };\n      var onFullscreenError = function onFullscreenError() {\n        if (!self.waitingForPresent_) {\n          return;\n        }\n        self.removeFullscreenWrapper();\n        self.removeFullscreenListeners_();\n        self.disableWakeLock();\n        self.waitingForPresent_ = false;\n        self.isPresenting = false;\n        reject(new Error('Unable to present.'));\n      };\n      self.addFullscreenListeners_(fullscreenElement, onFullscreenChange, onFullscreenError);\n      if (requestFullscreen(fullscreenElement)) {\n        self.enableWakeLock();\n        self.waitingForPresent_ = true;\n      } else if (isIOS() || isWebViewAndroid()) {\n        self.enableWakeLock();\n        self.isPresenting = true;\n        self.beginPresent_();\n        self.fireVRDisplayPresentChange_();\n        resolve();\n      }\n    }\n    if (!self.waitingForPresent_ && !isIOS()) {\n      exitFullscreen();\n      reject(new Error('Unable to present.'));\n    }\n  });\n};\nVRDisplay.prototype.exitPresent = function () {\n  var wasPresenting = this.isPresenting;\n  var self = this;\n  this.isPresenting = false;\n  this.layer_ = null;\n  this.disableWakeLock();\n  return new Promise(function (resolve, reject) {\n    if (wasPresenting) {\n      if (!exitFullscreen() && isIOS()) {\n        self.endPresent_();\n        self.fireVRDisplayPresentChange_();\n      }\n      if (isWebViewAndroid()) {\n        self.removeFullscreenWrapper();\n        self.removeFullscreenListeners_();\n        self.endPresent_();\n        self.fireVRDisplayPresentChange_();\n      }\n      resolve();\n    } else {\n      reject(new Error('Was not presenting to VRDisplay.'));\n    }\n  });\n};\nVRDisplay.prototype.getLayers = function () {\n  if (this.layer_) {\n    return [this.layer_];\n  }\n  return [];\n};\nVRDisplay.prototype.fireVRDisplayPresentChange_ = function () {\n  var event = new CustomEvent('vrdisplaypresentchange', { detail: { display: this } });\n  window.dispatchEvent(event);\n};\nVRDisplay.prototype.fireVRDisplayConnect_ = function () {\n  var event = new CustomEvent('vrdisplayconnect', { detail: { display: this } });\n  window.dispatchEvent(event);\n};\nVRDisplay.prototype.addFullscreenListeners_ = function (element, changeHandler, errorHandler) {\n  this.removeFullscreenListeners_();\n  this.fullscreenEventTarget_ = element;\n  this.fullscreenChangeHandler_ = changeHandler;\n  this.fullscreenErrorHandler_ = errorHandler;\n  if (changeHandler) {\n    if (document.fullscreenEnabled) {\n      element.addEventListener('fullscreenchange', changeHandler, false);\n    } else if (document.webkitFullscreenEnabled) {\n      element.addEventListener('webkitfullscreenchange', changeHandler, false);\n    } else if (document.mozFullScreenEnabled) {\n      document.addEventListener('mozfullscreenchange', changeHandler, false);\n    } else if (document.msFullscreenEnabled) {\n      element.addEventListener('msfullscreenchange', changeHandler, false);\n    }\n  }\n  if (errorHandler) {\n    if (document.fullscreenEnabled) {\n      element.addEventListener('fullscreenerror', errorHandler, false);\n    } else if (document.webkitFullscreenEnabled) {\n      element.addEventListener('webkitfullscreenerror', errorHandler, false);\n    } else if (document.mozFullScreenEnabled) {\n      document.addEventListener('mozfullscreenerror', errorHandler, false);\n    } else if (document.msFullscreenEnabled) {\n      element.addEventListener('msfullscreenerror', errorHandler, false);\n    }\n  }\n};\nVRDisplay.prototype.removeFullscreenListeners_ = function () {\n  if (!this.fullscreenEventTarget_) return;\n  var element = this.fullscreenEventTarget_;\n  if (this.fullscreenChangeHandler_) {\n    var changeHandler = this.fullscreenChangeHandler_;\n    element.removeEventListener('fullscreenchange', changeHandler, false);\n    element.removeEventListener('webkitfullscreenchange', changeHandler, false);\n    document.removeEventListener('mozfullscreenchange', changeHandler, false);\n    element.removeEventListener('msfullscreenchange', changeHandler, false);\n  }\n  if (this.fullscreenErrorHandler_) {\n    var errorHandler = this.fullscreenErrorHandler_;\n    element.removeEventListener('fullscreenerror', errorHandler, false);\n    element.removeEventListener('webkitfullscreenerror', errorHandler, false);\n    document.removeEventListener('mozfullscreenerror', errorHandler, false);\n    element.removeEventListener('msfullscreenerror', errorHandler, false);\n  }\n  this.fullscreenEventTarget_ = null;\n  this.fullscreenChangeHandler_ = null;\n  this.fullscreenErrorHandler_ = null;\n};\nVRDisplay.prototype.enableWakeLock = function () {\n  if (this.wakelock_) {\n    this.wakelock_.enable();\n  }\n};\nVRDisplay.prototype.disableWakeLock = function () {\n  if (this.wakelock_) {\n    this.wakelock_.disable();\n  }\n};\nVRDisplay.prototype.beginPresent_ = function () {\n};\nVRDisplay.prototype.endPresent_ = function () {\n};\nVRDisplay.prototype.submitFrame = function (pose) {\n};\nVRDisplay.prototype.getEyeParameters = function (whichEye) {\n  return null;\n};\nvar config = {\n  ADDITIONAL_VIEWERS: [],\n  DEFAULT_VIEWER: '',\n  MOBILE_WAKE_LOCK: true,\n  DEBUG: false,\n  DPDB_URL: 'https://dpdb.webvr.rocks/dpdb.json',\n  K_FILTER: 0.98,\n  PREDICTION_TIME_S: 0.040,\n  CARDBOARD_UI_DISABLED: false,\n  ROTATE_INSTRUCTIONS_DISABLED: false,\n  YAW_ONLY: false,\n  BUFFER_SCALE: 0.5,\n  DIRTY_SUBMIT_FRAME_BINDINGS: false\n};\nvar Eye = {\n  LEFT: 'left',\n  RIGHT: 'right'\n};\nfunction CardboardVRDisplay(config$$1) {\n  var defaults = extend({}, config);\n  config$$1 = extend(defaults, config$$1 || {});\n  VRDisplay.call(this, {\n    wakelock: config$$1.MOBILE_WAKE_LOCK\n  });\n  this.config = config$$1;\n  this.displayName = 'Cardboard VRDisplay';\n  this.capabilities = new VRDisplayCapabilities({\n    hasPosition: false,\n    hasOrientation: true,\n    hasExternalDisplay: false,\n    canPresent: true,\n    maxLayers: 1\n  });\n  this.stageParameters = null;\n  this.bufferScale_ = this.config.BUFFER_SCALE;\n  this.poseSensor_ = new PoseSensor(this.config);\n  this.distorter_ = null;\n  this.cardboardUI_ = null;\n  this.dpdb_ = new Dpdb(this.config.DPDB_URL, this.onDeviceParamsUpdated_.bind(this));\n  this.deviceInfo_ = new DeviceInfo(this.dpdb_.getDeviceParams(), config$$1.ADDITIONAL_VIEWERS);\n  this.viewerSelector_ = new ViewerSelector(config$$1.DEFAULT_VIEWER);\n  this.viewerSelector_.onChange(this.onViewerChanged_.bind(this));\n  this.deviceInfo_.setViewer(this.viewerSelector_.getCurrentViewer());\n  if (!this.config.ROTATE_INSTRUCTIONS_DISABLED) {\n    this.rotateInstructions_ = new RotateInstructions();\n  }\n  if (isIOS()) {\n    window.addEventListener('resize', this.onResize_.bind(this));\n  }\n}\nCardboardVRDisplay.prototype = Object.create(VRDisplay.prototype);\nCardboardVRDisplay.prototype._getPose = function () {\n  return {\n    position: null,\n    orientation: this.poseSensor_.getOrientation(),\n    linearVelocity: null,\n    linearAcceleration: null,\n    angularVelocity: null,\n    angularAcceleration: null\n  };\n};\nCardboardVRDisplay.prototype._resetPose = function () {\n  if (this.poseSensor_.resetPose) {\n    this.poseSensor_.resetPose();\n  }\n};\nCardboardVRDisplay.prototype._getFieldOfView = function (whichEye) {\n  var fieldOfView;\n  if (whichEye == Eye.LEFT) {\n    fieldOfView = this.deviceInfo_.getFieldOfViewLeftEye();\n  } else if (whichEye == Eye.RIGHT) {\n    fieldOfView = this.deviceInfo_.getFieldOfViewRightEye();\n  } else {\n    console.error('Invalid eye provided: %s', whichEye);\n    return null;\n  }\n  return fieldOfView;\n};\nCardboardVRDisplay.prototype._getEyeOffset = function (whichEye) {\n  var offset;\n  if (whichEye == Eye.LEFT) {\n    offset = [-this.deviceInfo_.viewer.interLensDistance * 0.5, 0.0, 0.0];\n  } else if (whichEye == Eye.RIGHT) {\n    offset = [this.deviceInfo_.viewer.interLensDistance * 0.5, 0.0, 0.0];\n  } else {\n    console.error('Invalid eye provided: %s', whichEye);\n    return null;\n  }\n  return offset;\n};\nCardboardVRDisplay.prototype.getEyeParameters = function (whichEye) {\n  var offset = this._getEyeOffset(whichEye);\n  var fieldOfView = this._getFieldOfView(whichEye);\n  var eyeParams = {\n    offset: offset,\n    renderWidth: this.deviceInfo_.device.width * 0.5 * this.bufferScale_,\n    renderHeight: this.deviceInfo_.device.height * this.bufferScale_\n  };\n  Object.defineProperty(eyeParams, 'fieldOfView', {\n    enumerable: true,\n    get: function get() {\n      deprecateWarning('VRFieldOfView', 'VRFrameData\\'s projection matrices');\n      return fieldOfView;\n    }\n  });\n  return eyeParams;\n};\nCardboardVRDisplay.prototype.onDeviceParamsUpdated_ = function (newParams) {\n  if (this.config.DEBUG) {\n    console.log('DPDB reported that device params were updated.');\n  }\n  this.deviceInfo_.updateDeviceParams(newParams);\n  if (this.distorter_) {\n    this.distorter_.updateDeviceInfo(this.deviceInfo_);\n  }\n};\nCardboardVRDisplay.prototype.updateBounds_ = function () {\n  if (this.layer_ && this.distorter_ && (this.layer_.leftBounds || this.layer_.rightBounds)) {\n    this.distorter_.setTextureBounds(this.layer_.leftBounds, this.layer_.rightBounds);\n  }\n};\nCardboardVRDisplay.prototype.beginPresent_ = function () {\n  var gl = this.layer_.source.getContext('webgl');\n  if (!gl) gl = this.layer_.source.getContext('experimental-webgl');\n  if (!gl) gl = this.layer_.source.getContext('webgl2');\n  if (!gl) return;\n  if (this.layer_.predistorted) {\n    if (!this.config.CARDBOARD_UI_DISABLED) {\n      gl.canvas.width = getScreenWidth() * this.bufferScale_;\n      gl.canvas.height = getScreenHeight() * this.bufferScale_;\n      this.cardboardUI_ = new CardboardUI(gl);\n    }\n  } else {\n    if (!this.config.CARDBOARD_UI_DISABLED) {\n      this.cardboardUI_ = new CardboardUI(gl);\n    }\n    this.distorter_ = new CardboardDistorter(gl, this.cardboardUI_, this.config.BUFFER_SCALE, this.config.DIRTY_SUBMIT_FRAME_BINDINGS);\n    this.distorter_.updateDeviceInfo(this.deviceInfo_);\n  }\n  if (this.cardboardUI_) {\n    this.cardboardUI_.listen(function (e) {\n      this.viewerSelector_.show(this.layer_.source.parentElement);\n      e.stopPropagation();\n      e.preventDefault();\n    }.bind(this), function (e) {\n      this.exitPresent();\n      e.stopPropagation();\n      e.preventDefault();\n    }.bind(this));\n  }\n  if (this.rotateInstructions_) {\n    if (isLandscapeMode() && isMobile()) {\n      this.rotateInstructions_.showTemporarily(3000, this.layer_.source.parentElement);\n    } else {\n      this.rotateInstructions_.update();\n    }\n  }\n  this.orientationHandler = this.onOrientationChange_.bind(this);\n  window.addEventListener('orientationchange', this.orientationHandler);\n  this.vrdisplaypresentchangeHandler = this.updateBounds_.bind(this);\n  window.addEventListener('vrdisplaypresentchange', this.vrdisplaypresentchangeHandler);\n  this.fireVRDisplayDeviceParamsChange_();\n};\nCardboardVRDisplay.prototype.endPresent_ = function () {\n  if (this.distorter_) {\n    this.distorter_.destroy();\n    this.distorter_ = null;\n  }\n  if (this.cardboardUI_) {\n    this.cardboardUI_.destroy();\n    this.cardboardUI_ = null;\n  }\n  if (this.rotateInstructions_) {\n    this.rotateInstructions_.hide();\n  }\n  this.viewerSelector_.hide();\n  window.removeEventListener('orientationchange', this.orientationHandler);\n  window.removeEventListener('vrdisplaypresentchange', this.vrdisplaypresentchangeHandler);\n};\nCardboardVRDisplay.prototype.updatePresent_ = function () {\n  this.endPresent_();\n  this.beginPresent_();\n};\nCardboardVRDisplay.prototype.submitFrame = function (pose) {\n  if (this.distorter_) {\n    this.updateBounds_();\n    this.distorter_.submitFrame();\n  } else if (this.cardboardUI_ && this.layer_) {\n    var gl = this.layer_.source.getContext('webgl');\n    if (!gl) gl = this.layer_.source.getContext('experimental-webgl');\n    if (!gl) gl = this.layer_.source.getContext('webgl2');\n    var canvas = gl.canvas;\n    if (canvas.width != this.lastWidth || canvas.height != this.lastHeight) {\n      this.cardboardUI_.onResize();\n    }\n    this.lastWidth = canvas.width;\n    this.lastHeight = canvas.height;\n    this.cardboardUI_.render();\n  }\n};\nCardboardVRDisplay.prototype.onOrientationChange_ = function (e) {\n  this.viewerSelector_.hide();\n  if (this.rotateInstructions_) {\n    this.rotateInstructions_.update();\n  }\n  this.onResize_();\n};\nCardboardVRDisplay.prototype.onResize_ = function (e) {\n  if (this.layer_) {\n    var gl = this.layer_.source.getContext('webgl');\n    if (!gl) gl = this.layer_.source.getContext('experimental-webgl');\n    if (!gl) gl = this.layer_.source.getContext('webgl2');\n    var cssProperties = ['position: absolute', 'top: 0', 'left: 0',\n    'width: 100vw', 'height: 100vh', 'border: 0', 'margin: 0',\n    'padding: 0px', 'box-sizing: content-box'];\n    gl.canvas.setAttribute('style', cssProperties.join('; ') + ';');\n    safariCssSizeWorkaround(gl.canvas);\n  }\n};\nCardboardVRDisplay.prototype.onViewerChanged_ = function (viewer) {\n  this.deviceInfo_.setViewer(viewer);\n  if (this.distorter_) {\n    this.distorter_.updateDeviceInfo(this.deviceInfo_);\n  }\n  this.fireVRDisplayDeviceParamsChange_();\n};\nCardboardVRDisplay.prototype.fireVRDisplayDeviceParamsChange_ = function () {\n  var event = new CustomEvent('vrdisplaydeviceparamschange', {\n    detail: {\n      vrdisplay: this,\n      deviceInfo: this.deviceInfo_\n    }\n  });\n  window.dispatchEvent(event);\n};\nCardboardVRDisplay.VRFrameData = VRFrameData;\nCardboardVRDisplay.VRDisplay = VRDisplay;\nreturn CardboardVRDisplay;\n})));\n});\nvar CardboardVRDisplay = unwrapExports(cardboardVrDisplay);\n\nvar version = \"0.10.10\";\n\nvar DefaultConfig = {\n  ADDITIONAL_VIEWERS: [],\n  DEFAULT_VIEWER: '',\n  PROVIDE_MOBILE_VRDISPLAY: true,\n  MOBILE_WAKE_LOCK: true,\n  DEBUG: false,\n  DPDB_URL: 'https://dpdb.webvr.rocks/dpdb.json',\n  K_FILTER: 0.98,\n  PREDICTION_TIME_S: 0.040,\n  CARDBOARD_UI_DISABLED: false,\n  ROTATE_INSTRUCTIONS_DISABLED: false,\n  YAW_ONLY: false,\n  BUFFER_SCALE: 0.5,\n  DIRTY_SUBMIT_FRAME_BINDINGS: false\n};\n\nfunction WebVRPolyfill(config) {\n  this.config = extend(extend({}, DefaultConfig), config);\n  this.polyfillDisplays = [];\n  this.enabled = false;\n  this.hasNative = 'getVRDisplays' in navigator;\n  this.native = {};\n  this.native.getVRDisplays = navigator.getVRDisplays;\n  this.native.VRFrameData = window.VRFrameData;\n  this.native.VRDisplay = window.VRDisplay;\n  if (!this.hasNative || this.config.PROVIDE_MOBILE_VRDISPLAY && isMobile()) {\n    this.enable();\n    this.getVRDisplays().then(function (displays) {\n      if (displays && displays[0] && displays[0].fireVRDisplayConnect_) {\n        displays[0].fireVRDisplayConnect_();\n      }\n    });\n  }\n}\nWebVRPolyfill.prototype.getPolyfillDisplays = function () {\n  if (this._polyfillDisplaysPopulated) {\n    return this.polyfillDisplays;\n  }\n  if (isMobile()) {\n    var vrDisplay = new CardboardVRDisplay({\n      ADDITIONAL_VIEWERS: this.config.ADDITIONAL_VIEWERS,\n      DEFAULT_VIEWER: this.config.DEFAULT_VIEWER,\n      MOBILE_WAKE_LOCK: this.config.MOBILE_WAKE_LOCK,\n      DEBUG: this.config.DEBUG,\n      DPDB_URL: this.config.DPDB_URL,\n      CARDBOARD_UI_DISABLED: this.config.CARDBOARD_UI_DISABLED,\n      K_FILTER: this.config.K_FILTER,\n      PREDICTION_TIME_S: this.config.PREDICTION_TIME_S,\n      ROTATE_INSTRUCTIONS_DISABLED: this.config.ROTATE_INSTRUCTIONS_DISABLED,\n      YAW_ONLY: this.config.YAW_ONLY,\n      BUFFER_SCALE: this.config.BUFFER_SCALE,\n      DIRTY_SUBMIT_FRAME_BINDINGS: this.config.DIRTY_SUBMIT_FRAME_BINDINGS\n    });\n    this.polyfillDisplays.push(vrDisplay);\n  }\n  this._polyfillDisplaysPopulated = true;\n  return this.polyfillDisplays;\n};\nWebVRPolyfill.prototype.enable = function () {\n  this.enabled = true;\n  if (this.hasNative && this.native.VRFrameData) {\n    var NativeVRFrameData = this.native.VRFrameData;\n    var nativeFrameData = new this.native.VRFrameData();\n    var nativeGetFrameData = this.native.VRDisplay.prototype.getFrameData;\n    window.VRDisplay.prototype.getFrameData = function (frameData) {\n      if (frameData instanceof NativeVRFrameData) {\n        nativeGetFrameData.call(this, frameData);\n        return;\n      }\n      nativeGetFrameData.call(this, nativeFrameData);\n      frameData.pose = nativeFrameData.pose;\n      copyArray(nativeFrameData.leftProjectionMatrix, frameData.leftProjectionMatrix);\n      copyArray(nativeFrameData.rightProjectionMatrix, frameData.rightProjectionMatrix);\n      copyArray(nativeFrameData.leftViewMatrix, frameData.leftViewMatrix);\n      copyArray(nativeFrameData.rightViewMatrix, frameData.rightViewMatrix);\n    };\n  }\n  navigator.getVRDisplays = this.getVRDisplays.bind(this);\n  window.VRDisplay = CardboardVRDisplay.VRDisplay;\n  window.VRFrameData = CardboardVRDisplay.VRFrameData;\n};\nWebVRPolyfill.prototype.getVRDisplays = function () {\n  var _this = this;\n  var config = this.config;\n  if (!this.hasNative) {\n    return Promise.resolve(this.getPolyfillDisplays());\n  }\n  return this.native.getVRDisplays.call(navigator).then(function (nativeDisplays) {\n    return nativeDisplays.length > 0 ? nativeDisplays : _this.getPolyfillDisplays();\n  });\n};\nWebVRPolyfill.version = version;\nWebVRPolyfill.VRFrameData = CardboardVRDisplay.VRFrameData;\nWebVRPolyfill.VRDisplay = CardboardVRDisplay.VRDisplay;\n\n\nvar webvrPolyfill = Object.freeze({\n\tdefault: WebVRPolyfill\n});\n\nvar require$$0 = ( webvrPolyfill && WebVRPolyfill ) || webvrPolyfill;\n\nif (typeof commonjsGlobal !== 'undefined' && commonjsGlobal.window) {\n  if (!commonjsGlobal.document) {\n    commonjsGlobal.document = commonjsGlobal.window.document;\n  }\n  if (!commonjsGlobal.navigator) {\n    commonjsGlobal.navigator = commonjsGlobal.window.navigator;\n  }\n}\nvar src = require$$0;\n\nreturn src;\n\n})));\n"]},"metadata":{},"sourceType":"script"}