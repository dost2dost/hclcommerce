{"ast":null,"code":"/* global location */\n\n/* Centralized place to reference utilities since utils is exposed to the user. */\nvar debug = require('./debug');\n\nvar deepAssign = require('deep-assign');\n\nvar device = require('./device');\n\nvar objectAssign = require('object-assign');\n\nvar objectPool = require('./object-pool');\n\nvar warn = debug('utils:warn');\nmodule.exports.bind = require('./bind');\nmodule.exports.coordinates = require('./coordinates');\nmodule.exports.debug = debug;\nmodule.exports.device = device;\nmodule.exports.entity = require('./entity');\nmodule.exports.forceCanvasResizeSafariMobile = require('./forceCanvasResizeSafariMobile');\nmodule.exports.isIE11 = require('./is-ie11');\nmodule.exports.material = require('./material');\nmodule.exports.objectPool = objectPool;\nmodule.exports.split = require('./split').split;\nmodule.exports.styleParser = require('./styleParser');\nmodule.exports.trackedControls = require('./tracked-controls');\n\nmodule.exports.checkHeadsetConnected = function () {\n  warn('`utils.checkHeadsetConnected` has moved to `utils.device.checkHeadsetConnected`');\n  return device.checkHeadsetConnected(arguments);\n};\n\nmodule.exports.isGearVR = module.exports.device.isGearVR = function () {\n  warn('`utils.isGearVR` has been deprecated, use `utils.device.isMobileVR`');\n};\n\nmodule.exports.isIOS = function () {\n  warn('`utils.isIOS` has moved to `utils.device.isIOS`');\n  return device.isIOS(arguments);\n};\n\nmodule.exports.isOculusGo = module.exports.device.isOculusGo = function () {\n  warn('`utils.isOculusGo` has been deprecated, use `utils.device.isMobileVR`');\n};\n\nmodule.exports.isMobile = function () {\n  warn('`utils.isMobile has moved to `utils.device.isMobile`');\n  return device.isMobile(arguments);\n};\n/**\n * Returns throttle function that gets called at most once every interval.\n *\n * @param {function} functionToThrottle\n * @param {number} minimumInterval - Minimal interval between calls (milliseconds).\n * @param {object} optionalContext - If given, bind function to throttle to this context.\n * @returns {function} Throttled function.\n */\n\n\nmodule.exports.throttle = function (functionToThrottle, minimumInterval, optionalContext) {\n  var lastTime;\n\n  if (optionalContext) {\n    functionToThrottle = module.exports.bind(functionToThrottle, optionalContext);\n  }\n\n  return function () {\n    var time = Date.now();\n    var sinceLastTime = typeof lastTime === 'undefined' ? minimumInterval : time - lastTime;\n\n    if (typeof lastTime === 'undefined' || sinceLastTime >= minimumInterval) {\n      lastTime = time;\n      functionToThrottle.apply(null, arguments);\n    }\n  };\n};\n/**\n * Returns throttle function that gets called at most once every interval.\n * Uses the time/timeDelta timestamps provided by the global render loop for better perf.\n *\n * @param {function} functionToThrottle\n * @param {number} minimumInterval - Minimal interval between calls (milliseconds).\n * @param {object} optionalContext - If given, bind function to throttle to this context.\n * @returns {function} Throttled function.\n */\n\n\nmodule.exports.throttleTick = function (functionToThrottle, minimumInterval, optionalContext) {\n  var lastTime;\n\n  if (optionalContext) {\n    functionToThrottle = module.exports.bind(functionToThrottle, optionalContext);\n  }\n\n  return function (time, delta) {\n    var sinceLastTime = typeof lastTime === 'undefined' ? delta : time - lastTime;\n\n    if (typeof lastTime === 'undefined' || sinceLastTime >= minimumInterval) {\n      lastTime = time;\n      functionToThrottle(time, sinceLastTime);\n    }\n  };\n};\n/**\n * Returns debounce function that gets called only once after a set of repeated calls.\n *\n * @param {function} functionToDebounce\n * @param {number} wait - Time to wait for repeated function calls (milliseconds).\n * @param {boolean} immediate - Calls the function immediately regardless of if it should be waiting.\n * @returns {function} Debounced function.\n */\n\n\nmodule.exports.debounce = function (func, wait, immediate) {\n  var timeout;\n  return function () {\n    var context = this;\n    var args = arguments;\n\n    var later = function () {\n      timeout = null;\n      if (!immediate) func.apply(context, args);\n    };\n\n    var callNow = immediate && !timeout;\n    clearTimeout(timeout);\n    timeout = setTimeout(later, wait);\n    if (callNow) func.apply(context, args);\n  };\n};\n/**\n * Mix the properties of source object(s) into a destination object.\n *\n * @param  {object} dest - The object to which properties will be copied.\n * @param  {...object} source - The object(s) from which properties will be copied.\n */\n\n\nmodule.exports.extend = objectAssign;\nmodule.exports.extendDeep = deepAssign;\n\nmodule.exports.clone = function (obj) {\n  return JSON.parse(JSON.stringify(obj));\n};\n/**\n * Checks if two values are equal.\n * Includes objects and arrays and nested objects and arrays.\n * Try to keep this function performant as it will be called often to see if a component\n * should be updated.\n *\n * @param {object} a - First object.\n * @param {object} b - Second object.\n * @returns {boolean} Whether two objects are deeply equal.\n */\n\n\nvar deepEqual = function () {\n  var arrayPool = objectPool.createPool(function () {\n    return [];\n  });\n  return function (a, b) {\n    var key;\n    var keysA;\n    var keysB;\n    var i;\n    var valA;\n    var valB; // If not objects or arrays, compare as values.\n\n    if (a === undefined || b === undefined || a === null || b === null || !(a && b && a.constructor === Object && b.constructor === Object || a.constructor === Array && b.constructor === Array)) {\n      return a === b;\n    } // Different number of keys, not equal.\n\n\n    keysA = arrayPool.use();\n    keysB = arrayPool.use();\n    keysA.length = 0;\n    keysB.length = 0;\n\n    for (key in a) {\n      keysA.push(key);\n    }\n\n    for (key in b) {\n      keysB.push(key);\n    }\n\n    if (keysA.length !== keysB.length) {\n      arrayPool.recycle(keysA);\n      arrayPool.recycle(keysB);\n      return false;\n    } // Return `false` at the first sign of inequality.\n\n\n    for (i = 0; i < keysA.length; ++i) {\n      valA = a[keysA[i]];\n      valB = b[keysA[i]]; // Check nested array and object.\n\n      if (typeof valA === 'object' || typeof valB === 'object' || Array.isArray(valA) && Array.isArray(valB)) {\n        if (valA === valB) {\n          continue;\n        }\n\n        if (!deepEqual(valA, valB)) {\n          arrayPool.recycle(keysA);\n          arrayPool.recycle(keysB);\n          return false;\n        }\n      } else if (valA !== valB) {\n        arrayPool.recycle(keysA);\n        arrayPool.recycle(keysB);\n        return false;\n      }\n    }\n\n    arrayPool.recycle(keysA);\n    arrayPool.recycle(keysB);\n    return true;\n  };\n}();\n\nmodule.exports.deepEqual = deepEqual;\n/**\n * Computes the difference between two objects.\n *\n * @param {object} a - First object to compare (e.g., oldData).\n * @param {object} b - Second object to compare (e.g., newData).\n * @returns {object}\n *   Difference object where set of keys note which values were not equal, and values are\n *   `b`'s values.\n */\n\nmodule.exports.diff = function () {\n  var keys = [];\n  return function (a, b, targetObject) {\n    var aVal;\n    var bVal;\n    var bKey;\n    var diff;\n    var key;\n    var i;\n    var isComparingObjects;\n    diff = targetObject || {}; // Collect A keys.\n\n    keys.length = 0;\n\n    for (key in a) {\n      keys.push(key);\n    }\n\n    if (!b) {\n      return diff;\n    } // Collect B keys.\n\n\n    for (bKey in b) {\n      if (keys.indexOf(bKey) === -1) {\n        keys.push(bKey);\n      }\n    }\n\n    for (i = 0; i < keys.length; i++) {\n      key = keys[i];\n      aVal = a[key];\n      bVal = b[key];\n      isComparingObjects = aVal && bVal && aVal.constructor === Object && bVal.constructor === Object;\n\n      if (isComparingObjects && !deepEqual(aVal, bVal) || !isComparingObjects && aVal !== bVal) {\n        diff[key] = bVal;\n      }\n    }\n\n    return diff;\n  };\n}();\n/**\n * Returns whether we should capture this keyboard event for keyboard shortcuts.\n * @param {Event} event Event object.\n * @returns {Boolean} Whether the key event should be captured.\n */\n\n\nmodule.exports.shouldCaptureKeyEvent = function (event) {\n  if (event.metaKey) {\n    return false;\n  }\n\n  return document.activeElement === document.body;\n};\n/**\n * Splits a string into an array based on a delimiter.\n *\n * @param   {string=} [str='']        Source string\n * @param   {string=} [delimiter=' '] Delimiter to use\n * @returns {array}                   Array of delimited strings\n */\n\n\nmodule.exports.splitString = function (str, delimiter) {\n  if (typeof delimiter === 'undefined') {\n    delimiter = ' ';\n  } // First collapse the whitespace (or whatever the delimiter is).\n\n\n  var regex = new RegExp(delimiter, 'g');\n  str = (str || '').replace(regex, delimiter); // Then split.\n\n  return str.split(delimiter);\n};\n/**\n * Extracts data from the element given an object that contains expected keys.\n *\n * @param {Element} Source element.\n * @param {Object} [defaults={}] Object of default key-value pairs.\n * @returns {Object}\n */\n\n\nmodule.exports.getElData = function (el, defaults) {\n  defaults = defaults || {};\n  var data = {};\n  Object.keys(defaults).forEach(copyAttribute);\n\n  function copyAttribute(key) {\n    if (el.hasAttribute(key)) {\n      data[key] = el.getAttribute(key);\n    }\n  }\n\n  return data;\n};\n/**\n * Retrieves querystring value.\n * @param  {String} name Name of querystring key.\n * @return {String}      Value\n */\n\n\nmodule.exports.getUrlParameter = function (name) {\n  // eslint-disable-next-line no-useless-escape\n  name = name.replace(/[\\[]/, '\\\\[').replace(/[\\]]/, '\\\\]');\n  var regex = new RegExp('[\\\\?&]' + name + '=([^&#]*)');\n  var results = regex.exec(location.search);\n  return results === null ? '' : decodeURIComponent(results[1].replace(/\\+/g, ' '));\n};\n/**\n * Detects whether context is within iframe.\n */\n\n\nmodule.exports.isIframed = function () {\n  return window.top !== window.self;\n};\n/**\n * Finds all elements under the element that have the isScene\n * property set to true\n */\n\n\nmodule.exports.findAllScenes = function (el) {\n  var matchingElements = [];\n  var allElements = el.getElementsByTagName('*');\n\n  for (var i = 0, n = allElements.length; i < n; i++) {\n    if (allElements[i].isScene) {\n      // Element exists with isScene set.\n      matchingElements.push(allElements[i]);\n    }\n  }\n\n  return matchingElements;\n}; // Must be at bottom to avoid circular dependency.\n\n\nmodule.exports.srcLoader = require('./src-loader');","map":{"version":3,"sources":["C:/Users/Hannuri/Desktop/RoyalCyber/my-first-app/node_modules/aframe/src/utils/index.js"],"names":["debug","require","deepAssign","device","objectAssign","objectPool","warn","module","exports","bind","coordinates","entity","forceCanvasResizeSafariMobile","isIE11","material","split","styleParser","trackedControls","checkHeadsetConnected","arguments","isGearVR","isIOS","isOculusGo","isMobile","throttle","functionToThrottle","minimumInterval","optionalContext","lastTime","time","Date","now","sinceLastTime","apply","throttleTick","delta","debounce","func","wait","immediate","timeout","context","args","later","callNow","clearTimeout","setTimeout","extend","extendDeep","clone","obj","JSON","parse","stringify","deepEqual","arrayPool","createPool","a","b","key","keysA","keysB","i","valA","valB","undefined","constructor","Object","Array","use","length","push","recycle","isArray","diff","keys","targetObject","aVal","bVal","bKey","isComparingObjects","indexOf","shouldCaptureKeyEvent","event","metaKey","document","activeElement","body","splitString","str","delimiter","regex","RegExp","replace","getElData","el","defaults","data","forEach","copyAttribute","hasAttribute","getAttribute","getUrlParameter","name","results","exec","location","search","decodeURIComponent","isIframed","window","top","self","findAllScenes","matchingElements","allElements","getElementsByTagName","n","isScene","srcLoader"],"mappings":"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","sourcesContent":["/* global location */\n\n/* Centralized place to reference utilities since utils is exposed to the user. */\nvar debug = require('./debug');\nvar deepAssign = require('deep-assign');\nvar device = require('./device');\nvar objectAssign = require('object-assign');\nvar objectPool = require('./object-pool');\n\nvar warn = debug('utils:warn');\n\nmodule.exports.bind = require('./bind');\nmodule.exports.coordinates = require('./coordinates');\nmodule.exports.debug = debug;\nmodule.exports.device = device;\nmodule.exports.entity = require('./entity');\nmodule.exports.forceCanvasResizeSafariMobile = require('./forceCanvasResizeSafariMobile');\nmodule.exports.isIE11 = require('./is-ie11');\nmodule.exports.material = require('./material');\nmodule.exports.objectPool = objectPool;\nmodule.exports.split = require('./split').split;\nmodule.exports.styleParser = require('./styleParser');\nmodule.exports.trackedControls = require('./tracked-controls');\n\nmodule.exports.checkHeadsetConnected = function () {\n  warn('`utils.checkHeadsetConnected` has moved to `utils.device.checkHeadsetConnected`');\n  return device.checkHeadsetConnected(arguments);\n};\nmodule.exports.isGearVR = module.exports.device.isGearVR = function () {\n  warn('`utils.isGearVR` has been deprecated, use `utils.device.isMobileVR`');\n};\nmodule.exports.isIOS = function () {\n  warn('`utils.isIOS` has moved to `utils.device.isIOS`');\n  return device.isIOS(arguments);\n};\nmodule.exports.isOculusGo = module.exports.device.isOculusGo = function () {\n  warn('`utils.isOculusGo` has been deprecated, use `utils.device.isMobileVR`');\n};\nmodule.exports.isMobile = function () {\n  warn('`utils.isMobile has moved to `utils.device.isMobile`');\n  return device.isMobile(arguments);\n};\n\n/**\n * Returns throttle function that gets called at most once every interval.\n *\n * @param {function} functionToThrottle\n * @param {number} minimumInterval - Minimal interval between calls (milliseconds).\n * @param {object} optionalContext - If given, bind function to throttle to this context.\n * @returns {function} Throttled function.\n */\nmodule.exports.throttle = function (functionToThrottle, minimumInterval, optionalContext) {\n  var lastTime;\n  if (optionalContext) {\n    functionToThrottle = module.exports.bind(functionToThrottle, optionalContext);\n  }\n  return function () {\n    var time = Date.now();\n    var sinceLastTime = typeof lastTime === 'undefined' ? minimumInterval : time - lastTime;\n    if (typeof lastTime === 'undefined' || (sinceLastTime >= minimumInterval)) {\n      lastTime = time;\n      functionToThrottle.apply(null, arguments);\n    }\n  };\n};\n\n/**\n * Returns throttle function that gets called at most once every interval.\n * Uses the time/timeDelta timestamps provided by the global render loop for better perf.\n *\n * @param {function} functionToThrottle\n * @param {number} minimumInterval - Minimal interval between calls (milliseconds).\n * @param {object} optionalContext - If given, bind function to throttle to this context.\n * @returns {function} Throttled function.\n */\nmodule.exports.throttleTick = function (functionToThrottle, minimumInterval, optionalContext) {\n  var lastTime;\n  if (optionalContext) {\n    functionToThrottle = module.exports.bind(functionToThrottle, optionalContext);\n  }\n  return function (time, delta) {\n    var sinceLastTime = typeof lastTime === 'undefined' ? delta : time - lastTime;\n    if (typeof lastTime === 'undefined' || (sinceLastTime >= minimumInterval)) {\n      lastTime = time;\n      functionToThrottle(time, sinceLastTime);\n    }\n  };\n};\n\n/**\n * Returns debounce function that gets called only once after a set of repeated calls.\n *\n * @param {function} functionToDebounce\n * @param {number} wait - Time to wait for repeated function calls (milliseconds).\n * @param {boolean} immediate - Calls the function immediately regardless of if it should be waiting.\n * @returns {function} Debounced function.\n */\nmodule.exports.debounce = function (func, wait, immediate) {\n  var timeout;\n  return function () {\n    var context = this;\n    var args = arguments;\n    var later = function () {\n      timeout = null;\n      if (!immediate) func.apply(context, args);\n    };\n    var callNow = immediate && !timeout;\n    clearTimeout(timeout);\n    timeout = setTimeout(later, wait);\n    if (callNow) func.apply(context, args);\n  };\n};\n\n/**\n * Mix the properties of source object(s) into a destination object.\n *\n * @param  {object} dest - The object to which properties will be copied.\n * @param  {...object} source - The object(s) from which properties will be copied.\n */\nmodule.exports.extend = objectAssign;\nmodule.exports.extendDeep = deepAssign;\n\nmodule.exports.clone = function (obj) {\n  return JSON.parse(JSON.stringify(obj));\n};\n\n/**\n * Checks if two values are equal.\n * Includes objects and arrays and nested objects and arrays.\n * Try to keep this function performant as it will be called often to see if a component\n * should be updated.\n *\n * @param {object} a - First object.\n * @param {object} b - Second object.\n * @returns {boolean} Whether two objects are deeply equal.\n */\nvar deepEqual = (function () {\n  var arrayPool = objectPool.createPool(function () { return []; });\n\n  return function (a, b) {\n    var key;\n    var keysA;\n    var keysB;\n    var i;\n    var valA;\n    var valB;\n\n    // If not objects or arrays, compare as values.\n    if (a === undefined || b === undefined || a === null || b === null ||\n        !(a && b && (a.constructor === Object && b.constructor === Object) ||\n                    (a.constructor === Array && b.constructor === Array))) {\n      return a === b;\n    }\n\n    // Different number of keys, not equal.\n    keysA = arrayPool.use();\n    keysB = arrayPool.use();\n    keysA.length = 0;\n    keysB.length = 0;\n    for (key in a) { keysA.push(key); }\n    for (key in b) { keysB.push(key); }\n    if (keysA.length !== keysB.length) {\n      arrayPool.recycle(keysA);\n      arrayPool.recycle(keysB);\n      return false;\n    }\n\n    // Return `false` at the first sign of inequality.\n    for (i = 0; i < keysA.length; ++i) {\n      valA = a[keysA[i]];\n      valB = b[keysA[i]];\n      // Check nested array and object.\n      if ((typeof valA === 'object' || typeof valB === 'object') ||\n          (Array.isArray(valA) && Array.isArray(valB))) {\n        if (valA === valB) { continue; }\n        if (!deepEqual(valA, valB)) {\n          arrayPool.recycle(keysA);\n          arrayPool.recycle(keysB);\n          return false;\n        }\n      } else if (valA !== valB) {\n        arrayPool.recycle(keysA);\n        arrayPool.recycle(keysB);\n        return false;\n      }\n    }\n\n    arrayPool.recycle(keysA);\n    arrayPool.recycle(keysB);\n    return true;\n  };\n})();\nmodule.exports.deepEqual = deepEqual;\n\n/**\n * Computes the difference between two objects.\n *\n * @param {object} a - First object to compare (e.g., oldData).\n * @param {object} b - Second object to compare (e.g., newData).\n * @returns {object}\n *   Difference object where set of keys note which values were not equal, and values are\n *   `b`'s values.\n */\nmodule.exports.diff = (function () {\n  var keys = [];\n\n  return function (a, b, targetObject) {\n    var aVal;\n    var bVal;\n    var bKey;\n    var diff;\n    var key;\n    var i;\n    var isComparingObjects;\n\n    diff = targetObject || {};\n\n    // Collect A keys.\n    keys.length = 0;\n    for (key in a) { keys.push(key); }\n\n    if (!b) { return diff; }\n\n    // Collect B keys.\n    for (bKey in b) {\n      if (keys.indexOf(bKey) === -1) {\n        keys.push(bKey);\n      }\n    }\n\n    for (i = 0; i < keys.length; i++) {\n      key = keys[i];\n      aVal = a[key];\n      bVal = b[key];\n      isComparingObjects = aVal && bVal &&\n                          aVal.constructor === Object && bVal.constructor === Object;\n      if ((isComparingObjects && !deepEqual(aVal, bVal)) ||\n          (!isComparingObjects && aVal !== bVal)) {\n        diff[key] = bVal;\n      }\n    }\n    return diff;\n  };\n})();\n\n/**\n * Returns whether we should capture this keyboard event for keyboard shortcuts.\n * @param {Event} event Event object.\n * @returns {Boolean} Whether the key event should be captured.\n */\nmodule.exports.shouldCaptureKeyEvent = function (event) {\n  if (event.metaKey) { return false; }\n  return document.activeElement === document.body;\n};\n\n/**\n * Splits a string into an array based on a delimiter.\n *\n * @param   {string=} [str='']        Source string\n * @param   {string=} [delimiter=' '] Delimiter to use\n * @returns {array}                   Array of delimited strings\n */\nmodule.exports.splitString = function (str, delimiter) {\n  if (typeof delimiter === 'undefined') { delimiter = ' '; }\n  // First collapse the whitespace (or whatever the delimiter is).\n  var regex = new RegExp(delimiter, 'g');\n  str = (str || '').replace(regex, delimiter);\n  // Then split.\n  return str.split(delimiter);\n};\n\n/**\n * Extracts data from the element given an object that contains expected keys.\n *\n * @param {Element} Source element.\n * @param {Object} [defaults={}] Object of default key-value pairs.\n * @returns {Object}\n */\nmodule.exports.getElData = function (el, defaults) {\n  defaults = defaults || {};\n  var data = {};\n  Object.keys(defaults).forEach(copyAttribute);\n  function copyAttribute (key) {\n    if (el.hasAttribute(key)) {\n      data[key] = el.getAttribute(key);\n    }\n  }\n  return data;\n};\n\n/**\n * Retrieves querystring value.\n * @param  {String} name Name of querystring key.\n * @return {String}      Value\n */\nmodule.exports.getUrlParameter = function (name) {\n  // eslint-disable-next-line no-useless-escape\n  name = name.replace(/[\\[]/, '\\\\[').replace(/[\\]]/, '\\\\]');\n  var regex = new RegExp('[\\\\?&]' + name + '=([^&#]*)');\n  var results = regex.exec(location.search);\n  return results === null ? '' : decodeURIComponent(results[1].replace(/\\+/g, ' '));\n};\n\n/**\n * Detects whether context is within iframe.\n */\nmodule.exports.isIframed = function () {\n  return window.top !== window.self;\n};\n\n/**\n * Finds all elements under the element that have the isScene\n * property set to true\n */\nmodule.exports.findAllScenes = function (el) {\n  var matchingElements = [];\n  var allElements = el.getElementsByTagName('*');\n  for (var i = 0, n = allElements.length; i < n; i++) {\n    if (allElements[i].isScene) {\n      // Element exists with isScene set.\n      matchingElements.push(allElements[i]);\n    }\n  }\n  return matchingElements;\n};\n\n// Must be at bottom to avoid circular dependency.\nmodule.exports.srcLoader = require('./src-loader');\n"]},"metadata":{},"sourceType":"script"}