{"ast":null,"code":"var _jsxFileName = \"F:\\\\_HCLCommece\\\\src\\\\component\\\\ShoppingCart.js\";\nimport React, { Component } from 'react';\nimport { Link, Redirect } from 'react-router-dom';\nimport { connect } from 'react-redux';\nimport ShoppingCartItemDetails from './ShoppingCartItemDetails';\n\nclass ShoppingCart extends Component {\n  constructor(props) {\n    super(props);\n    this.itemInCart = '0';\n    this._isMount = false;\n\n    this.showCart = event => {// this.setState({showProductItems: true})\n      //console.log(this.state.showProductItems+\"show popup\")\n      //this._isMount = false\n    };\n\n    this.hideCart = event => {//this.setState({showProductItems: false})\n      // console.log(this.state.showProductItems+\"close popup\")\n    };\n\n    this.fetchAPI = (itemId, qty) => {\n      // console.log(itemId+\"<<<id\"+qty)\n      const payloads = {\n        orderId: \".\",\n        orderItem: [{\n          \"productId\": itemId,\n          //\"12326\",\n          \"quantity\": qty //\"1\"\n\n        }],\n        \"x_calculateOrder\": \"0\",\n        \"x_inventoryValidation\": \"true\"\n      }; //https://192.168.17.91/wcs/resources/store/1/categoryview/byParentCategory/5\n\n      fetch('https://192.168.17.91:5443/wcs/resources/store/1/cart?responseFormat=json', {\n        method: 'POST',\n        headers: {\n          //'accept': 'application/json',\n          'Content-type': 'application/json',\n          'WCToken': this.props.getWCToken,\n          'WCTrustedToken': this.props.getWCTrustedToken\n        },\n        body: JSON.stringify(payloads)\n      }).then(res => res.json()).then(data => {\n        console.log(data.orderId);\n      }, error => {\n        //API not accessable or through error            \n        console.log(\"Error Data>>\" + error);\n      }); //this.itemInCart += qty;\n      //this.getCartDetails();\n    };\n\n    this.getCartDetails = () => {\n      console.log(this.props.getWCToken + \"<<<>>>\" + this.props.getWCTrustedToken);\n      fetch('https://192.168.17.91:5443/wcs/resources/store/1/cart/@self', {\n        //method: 'GET',\n        headers: {\n          'Content-type': 'application/json',\n          'WCToken': this.props.getWCToken,\n          'WCTrustedToken': this.props.getWCTrustedToken\n        }\n      }).then(rs => rs.json()).then(rslt => {\n        this.itemInCart = rslt;\n        console.log(this.itemInCart.recordSetTotal);\n      }, error => {\n        console.log('Server Error');\n      });\n    };\n\n    this.loginGuestAPI = () => {\n      if (this._isMount) {\n        fetch('https://192.168.17.91:5443/wcs/resources/store/1/guestidentity', {\n          method: 'POST',\n          headers: {\n            //'accept': 'application/json',\n            'Content-type': 'application/json'\n          }\n        }).then(res => res.json()).then(data => {\n          console.log(\"----------------------login \" + this.props.getWCTrustedToken + \"---------------------------\");\n          this.setState({\n            guestUserToken: data.WCToken\n          });\n          console.log(data);\n\n          if (data.WCToken != undefined) {\n            this.props.loginGuestUser('Guest', data.resourceName, data.braintreeToken, data.WCToken, data.userId, data.WCTrustedToken, data.personalizationID);\n          }\n        }, error => {\n          //API not accessable or through error            \n          console.log(\"Error Data>>\" + error);\n        });\n      }\n\n      this.fetchAPI(this.props.callAPI.skuId, this.props.callAPI.numQty);\n    };\n\n    this.state = {\n      showProductItems: false,\n      guestUserToken: '',\n      itemInCart: '0'\n    };\n  }\n\n  componentDidUpdate(prevProps, prevState) {\n    if (prevProps != this.props) {\n      console.log('componente did got changed');\n      this.showCart();\n    }\n  }\n\n  componentDidMount(props) {\n    this._isMount = true;\n\n    if (this._isMount) {\n      //this.setState({showProductItems: true});\n      // console.log(this.props.callAPI+'props'+this.props.showPopup)\n      if (this.props.showPopup !== undefined || this.props.callAPI != undefined) {\n        this.showCart();\n\n        if (this.props.callAPI != undefined) {\n          //console.log(this.props.callAPI.skuId +\"<API called\"+this.props.callAPI.numQty)\n          if (this.props.getWCToken) {//this.fetchAPI(this.props.callAPI.skuId, this.props.callAPI.numQty)  \n          } else {//this.loginGuestAPI();\n            }\n        }\n      }\n    }\n\n    console.log('compnentdid mount');\n  }\n\n  componentWillUnmount() {\n    this._isMount = false;\n    console.log('unMount' + this.state.showProductItems);\n  }\n\n  render() {\n    // console.log(this.rslt+'render') \n    //    if(this.state.showProductItems)\n    //    {\n    return React.createElement(\"div\", {\n      id: \"cartDetailPage\",\n      className: \"cartDetailPage\",\n      onClick: this.props.closePopup !== undefined ? this.props.closePopup.bind(this, this.itemInCart.recordSetTotal) : null,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 144\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"closeBtn\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 147\n      },\n      __self: this\n    }, \"x\"), React.createElement(\"div\", {\n      className: \"cartDetail\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 150\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"cartItems\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 151\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 152\n      },\n      __self: this\n    }, this.props.getCartQuantity, React.createElement(\"span\", {\n      className: \"itemInCart\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 152\n      },\n      __self: this\n    }), \" in Cart\")), React.createElement(\"div\", {\n      className: \"cartTotal\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 154\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 155\n      },\n      __self: this\n    }, \"Cart Subtotal: \", React.createElement(\"span\", {\n      className: \"cartSubTotal\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 155\n      },\n      __self: this\n    }), \"$\", this.props.getSubTotal)), React.createElement(\"div\", {\n      className: \"clearBoth\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 157\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"checkoutAndPaypal\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 159\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"paypal\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 163\n      },\n      __self: this\n    })), this.props.getProductsInCart.map((item, index) => React.createElement(Link, {\n      to: `/Product/?${item.uniqueID}`,\n      key: index,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 169\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"eachProduct\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 170\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"thumbnail\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 171\n      },\n      __self: this\n    }, React.createElement(\"img\", {\n      src: `${this.props.getAppSet.serverBaseURL}${item.thumbnail}`,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 171\n      },\n      __self: this\n    }), \" \"), React.createElement(\"div\", {\n      className: \"otherInfo\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 172\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"clickText\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 173\n      },\n      __self: this\n    }, React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 173\n      },\n      __self: this\n    }, item.longDescription)), React.createElement(\"div\", {\n      className: \"price\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 176\n      },\n      __self: this\n    }, \"$\", parseFloat(item.Price) * parseFloat(item.quantity)), React.createElement(\"div\", {\n      className: \"qtyEditDelete\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 177\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"qty\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 178\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 179\n      },\n      __self: this\n    }, \"Qty:\"), React.createElement(\"span\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 180\n      },\n      __self: this\n    }, item.quantity)), React.createElement(\"div\", {\n      className: \"clearBoth\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 185\n      },\n      __self: this\n    }))), React.createElement(\"div\", {\n      className: \"clearBoth\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 188\n      },\n      __self: this\n    })))), React.createElement(\"div\", {\n      className: \"viewAndEdit paypal\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 193\n      },\n      __self: this\n    }, React.createElement(Link, {\n      to: \"/CartPage\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 193\n      },\n      __self: this\n    }, \"Go to Cart\"))); // } \n    //    else{\n    //     return(<div>No show</div>);\n    //    }\n  }\n\n}\n\nconst mapStateToProps = state => {\n  return {\n    getResourceName: state.userToken.resourceName,\n    getWCToken: state.userToken.WCToken,\n    getWCTrustedToken: state.userToken.WCTrustedToken,\n    getProductsInCart: state.cart.products,\n    getCartQuantity: state.cart.cartQuantity,\n    getSubTotal: state.cart.subTotal,\n    getAppSet: state.getAppSet\n  };\n};\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    loginGuestUser: (email, resourceName, braintreeToken, tokn, userId, WCTrustedToken, personalizationID) => {\n      dispatch({\n        type: 'LOGED_USER',\n        payloads: {\n          email,\n          resourceName,\n          braintreeToken,\n          tokn,\n          userId,\n          WCTrustedToken,\n          personalizationID\n        }\n      });\n    }\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ShoppingCart);","map":{"version":3,"sources":["F:/_HCLCommece/src/component/ShoppingCart.js"],"names":["React","Component","Link","Redirect","connect","ShoppingCartItemDetails","ShoppingCart","constructor","props","itemInCart","_isMount","showCart","event","hideCart","fetchAPI","itemId","qty","payloads","orderId","orderItem","fetch","method","headers","getWCToken","getWCTrustedToken","body","JSON","stringify","then","res","json","data","console","log","error","getCartDetails","rs","rslt","recordSetTotal","loginGuestAPI","setState","guestUserToken","WCToken","undefined","loginGuestUser","resourceName","braintreeToken","userId","WCTrustedToken","personalizationID","callAPI","skuId","numQty","state","showProductItems","componentDidUpdate","prevProps","prevState","componentDidMount","showPopup","componentWillUnmount","render","closePopup","bind","getCartQuantity","getSubTotal","getProductsInCart","map","item","index","uniqueID","getAppSet","serverBaseURL","thumbnail","longDescription","parseFloat","Price","quantity","mapStateToProps","getResourceName","userToken","cart","products","cartQuantity","subTotal","mapDispatchToProps","dispatch","email","tokn","type"],"mappings":"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","sourcesContent":["import React, {Component} from 'react'\r\nimport {Link, Redirect} from 'react-router-dom';\r\nimport {connect} from 'react-redux'\r\nimport ShoppingCartItemDetails from './ShoppingCartItemDetails'\r\nclass ShoppingCart extends Component{\r\n    constructor(props){\r\n        super(props)\r\n        this.state={\r\n            showProductItems: false,\r\n            guestUserToken: '',\r\n            itemInCart : '0'\r\n        }\r\n    }\r\n    itemInCart = '0'\r\n\r\n    _isMount = false;\r\n    showCart = (event) => {\r\n       // this.setState({showProductItems: true})\r\n        //console.log(this.state.showProductItems+\"show popup\")\r\n        //this._isMount = false\r\n    }\r\n    hideCart = (event) => {\r\n        //this.setState({showProductItems: false})\r\n       // console.log(this.state.showProductItems+\"close popup\")\r\n    }\r\n    componentDidUpdate(prevProps, prevState){\r\n        if(prevProps != this.props){\r\n            console.log('componente did got changed')\r\n            this.showCart()\r\n        }\r\n    }\r\n    componentDidMount(props){   \r\n        this._isMount = true\r\n        if (this._isMount) {\r\n            //this.setState({showProductItems: true});\r\n           \r\n       // console.log(this.props.callAPI+'props'+this.props.showPopup)\r\n        \r\n        if(this.props.showPopup !== undefined  || this.props.callAPI != undefined){\r\n                this.showCart()\r\n                if(this.props.callAPI != undefined){\r\n                    //console.log(this.props.callAPI.skuId +\"<API called\"+this.props.callAPI.numQty)\r\n                    if(this.props.getWCToken){\r\n                        //this.fetchAPI(this.props.callAPI.skuId, this.props.callAPI.numQty)  \r\n                    }\r\n                    else{\r\n                        //this.loginGuestAPI();\r\n                    }\r\n                }\r\n         }\r\n        }  \r\n         console.log('compnentdid mount')\r\n    } \r\n    componentWillUnmount(){\r\n        this._isMount = false;\r\n        console.log('unMount'+this.state.showProductItems)\r\n    } \r\n    fetchAPI = (itemId, qty) => {\r\n       // console.log(itemId+\"<<<id\"+qty)\r\n        const payloads = {\r\n            orderId: \".\",  \r\n            orderItem:  [\r\n                {\r\n                    \"productId\": itemId,//\"12326\",\r\n                    \"quantity\": qty //\"1\"\r\n                }\r\n            ],\r\n            \"x_calculateOrder\": \"0\",\r\n            \"x_inventoryValidation\": \"true\", \r\n        } //https://192.168.17.91/wcs/resources/store/1/categoryview/byParentCategory/5\r\n        fetch('https://192.168.17.91:5443/wcs/resources/store/1/cart?responseFormat=json',{\r\n            method: 'POST',\r\n            headers: {\r\n                //'accept': 'application/json',\r\n                'Content-type': 'application/json',\r\n                'WCToken':  this.props.getWCToken,\r\n                'WCTrustedToken': this.props.getWCTrustedToken\r\n\r\n            },\r\n            body: JSON.stringify(payloads)\r\n        })\r\n        .then(res=>res.json())\r\n        .then((data)=>{\r\n             console.log(data.orderId)\r\n        },\r\n        (error) => {//API not accessable or through error            \r\n           \r\n            console.log( \"Error Data>>\"+error);\r\n        }); \r\n        //this.itemInCart += qty;\r\n        //this.getCartDetails();\r\n    }\r\n    getCartDetails = () => {\r\n        console.log(this.props.getWCToken+\"<<<>>>\"+this.props.getWCTrustedToken)\r\n        fetch('https://192.168.17.91:5443/wcs/resources/store/1/cart/@self', {\r\n            //method: 'GET',\r\n            headers: {\r\n                'Content-type': 'application/json',\r\n                'WCToken':  this.props.getWCToken,\r\n                'WCTrustedToken': this.props.getWCTrustedToken\r\n            }\r\n        })\r\n        .then(rs=>rs.json())\r\n        .then((rslt)=>{\r\n            this.itemInCart  = rslt;\r\n            console.log(this.itemInCart.recordSetTotal)\r\n            \r\n        },\r\n            (error)=>{console.log('Server Error')\r\n        });\r\n    }\r\n    loginGuestAPI = () => {\r\n        if (this._isMount) {\r\n        fetch('https://192.168.17.91:5443/wcs/resources/store/1/guestidentity',{\r\n            method: 'POST',\r\n            headers: {\r\n                //'accept': 'application/json',\r\n                'Content-type': 'application/json' \r\n            } \r\n        })\r\n        .then(res=>res.json())\r\n        .then((data)=>{\r\n            console.log(\"----------------------login \"+this.props.getWCTrustedToken+\"---------------------------\")\r\n            this.setState({guestUserToken: data.WCToken})\r\n            console.log(data)\r\n            \r\n            if(data.WCToken != undefined){\r\n                this.props.loginGuestUser('Guest', data.resourceName, data.braintreeToken, data.WCToken, data.userId,  data.WCTrustedToken, data.personalizationID);\r\n            }\r\n        },\r\n        (error) => {//API not accessable or through error            \r\n           \r\n            console.log( \"Error Data>>\"+error);\r\n        }); \r\n         \r\n        }\r\n        this.fetchAPI(this.props.callAPI.skuId, this.props.callAPI.numQty)  \r\n    }\r\n    render(){\r\n       // console.log(this.rslt+'render') \r\n        //    if(this.state.showProductItems)\r\n        //    {\r\n            return (\r\n                <div   id=\"cartDetailPage\" className=\"cartDetailPage\" \r\n                onClick={this.props.closePopup !== undefined ? this.props.closePopup.bind(this, this.itemInCart.recordSetTotal) : null}>\r\n                     {/* <ShoppingCartItemDetails /> */}\r\n                    <div className=\"closeBtn\"  >\r\n                        x\r\n                    </div>\r\n                    <div className=\"cartDetail\">\r\n                        <div className=\"cartItems\">\r\n                            <span>{this.props.getCartQuantity}<span className=\"itemInCart\"></span> in Cart</span>\r\n                        </div>\r\n                        <div className=\"cartTotal\">\r\n            <span>Cart Subtotal: <span className=\"cartSubTotal\"></span>${this.props.getSubTotal}</span>\r\n                        </div>\r\n                        <div className=\"clearBoth\"></div>\r\n                    </div>\r\n                    <div className=\"checkoutAndPaypal\">\r\n                        {/* <div className=\"proceed\">\r\n                        <Link to=\"/CartPage\">Proceed to Checkout</Link>\r\n                        </div> */}\r\n                        <div className=\"paypal\">\r\n                            {/* <a href=\"#\">PayPal</a> */}\r\n                        </div>\r\n                    </div>\r\n\r\n                    {this.props.getProductsInCart.map( (item, index) => (   \r\n                    <Link to = {`/Product/?${item.uniqueID}`} key={index}>\r\n                    <div className=\"eachProduct\"  >\r\n                        <div className=\"thumbnail\"><img src={`${this.props.getAppSet.serverBaseURL}${item.thumbnail}`} /> </div>\r\n                        <div className=\"otherInfo\">\r\n                            <div className=\"clickText\"><p>\r\n                                        {item.longDescription}\r\n                                </p></div>\r\n                            <div className=\"price\">${parseFloat(item.Price)*parseFloat(item.quantity)}</div>\r\n                            <div className=\"qtyEditDelete\">\r\n                                <div className=\"qty\">\r\n                                    <span>Qty:</span>\r\n                                    <span>{item.quantity}</span>\r\n                                    {/* <input type=\"text\" placeholder=\"1\" value={item.quantity}/> */}\r\n                                </div>\r\n                                {/* <div className=\"edit\"><a href=\"#\">Edit </a></div>\r\n                                <div className=\"delete\"><a href=\"#\"> Delete</a></div> */}\r\n                                <div className=\"clearBoth\"></div>\r\n                            </div>\r\n                        </div>\r\n                        <div className=\"clearBoth\"></div>\r\n                    </div> \r\n                    </Link>\r\n                    ))}\r\n\r\n                    <div className=\"viewAndEdit paypal\"><Link to=\"/CartPage\">Go to Cart</Link></div>\r\n                </div>\r\n            );\r\n           \r\n        // } \r\n        //    else{\r\n        //     return(<div>No show</div>);\r\n        //    }\r\n           \r\n    }\r\n}\r\nconst mapStateToProps = (state) => {\r\n    return {\r\n        getResourceName : state.userToken.resourceName,\r\n        getWCToken : state.userToken.WCToken,\r\n        getWCTrustedToken: state.userToken.WCTrustedToken,\r\n        getProductsInCart : state.cart.products,\r\n        getCartQuantity: state.cart.cartQuantity,\r\n        getSubTotal :state.cart.subTotal,\r\n\r\n        getAppSet: state.getAppSet\r\n    }\r\n};\r\n\r\nconst mapDispatchToProps = (dispatch) =>{\r\n    return{\r\n       loginGuestUser: (email, resourceName,  braintreeToken, tokn, userId, WCTrustedToken, personalizationID ) => {\r\n           dispatch({\r\n                   type: 'LOGED_USER', payloads: {email, resourceName, braintreeToken,  tokn, userId, WCTrustedToken, personalizationID}\r\n               })\r\n       }\r\n   }\r\n}\r\nexport default connect(mapStateToProps, mapDispatchToProps)(ShoppingCart)"]},"metadata":{},"sourceType":"module"}