{"ast":null,"code":"var registerSystem = require('../core/system').registerSystem;\n\nvar bind = require('../utils/bind');\n\nvar constants = require('../constants/');\n\nvar DEFAULT_LIGHT_ATTR = 'data-aframe-default-light';\n/**\n * Light system.\n *\n * Prescribes default lighting if not specified (one ambient, one directional).\n * Removes default lighting from the scene when a new light is added.\n *\n * @param {bool} defaultLights - Whether default lighting are defined.\n * @param {bool} userDefinedLights - Whether user lighting is defined.\n */\n\nmodule.exports.System = registerSystem('light', {\n  schema: {\n    defaultLightsEnabled: {\n      default: true\n    }\n  },\n  init: function () {\n    this.defaultLights = false;\n    this.userDefinedLights = false; // Wait for all entities to fully load before checking for existence of lights.\n    // Since entities wait for <a-assets> to load, any lights attaching to the scene\n    // will do so asynchronously.\n\n    this.sceneEl.addEventListener('loaded', bind(this.setupDefaultLights, this));\n  },\n\n  /**\n   * Notify scene that light has been added and to remove the default.\n   *\n   * @param {object} el - element holding the light component.\n   */\n  registerLight: function (el) {\n    if (!el.hasAttribute(DEFAULT_LIGHT_ATTR)) {\n      // User added a light, remove default lights through DOM.\n      this.removeDefaultLights();\n      this.userDefinedLights = true;\n    }\n  },\n  removeDefaultLights: function () {\n    var defaultLights;\n    var sceneEl = this.sceneEl;\n\n    if (!this.defaultLights) {\n      return;\n    }\n\n    defaultLights = document.querySelectorAll('[' + DEFAULT_LIGHT_ATTR + ']');\n\n    for (var i = 0; i < defaultLights.length; i++) {\n      sceneEl.removeChild(defaultLights[i]);\n    }\n\n    this.defaultLights = false;\n  },\n\n  /**\n   * Prescibe default lights to the scene.\n   * Does so by injecting markup such that this state is not invisible.\n   * These lights are removed if the user adds any lights.\n   */\n  setupDefaultLights: function () {\n    var sceneEl = this.sceneEl;\n    var ambientLight;\n    var directionalLight;\n\n    if (this.userDefinedLights || this.defaultLights || !this.data.defaultLightsEnabled) {\n      return;\n    }\n\n    ambientLight = document.createElement('a-entity');\n    ambientLight.setAttribute('light', {\n      color: '#BBB',\n      type: 'ambient'\n    });\n    ambientLight.setAttribute(DEFAULT_LIGHT_ATTR, '');\n    ambientLight.setAttribute(constants.AFRAME_INJECTED, '');\n    sceneEl.appendChild(ambientLight);\n    directionalLight = document.createElement('a-entity');\n    directionalLight.setAttribute('light', {\n      color: '#FFF',\n      intensity: 0.6,\n      castShadow: true\n    });\n    directionalLight.setAttribute('position', {\n      x: -0.5,\n      y: 1,\n      z: 1\n    });\n    directionalLight.setAttribute(DEFAULT_LIGHT_ATTR, '');\n    directionalLight.setAttribute(constants.AFRAME_INJECTED, '');\n    sceneEl.appendChild(directionalLight);\n    this.defaultLights = true;\n  }\n});","map":{"version":3,"sources":["C:/Users/Hannuri/Desktop/RoyalCyber/my-first-app/node_modules/aframe/src/systems/light.js"],"names":["registerSystem","require","bind","constants","DEFAULT_LIGHT_ATTR","module","exports","System","schema","defaultLightsEnabled","default","init","defaultLights","userDefinedLights","sceneEl","addEventListener","setupDefaultLights","registerLight","el","hasAttribute","removeDefaultLights","document","querySelectorAll","i","length","removeChild","ambientLight","directionalLight","data","createElement","setAttribute","color","type","AFRAME_INJECTED","appendChild","intensity","castShadow","x","y","z"],"mappings":"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","sourcesContent":["var registerSystem = require('../core/system').registerSystem;\nvar bind = require('../utils/bind');\nvar constants = require('../constants/');\n\nvar DEFAULT_LIGHT_ATTR = 'data-aframe-default-light';\n\n/**\n * Light system.\n *\n * Prescribes default lighting if not specified (one ambient, one directional).\n * Removes default lighting from the scene when a new light is added.\n *\n * @param {bool} defaultLights - Whether default lighting are defined.\n * @param {bool} userDefinedLights - Whether user lighting is defined.\n */\nmodule.exports.System = registerSystem('light', {\n  schema: {\n    defaultLightsEnabled: {default: true}\n  },\n\n  init: function () {\n    this.defaultLights = false;\n    this.userDefinedLights = false;\n    // Wait for all entities to fully load before checking for existence of lights.\n    // Since entities wait for <a-assets> to load, any lights attaching to the scene\n    // will do so asynchronously.\n    this.sceneEl.addEventListener('loaded', bind(this.setupDefaultLights, this));\n  },\n\n  /**\n   * Notify scene that light has been added and to remove the default.\n   *\n   * @param {object} el - element holding the light component.\n   */\n  registerLight: function (el) {\n    if (!el.hasAttribute(DEFAULT_LIGHT_ATTR)) {\n      // User added a light, remove default lights through DOM.\n      this.removeDefaultLights();\n      this.userDefinedLights = true;\n    }\n  },\n\n  removeDefaultLights: function () {\n    var defaultLights;\n    var sceneEl = this.sceneEl;\n\n    if (!this.defaultLights) { return; }\n    defaultLights = document.querySelectorAll('[' + DEFAULT_LIGHT_ATTR + ']');\n    for (var i = 0; i < defaultLights.length; i++) {\n      sceneEl.removeChild(defaultLights[i]);\n    }\n    this.defaultLights = false;\n  },\n\n  /**\n   * Prescibe default lights to the scene.\n   * Does so by injecting markup such that this state is not invisible.\n   * These lights are removed if the user adds any lights.\n   */\n  setupDefaultLights: function () {\n    var sceneEl = this.sceneEl;\n    var ambientLight;\n    var directionalLight;\n\n    if (this.userDefinedLights || this.defaultLights || !this.data.defaultLightsEnabled) {\n      return;\n    }\n\n    ambientLight = document.createElement('a-entity');\n    ambientLight.setAttribute('light', {color: '#BBB', type: 'ambient'});\n    ambientLight.setAttribute(DEFAULT_LIGHT_ATTR, '');\n    ambientLight.setAttribute(constants.AFRAME_INJECTED, '');\n    sceneEl.appendChild(ambientLight);\n\n    directionalLight = document.createElement('a-entity');\n    directionalLight.setAttribute('light', {color: '#FFF', intensity: 0.6, castShadow: true});\n    directionalLight.setAttribute('position', {x: -0.5, y: 1, z: 1});\n    directionalLight.setAttribute(DEFAULT_LIGHT_ATTR, '');\n    directionalLight.setAttribute(constants.AFRAME_INJECTED, '');\n    sceneEl.appendChild(directionalLight);\n\n    this.defaultLights = true;\n  }\n});\n"]},"metadata":{},"sourceType":"script"}