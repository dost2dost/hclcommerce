{"ast":null,"code":"/**\n * @author mrdoob / http://mrdoob.com/\n */\nimport { Matrix4, Object3D, Vector3 } from \"../../../build/three.module.js\";\n\nvar CSS2DObject = function (element) {\n  Object3D.call(this);\n  this.element = element;\n  this.element.style.position = 'absolute';\n  this.addEventListener('removed', function () {\n    this.traverse(function (object) {\n      if (object.element instanceof Element && object.element.parentNode !== null) {\n        object.element.parentNode.removeChild(object.element);\n      }\n    });\n  });\n};\n\nCSS2DObject.prototype = Object.create(Object3D.prototype);\nCSS2DObject.prototype.constructor = CSS2DObject; //\n\nvar CSS2DRenderer = function () {\n  var _this = this;\n\n  var _width, _height;\n\n  var _widthHalf, _heightHalf;\n\n  var vector = new Vector3();\n  var viewMatrix = new Matrix4();\n  var viewProjectionMatrix = new Matrix4();\n  var cache = {\n    objects: new WeakMap()\n  };\n  var domElement = document.createElement('div');\n  domElement.style.overflow = 'hidden';\n  this.domElement = domElement;\n\n  this.getSize = function () {\n    return {\n      width: _width,\n      height: _height\n    };\n  };\n\n  this.setSize = function (width, height) {\n    _width = width;\n    _height = height;\n    _widthHalf = _width / 2;\n    _heightHalf = _height / 2;\n    domElement.style.width = width + 'px';\n    domElement.style.height = height + 'px';\n  };\n\n  var renderObject = function (object, scene, camera) {\n    if (object instanceof CSS2DObject) {\n      object.onBeforeRender(_this, scene, camera);\n      vector.setFromMatrixPosition(object.matrixWorld);\n      vector.applyMatrix4(viewProjectionMatrix);\n      var element = object.element;\n      var style = 'translate(-50%,-50%) translate(' + (vector.x * _widthHalf + _widthHalf) + 'px,' + (-vector.y * _heightHalf + _heightHalf) + 'px)';\n      element.style.WebkitTransform = style;\n      element.style.MozTransform = style;\n      element.style.oTransform = style;\n      element.style.transform = style;\n      element.style.display = object.visible && vector.z >= -1 && vector.z <= 1 ? '' : 'none';\n      var objectData = {\n        distanceToCameraSquared: getDistanceToSquared(camera, object)\n      };\n      cache.objects.set(object, objectData);\n\n      if (element.parentNode !== domElement) {\n        domElement.appendChild(element);\n      }\n\n      object.onAfterRender(_this, scene, camera);\n    }\n\n    for (var i = 0, l = object.children.length; i < l; i++) {\n      renderObject(object.children[i], scene, camera);\n    }\n  };\n\n  var getDistanceToSquared = function () {\n    var a = new Vector3();\n    var b = new Vector3();\n    return function (object1, object2) {\n      a.setFromMatrixPosition(object1.matrixWorld);\n      b.setFromMatrixPosition(object2.matrixWorld);\n      return a.distanceToSquared(b);\n    };\n  }();\n\n  var filterAndFlatten = function (scene) {\n    var result = [];\n    scene.traverse(function (object) {\n      if (object instanceof CSS2DObject) result.push(object);\n    });\n    return result;\n  };\n\n  var zOrder = function (scene) {\n    var sorted = filterAndFlatten(scene).sort(function (a, b) {\n      var distanceA = cache.objects.get(a).distanceToCameraSquared;\n      var distanceB = cache.objects.get(b).distanceToCameraSquared;\n      return distanceA - distanceB;\n    });\n    var zMax = sorted.length;\n\n    for (var i = 0, l = sorted.length; i < l; i++) {\n      sorted[i].element.style.zIndex = zMax - i;\n    }\n  };\n\n  this.render = function (scene, camera) {\n    if (scene.autoUpdate === true) scene.updateMatrixWorld();\n    if (camera.parent === null) camera.updateMatrixWorld();\n    viewMatrix.copy(camera.matrixWorldInverse);\n    viewProjectionMatrix.multiplyMatrices(camera.projectionMatrix, viewMatrix);\n    renderObject(scene, scene, camera);\n    zOrder(scene);\n  };\n};\n\nexport { CSS2DObject, CSS2DRenderer };","map":{"version":3,"sources":["F:/_HCLCommece/node_modules/three/examples/jsm/renderers/CSS2DRenderer.js"],"names":["Matrix4","Object3D","Vector3","CSS2DObject","element","call","style","position","addEventListener","traverse","object","Element","parentNode","removeChild","prototype","Object","create","constructor","CSS2DRenderer","_this","_width","_height","_widthHalf","_heightHalf","vector","viewMatrix","viewProjectionMatrix","cache","objects","WeakMap","domElement","document","createElement","overflow","getSize","width","height","setSize","renderObject","scene","camera","onBeforeRender","setFromMatrixPosition","matrixWorld","applyMatrix4","x","y","WebkitTransform","MozTransform","oTransform","transform","display","visible","z","objectData","distanceToCameraSquared","getDistanceToSquared","set","appendChild","onAfterRender","i","l","children","length","a","b","object1","object2","distanceToSquared","filterAndFlatten","result","push","zOrder","sorted","sort","distanceA","get","distanceB","zMax","zIndex","render","autoUpdate","updateMatrixWorld","parent","copy","matrixWorldInverse","multiplyMatrices","projectionMatrix"],"mappings":"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","sourcesContent":["/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nimport {\n\tMatrix4,\n\tObject3D,\n\tVector3\n} from \"../../../build/three.module.js\";\n\nvar CSS2DObject = function ( element ) {\n\n\tObject3D.call( this );\n\n\tthis.element = element;\n\tthis.element.style.position = 'absolute';\n\n\tthis.addEventListener( 'removed', function () {\n\n\t\tthis.traverse( function ( object ) {\n\n\t\t\tif ( object.element instanceof Element && object.element.parentNode !== null ) {\n\n\t\t\t\tobject.element.parentNode.removeChild( object.element );\n\n\t\t\t}\n\n\t\t} );\n\n\t} );\n\n};\n\nCSS2DObject.prototype = Object.create( Object3D.prototype );\nCSS2DObject.prototype.constructor = CSS2DObject;\n\n//\n\nvar CSS2DRenderer = function () {\n\n\tvar _this = this;\n\n\tvar _width, _height;\n\tvar _widthHalf, _heightHalf;\n\n\tvar vector = new Vector3();\n\tvar viewMatrix = new Matrix4();\n\tvar viewProjectionMatrix = new Matrix4();\n\n\tvar cache = {\n\t\tobjects: new WeakMap()\n\t};\n\n\tvar domElement = document.createElement( 'div' );\n\tdomElement.style.overflow = 'hidden';\n\n\tthis.domElement = domElement;\n\n\tthis.getSize = function () {\n\n\t\treturn {\n\t\t\twidth: _width,\n\t\t\theight: _height\n\t\t};\n\n\t};\n\n\tthis.setSize = function ( width, height ) {\n\n\t\t_width = width;\n\t\t_height = height;\n\n\t\t_widthHalf = _width / 2;\n\t\t_heightHalf = _height / 2;\n\n\t\tdomElement.style.width = width + 'px';\n\t\tdomElement.style.height = height + 'px';\n\n\t};\n\n\tvar renderObject = function ( object, scene, camera ) {\n\n\t\tif ( object instanceof CSS2DObject ) {\n\n\t\t\tobject.onBeforeRender( _this, scene, camera );\n\n\t\t\tvector.setFromMatrixPosition( object.matrixWorld );\n\t\t\tvector.applyMatrix4( viewProjectionMatrix );\n\n\t\t\tvar element = object.element;\n\t\t\tvar style = 'translate(-50%,-50%) translate(' + ( vector.x * _widthHalf + _widthHalf ) + 'px,' + ( - vector.y * _heightHalf + _heightHalf ) + 'px)';\n\n\t\t\telement.style.WebkitTransform = style;\n\t\t\telement.style.MozTransform = style;\n\t\t\telement.style.oTransform = style;\n\t\t\telement.style.transform = style;\n\n\t\t\telement.style.display = ( object.visible && vector.z >= - 1 && vector.z <= 1 ) ? '' : 'none';\n\n\t\t\tvar objectData = {\n\t\t\t\tdistanceToCameraSquared: getDistanceToSquared( camera, object )\n\t\t\t};\n\n\t\t\tcache.objects.set( object, objectData );\n\n\t\t\tif ( element.parentNode !== domElement ) {\n\n\t\t\t\tdomElement.appendChild( element );\n\n\t\t\t}\n\n\t\t\tobject.onAfterRender( _this, scene, camera );\n\n\t\t}\n\n\t\tfor ( var i = 0, l = object.children.length; i < l; i ++ ) {\n\n\t\t\trenderObject( object.children[ i ], scene, camera );\n\n\t\t}\n\n\t};\n\n\tvar getDistanceToSquared = function () {\n\n\t\tvar a = new Vector3();\n\t\tvar b = new Vector3();\n\n\t\treturn function ( object1, object2 ) {\n\n\t\t\ta.setFromMatrixPosition( object1.matrixWorld );\n\t\t\tb.setFromMatrixPosition( object2.matrixWorld );\n\n\t\t\treturn a.distanceToSquared( b );\n\n\t\t};\n\n\t}();\n\n\tvar filterAndFlatten = function ( scene ) {\n\n\t\tvar result = [];\n\n\t\tscene.traverse( function ( object ) {\n\n\t\t\tif ( object instanceof CSS2DObject ) result.push( object );\n\n\t\t} );\n\n\t\treturn result;\n\n\t};\n\n\tvar zOrder = function ( scene ) {\n\n\t\tvar sorted = filterAndFlatten( scene ).sort( function ( a, b ) {\n\n\t\t\tvar distanceA = cache.objects.get( a ).distanceToCameraSquared;\n\t\t\tvar distanceB = cache.objects.get( b ).distanceToCameraSquared;\n\n\t\t\treturn distanceA - distanceB;\n\n\t\t} );\n\n\t\tvar zMax = sorted.length;\n\n\t\tfor ( var i = 0, l = sorted.length; i < l; i ++ ) {\n\n\t\t\tsorted[ i ].element.style.zIndex = zMax - i;\n\n\t\t}\n\n\t};\n\n\tthis.render = function ( scene, camera ) {\n\n\t\tif ( scene.autoUpdate === true ) scene.updateMatrixWorld();\n\t\tif ( camera.parent === null ) camera.updateMatrixWorld();\n\n\t\tviewMatrix.copy( camera.matrixWorldInverse );\n\t\tviewProjectionMatrix.multiplyMatrices( camera.projectionMatrix, viewMatrix );\n\n\t\trenderObject( scene, scene, camera );\n\t\tzOrder( scene );\n\n\t};\n\n};\n\nexport { CSS2DObject, CSS2DRenderer };\n"]},"metadata":{},"sourceType":"module"}