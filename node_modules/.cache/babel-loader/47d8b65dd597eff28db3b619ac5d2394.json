{"ast":null,"code":"var coordinates = require('../utils/coordinates');\n\nvar debug = require('debug');\n\nvar error = debug('core:propertyTypes:warn');\nvar warn = debug('core:propertyTypes:warn');\nvar propertyTypes = module.exports.propertyTypes = {};\nvar nonCharRegex = /[,> .[\\]:]/;\nvar urlRegex = /\\url\\((.+)\\)/; // Built-in property types.\n\nregisterPropertyType('audio', '', assetParse);\nregisterPropertyType('array', [], arrayParse, arrayStringify);\nregisterPropertyType('asset', '', assetParse);\nregisterPropertyType('boolean', false, boolParse);\nregisterPropertyType('color', '#FFF', defaultParse, defaultStringify);\nregisterPropertyType('int', 0, intParse);\nregisterPropertyType('number', 0, numberParse);\nregisterPropertyType('map', '', assetParse);\nregisterPropertyType('model', '', assetParse);\nregisterPropertyType('selector', null, selectorParse, selectorStringify);\nregisterPropertyType('selectorAll', null, selectorAllParse, selectorAllStringify);\nregisterPropertyType('src', '', srcParse);\nregisterPropertyType('string', '', defaultParse, defaultStringify);\nregisterPropertyType('time', 0, intParse);\nregisterPropertyType('vec2', {\n  x: 0,\n  y: 0\n}, vecParse, coordinates.stringify);\nregisterPropertyType('vec3', {\n  x: 0,\n  y: 0,\n  z: 0\n}, vecParse, coordinates.stringify);\nregisterPropertyType('vec4', {\n  x: 0,\n  y: 0,\n  z: 0,\n  w: 1\n}, vecParse, coordinates.stringify);\n/**\n * Register a parser for re-use such that when someone uses `type` in the schema,\n * `schema.process` will set the property `parse` and `stringify`.\n *\n * @param {string} type - Type name.\n * @param [defaultValue=null] -\n *   Default value to use if component does not define default value.\n * @param {function} [parse=defaultParse] - Parse string function.\n * @param {function} [stringify=defaultStringify] - Stringify to DOM function.\n */\n\nfunction registerPropertyType(type, defaultValue, parse, stringify) {\n  if ('type' in propertyTypes) {\n    error('Property type ' + type + ' is already registered.');\n    return;\n  }\n\n  propertyTypes[type] = {\n    default: defaultValue,\n    parse: parse || defaultParse,\n    stringify: stringify || defaultStringify\n  };\n}\n\nmodule.exports.registerPropertyType = registerPropertyType;\n\nfunction arrayParse(value) {\n  if (Array.isArray(value)) {\n    return value;\n  }\n\n  if (!value || typeof value !== 'string') {\n    return [];\n  }\n\n  return value.split(',').map(trim);\n\n  function trim(str) {\n    return str.trim();\n  }\n}\n\nfunction arrayStringify(value) {\n  return value.join(', ');\n}\n/**\n * For general assets.\n *\n * @param {string} value - Can either be `url(<value>)`, an ID selector to an asset, or\n *   just string.\n * @returns {string} Parsed value from `url(<value>)`, src from `<someasset src>`, or\n *   just string.\n */\n\n\nfunction assetParse(value) {\n  var el;\n  var parsedUrl; // If an element was provided (e.g. canvas or video), just return it.\n\n  if (typeof value !== 'string') {\n    return value;\n  } // Wrapped `url()` in case of data URI.\n\n\n  parsedUrl = value.match(urlRegex);\n\n  if (parsedUrl) {\n    return parsedUrl[1];\n  } // ID.\n\n\n  if (value.charAt(0) === '#') {\n    el = document.getElementById(value.substring(1));\n\n    if (el) {\n      // Pass through media elements. If we have the elements, we don't have to call\n      // three.js loaders which would re-request the assets.\n      if (el.tagName === 'CANVAS' || el.tagName === 'VIDEO' || el.tagName === 'IMG') {\n        return el;\n      }\n\n      return el.getAttribute('src');\n    }\n\n    warn('\"' + value + '\" asset not found.');\n    return;\n  } // Non-wrapped url().\n\n\n  return value;\n}\n\nfunction defaultParse(value) {\n  return value;\n}\n\nfunction defaultStringify(value) {\n  if (value === null) {\n    return 'null';\n  }\n\n  return value.toString();\n}\n\nfunction boolParse(value) {\n  return value !== 'false' && value !== false;\n}\n\nfunction intParse(value) {\n  return parseInt(value, 10);\n}\n\nfunction numberParse(value) {\n  return parseFloat(value, 10);\n}\n\nfunction selectorParse(value) {\n  if (!value) {\n    return null;\n  }\n\n  if (typeof value !== 'string') {\n    return value;\n  }\n\n  if (value[0] === '#' && !nonCharRegex.test(value)) {\n    // When selecting element by ID only, use getElementById for better performance.\n    // Don't match like #myId .child.\n    return document.getElementById(value.substring(1));\n  }\n\n  return document.querySelector(value);\n}\n\nfunction selectorAllParse(value) {\n  if (!value) {\n    return null;\n  }\n\n  if (typeof value !== 'string') {\n    return value;\n  }\n\n  return Array.prototype.slice.call(document.querySelectorAll(value), 0);\n}\n\nfunction selectorStringify(value) {\n  if (value.getAttribute) {\n    return '#' + value.getAttribute('id');\n  }\n\n  return defaultStringify(value);\n}\n\nfunction selectorAllStringify(value) {\n  if (value instanceof Array) {\n    return value.map(function (element) {\n      return '#' + element.getAttribute('id');\n    }).join(', ');\n  }\n\n  return defaultStringify(value);\n}\n\nfunction srcParse(value) {\n  warn('`src` property type is deprecated. Use `asset` instead.');\n  return assetParse(value);\n}\n\nfunction vecParse(value) {\n  return coordinates.parse(value, this.default);\n}\n/**\n * Validate the default values in a schema to match their type.\n *\n * @param {string} type - Property type name.\n * @param defaultVal - Property type default value.\n * @returns {boolean} Whether default value is accurate given the type.\n */\n\n\nfunction isValidDefaultValue(type, defaultVal) {\n  if (type === 'audio' && typeof defaultVal !== 'string') {\n    return false;\n  }\n\n  if (type === 'array' && !Array.isArray(defaultVal)) {\n    return false;\n  }\n\n  if (type === 'asset' && typeof defaultVal !== 'string') {\n    return false;\n  }\n\n  if (type === 'boolean' && typeof defaultVal !== 'boolean') {\n    return false;\n  }\n\n  if (type === 'color' && typeof defaultVal !== 'string') {\n    return false;\n  }\n\n  if (type === 'int' && typeof defaultVal !== 'number') {\n    return false;\n  }\n\n  if (type === 'number' && typeof defaultVal !== 'number') {\n    return false;\n  }\n\n  if (type === 'map' && typeof defaultVal !== 'string') {\n    return false;\n  }\n\n  if (type === 'model' && typeof defaultVal !== 'string') {\n    return false;\n  }\n\n  if (type === 'selector' && typeof defaultVal !== 'string' && defaultVal !== null) {\n    return false;\n  }\n\n  if (type === 'selectorAll' && typeof defaultVal !== 'string' && defaultVal !== null) {\n    return false;\n  }\n\n  if (type === 'src' && typeof defaultVal !== 'string') {\n    return false;\n  }\n\n  if (type === 'string' && typeof defaultVal !== 'string') {\n    return false;\n  }\n\n  if (type === 'time' && typeof defaultVal !== 'number') {\n    return false;\n  }\n\n  if (type === 'vec2') {\n    return isValidDefaultCoordinate(defaultVal, 2);\n  }\n\n  if (type === 'vec3') {\n    return isValidDefaultCoordinate(defaultVal, 3);\n  }\n\n  if (type === 'vec4') {\n    return isValidDefaultCoordinate(defaultVal, 4);\n  }\n\n  return true;\n}\n\nmodule.exports.isValidDefaultValue = isValidDefaultValue;\n/**\n * Checks if default coordinates are valid.\n *\n * @param possibleCoordinates\n * @param {number} dimensions - 2 for 2D Vector, 3 for 3D vector.\n * @returns {boolean} Whether coordinates are parsed correctly.\n */\n\nfunction isValidDefaultCoordinate(possibleCoordinates, dimensions) {\n  if (possibleCoordinates === null) {\n    return true;\n  }\n\n  if (typeof possibleCoordinates !== 'object') {\n    return false;\n  }\n\n  if (Object.keys(possibleCoordinates).length !== dimensions) {\n    return false;\n  } else {\n    var x = possibleCoordinates.x;\n    var y = possibleCoordinates.y;\n    var z = possibleCoordinates.z;\n    var w = possibleCoordinates.w;\n\n    if (typeof x !== 'number' || typeof y !== 'number') {\n      return false;\n    }\n\n    if (dimensions > 2 && typeof z !== 'number') {\n      return false;\n    }\n\n    if (dimensions > 3 && typeof w !== 'number') {\n      return false;\n    }\n  }\n\n  return true;\n}\n\nmodule.exports.isValidDefaultCoordinate = isValidDefaultCoordinate;","map":{"version":3,"sources":["C:/Users/Hannuri/Desktop/RoyalCyber/my-first-app/node_modules/aframe/src/core/propertyTypes.js"],"names":["coordinates","require","debug","error","warn","propertyTypes","module","exports","nonCharRegex","urlRegex","registerPropertyType","assetParse","arrayParse","arrayStringify","boolParse","defaultParse","defaultStringify","intParse","numberParse","selectorParse","selectorStringify","selectorAllParse","selectorAllStringify","srcParse","x","y","vecParse","stringify","z","w","type","defaultValue","parse","default","value","Array","isArray","split","map","trim","str","join","el","parsedUrl","match","charAt","document","getElementById","substring","tagName","getAttribute","toString","parseInt","parseFloat","test","querySelector","prototype","slice","call","querySelectorAll","element","isValidDefaultValue","defaultVal","isValidDefaultCoordinate","possibleCoordinates","dimensions","Object","keys","length"],"mappings":"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","sourcesContent":["var coordinates = require('../utils/coordinates');\nvar debug = require('debug');\n\nvar error = debug('core:propertyTypes:warn');\nvar warn = debug('core:propertyTypes:warn');\n\nvar propertyTypes = module.exports.propertyTypes = {};\nvar nonCharRegex = /[,> .[\\]:]/;\nvar urlRegex = /\\url\\((.+)\\)/;\n\n// Built-in property types.\nregisterPropertyType('audio', '', assetParse);\nregisterPropertyType('array', [], arrayParse, arrayStringify);\nregisterPropertyType('asset', '', assetParse);\nregisterPropertyType('boolean', false, boolParse);\nregisterPropertyType('color', '#FFF', defaultParse, defaultStringify);\nregisterPropertyType('int', 0, intParse);\nregisterPropertyType('number', 0, numberParse);\nregisterPropertyType('map', '', assetParse);\nregisterPropertyType('model', '', assetParse);\nregisterPropertyType('selector', null, selectorParse, selectorStringify);\nregisterPropertyType('selectorAll', null, selectorAllParse, selectorAllStringify);\nregisterPropertyType('src', '', srcParse);\nregisterPropertyType('string', '', defaultParse, defaultStringify);\nregisterPropertyType('time', 0, intParse);\nregisterPropertyType('vec2', {x: 0, y: 0}, vecParse, coordinates.stringify);\nregisterPropertyType('vec3', {x: 0, y: 0, z: 0}, vecParse, coordinates.stringify);\nregisterPropertyType('vec4', {x: 0, y: 0, z: 0, w: 1}, vecParse, coordinates.stringify);\n\n/**\n * Register a parser for re-use such that when someone uses `type` in the schema,\n * `schema.process` will set the property `parse` and `stringify`.\n *\n * @param {string} type - Type name.\n * @param [defaultValue=null] -\n *   Default value to use if component does not define default value.\n * @param {function} [parse=defaultParse] - Parse string function.\n * @param {function} [stringify=defaultStringify] - Stringify to DOM function.\n */\nfunction registerPropertyType (type, defaultValue, parse, stringify) {\n  if ('type' in propertyTypes) {\n    error('Property type ' + type + ' is already registered.');\n    return;\n  }\n\n  propertyTypes[type] = {\n    default: defaultValue,\n    parse: parse || defaultParse,\n    stringify: stringify || defaultStringify\n  };\n}\nmodule.exports.registerPropertyType = registerPropertyType;\n\nfunction arrayParse (value) {\n  if (Array.isArray(value)) { return value; }\n  if (!value || typeof value !== 'string') { return []; }\n  return value.split(',').map(trim);\n  function trim (str) { return str.trim(); }\n}\n\nfunction arrayStringify (value) {\n  return value.join(', ');\n}\n\n/**\n * For general assets.\n *\n * @param {string} value - Can either be `url(<value>)`, an ID selector to an asset, or\n *   just string.\n * @returns {string} Parsed value from `url(<value>)`, src from `<someasset src>`, or\n *   just string.\n */\nfunction assetParse (value) {\n  var el;\n  var parsedUrl;\n\n  // If an element was provided (e.g. canvas or video), just return it.\n  if (typeof value !== 'string') { return value; }\n\n  // Wrapped `url()` in case of data URI.\n  parsedUrl = value.match(urlRegex);\n  if (parsedUrl) { return parsedUrl[1]; }\n\n  // ID.\n  if (value.charAt(0) === '#') {\n    el = document.getElementById(value.substring(1));\n    if (el) {\n      // Pass through media elements. If we have the elements, we don't have to call\n      // three.js loaders which would re-request the assets.\n      if (el.tagName === 'CANVAS' || el.tagName === 'VIDEO' || el.tagName === 'IMG') {\n        return el;\n      }\n      return el.getAttribute('src');\n    }\n    warn('\"' + value + '\" asset not found.');\n    return;\n  }\n\n  // Non-wrapped url().\n  return value;\n}\n\nfunction defaultParse (value) {\n  return value;\n}\n\nfunction defaultStringify (value) {\n  if (value === null) { return 'null'; }\n  return value.toString();\n}\n\nfunction boolParse (value) {\n  return value !== 'false' && value !== false;\n}\n\nfunction intParse (value) {\n  return parseInt(value, 10);\n}\n\nfunction numberParse (value) {\n  return parseFloat(value, 10);\n}\n\nfunction selectorParse (value) {\n  if (!value) { return null; }\n  if (typeof value !== 'string') { return value; }\n  if (value[0] === '#' && !nonCharRegex.test(value)) {\n    // When selecting element by ID only, use getElementById for better performance.\n    // Don't match like #myId .child.\n    return document.getElementById(value.substring(1));\n  }\n  return document.querySelector(value);\n}\n\nfunction selectorAllParse (value) {\n  if (!value) { return null; }\n  if (typeof value !== 'string') { return value; }\n  return Array.prototype.slice.call(document.querySelectorAll(value), 0);\n}\n\nfunction selectorStringify (value) {\n  if (value.getAttribute) {\n    return '#' + value.getAttribute('id');\n  }\n  return defaultStringify(value);\n}\n\nfunction selectorAllStringify (value) {\n  if (value instanceof Array) {\n    return value.map(function (element) {\n      return '#' + element.getAttribute('id');\n    }).join(', ');\n  }\n  return defaultStringify(value);\n}\n\nfunction srcParse (value) {\n  warn('`src` property type is deprecated. Use `asset` instead.');\n  return assetParse(value);\n}\n\nfunction vecParse (value) {\n  return coordinates.parse(value, this.default);\n}\n\n/**\n * Validate the default values in a schema to match their type.\n *\n * @param {string} type - Property type name.\n * @param defaultVal - Property type default value.\n * @returns {boolean} Whether default value is accurate given the type.\n */\nfunction isValidDefaultValue (type, defaultVal) {\n  if (type === 'audio' && typeof defaultVal !== 'string') { return false; }\n  if (type === 'array' && !Array.isArray(defaultVal)) { return false; }\n  if (type === 'asset' && typeof defaultVal !== 'string') { return false; }\n  if (type === 'boolean' && typeof defaultVal !== 'boolean') { return false; }\n  if (type === 'color' && typeof defaultVal !== 'string') { return false; }\n  if (type === 'int' && typeof defaultVal !== 'number') { return false; }\n  if (type === 'number' && typeof defaultVal !== 'number') { return false; }\n  if (type === 'map' && typeof defaultVal !== 'string') { return false; }\n  if (type === 'model' && typeof defaultVal !== 'string') { return false; }\n  if (type === 'selector' && typeof defaultVal !== 'string' &&\n      defaultVal !== null) { return false; }\n  if (type === 'selectorAll' && typeof defaultVal !== 'string' &&\n      defaultVal !== null) { return false; }\n  if (type === 'src' && typeof defaultVal !== 'string') { return false; }\n  if (type === 'string' && typeof defaultVal !== 'string') { return false; }\n  if (type === 'time' && typeof defaultVal !== 'number') { return false; }\n  if (type === 'vec2') { return isValidDefaultCoordinate(defaultVal, 2); }\n  if (type === 'vec3') { return isValidDefaultCoordinate(defaultVal, 3); }\n  if (type === 'vec4') { return isValidDefaultCoordinate(defaultVal, 4); }\n  return true;\n}\nmodule.exports.isValidDefaultValue = isValidDefaultValue;\n\n/**\n * Checks if default coordinates are valid.\n *\n * @param possibleCoordinates\n * @param {number} dimensions - 2 for 2D Vector, 3 for 3D vector.\n * @returns {boolean} Whether coordinates are parsed correctly.\n */\nfunction isValidDefaultCoordinate (possibleCoordinates, dimensions) {\n  if (possibleCoordinates === null) { return true; }\n  if (typeof possibleCoordinates !== 'object') { return false; }\n\n  if (Object.keys(possibleCoordinates).length !== dimensions) {\n    return false;\n  } else {\n    var x = possibleCoordinates.x;\n    var y = possibleCoordinates.y;\n    var z = possibleCoordinates.z;\n    var w = possibleCoordinates.w;\n\n    if (typeof x !== 'number' || typeof y !== 'number') { return false; }\n    if (dimensions > 2 && typeof z !== 'number') { return false; }\n    if (dimensions > 3 && typeof w !== 'number') { return false; }\n  }\n\n  return true;\n}\nmodule.exports.isValidDefaultCoordinate = isValidDefaultCoordinate;\n"]},"metadata":{},"sourceType":"script"}